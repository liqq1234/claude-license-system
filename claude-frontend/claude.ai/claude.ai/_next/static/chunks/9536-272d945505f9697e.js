"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9536],{1524:(e,t,a)=>{a.d(t,{f:()=>l,u:()=>n});var s=a(27062);function n(){let{value:e}=(0,s.fS)("trials_and_tribulations_of_high_school_football");return!1}function l(){let{value:e}=(0,s.fS)("trials_and_tribulations_of_high_school_football");return e}},4708:(e,t,a)=>{a.d(t,{q:()=>c});var s=a(23661),n=a(27062),l=a(21036),i=a(67455),r=a(56147),o=a(53573),d=a(6568);let c=e=>{let{projectUuid:t,conversationUUID:a,conversationTokensSoFar:c,conversationFiles:u,projectKnowledgebaseTokens:m,input:x,attachments:p,syncSourceUuids:h,chatInputModel:f}=e,g=(0,l.useStatsigClient)(),v=(0,r.Pb)(t);m=m&&!v?m:0;let y=u.filter(e=>e.file_kind===s.M.Image),j=c+(0,d.ED)(y)+u.filter(e=>e.file_kind===s.M.SanitizedDocument).reduce((e,t)=>e+(0,d.n2)(t),0)+m,b=(0,d.fO)(x,y,p),w=j+b+(0,i.YO)(h),M=(0,o.D)(a,f),k=null;j>M?k="exceeded":w>M&&(k="will-exceed");let A=g.getExperiment("conversation_truncation_max"),{value:_}=(0,n.fS)("conversation_truncation_projects");return A.get("truncate",!1)&&(void 0===t||_)&&null!==k&&b<M?[null,{conversationTokens:j,msgTokens:b,totalTokens:w,maxConversationTokens:M}]:[k,{conversationTokens:j,msgTokens:b,totalTokens:w,maxConversationTokens:M}]}},5799:(e,t,a)=>{a.d(t,{V:()=>x});var s=a(54568);a(7726),a(70011),a(85644),a(1761);var n=a(41417),l=a(32987),i=a(37463),r=a(7620);let o={FROM_ANCHOR:8,POINTER_OFFSET:18,POINTER_HEIGHT:16},d=e=>{let{anchorRef:t,children:a,side:d,align:u="center",accentColor:m="default",onClose:x,className:p,introDelay:h=0,spacing:f={},buttonText:g,onClickButton:v}=e,y={...o,...f},j=(0,r.useRef)(null),[b,w]=(0,r.useState)(d),[M,k]=(0,r.useState)(u);(0,r.useEffect)(()=>{if(!j.current||!t.current)return;let e=()=>{let{current:e}=j,{current:a}=t;if(!e||!a)return;let s=a.getBoundingClientRect(),n=e.getBoundingClientRect(),l=window.innerWidth,i=window.innerHeight,r=b,o=M,d=0,c=0,u=()=>{d="top"===r?s.top-n.height-y.FROM_ANCHOR:"bottom"===r?s.bottom+y.FROM_ANCHOR:s.top-y.POINTER_OFFSET+.5*s.height-.5*y.POINTER_HEIGHT},m=()=>{if("left"===r)c=s.left-n.width-y.FROM_ANCHOR;else if("right"===r)c=s.right+y.FROM_ANCHOR;else switch(o){case"start":c=s.left-y.FROM_ANCHOR;break;case"center":c=s.left+(s.width-n.width)/2;break;case"end":c=s.right-n.width+y.FROM_ANCHOR}};u(),m(),c<0?"top"===r||"bottom"===r?o="start":r="bottom":c+n.width>l&&("top"===r||"bottom"===r?o="end":r="bottom"),d<0?r="bottom":d+n.height>i&&(r="top"),u(),m(),e.style.top="".concat(d,"px"),e.style.left="".concat(c,"px"),r!==b&&w(r),o!==M&&k(o)};e();let a=new ResizeObserver(e);t.current&&(a.observe(t.current),t.current.parentElement&&a.observe(t.current.parentElement));let s=e=>{if(x){var t;(null==(t=j.current)?void 0:t.contains(e.target))||x()}};return window.addEventListener("resize",e),window.addEventListener("scroll",e),document.addEventListener("click",s,{capture:!0}),()=>{a.disconnect(),window.removeEventListener("resize",e),window.removeEventListener("scroll",e),document.removeEventListener("click",s,{capture:!0})}},[b,M,t,x,y.FROM_ANCHOR,y.POINTER_HEIGHT,y.POINTER_OFFSET]);let A={};switch(b){case"right":A={translateX:-y.FROM_ANCHOR,opacity:0};break;case"left":A={translateX:y.FROM_ANCHOR,opacity:0};break;case"bottom":A={translateY:-y.FROM_ANCHOR,opacity:0};break;case"top":A={translateY:y.FROM_ANCHOR,opacity:0}}return(0,s.jsxs)(i.P.div,{ref:j,initial:A,animate:{translateY:0,translateX:0,opacity:1,transition:{delay:h,type:"spring",stiffness:200,damping:20,mass:1.5,opacity:{ease:"easeOut",duration:.15}}},exit:{scale:.985,opacity:0,filter:"blur(24px)",transition:{ease:"easeIn",duration:.3,opacity:{duration:.2}}},className:(0,l.A)("font-base fixed z-tooltip rounded-xl p-4 border-0.5 shadow-sm max-w-[16.6rem]","default"===m&&"bg-bg-200 border-border-300","secondary"===m&&"text-accent-secondary-000 bg-accent-secondary-900 border-accent-secondary-100/50",p),role:"dialog",style:{willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:[(0,s.jsx)(c,{side:b,align:M,accentColor:m,spacing:y}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[a,!!g&&!!v&&(0,s.jsx)(n.$,{variant:"outline",className:(0,l.A)("!gap-0 !text-sm !rounded-lg  !px-3 !min-w-0 !w-fit","secondary"===m&&"!text-accent-secondary-000 !border-accent-secondary-100/30 hover:!bg-accent-secondary-100 hover:!text-oncolor-100"),onClick:()=>{v(),null==x||x()},size:"sm",children:(0,s.jsx)("p",{className:"inline",children:g})})]})]})},c=e=>{let{accentColor:t,side:a,align:n,spacing:i=o}=e,r="fill-bg-200",d="fill-border-300";"secondary"===t&&(r="fill-accent-secondary-900",d="fill-accent-secondary-100/50");let c={};switch(a){case"top":c={top:"100%",left:"50%",marginTop:"-5px",transform:"rotate(-90deg) translateY(-25%)"};break;case"bottom":c={bottom:"100%",left:"50%",marginBottom:"-5px",transform:"rotate(90deg) translateY(25%)"};break;case"right":c={top:i.POINTER_OFFSET};break;case"left":c={top:i.POINTER_OFFSET,left:"100%",transform:"rotate(180deg)"}}if("top"===a||"bottom"===a)switch(n){case"start":c.left=i.POINTER_OFFSET;break;case"end":c.left="auto",c.right=i.POINTER_OFFSET}return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",height:i.POINTER_HEIGHT,viewBox:"0 0 6 16",className:(0,l.A)("absolute origin-center pointer-events-none","right"===a&&"right-full"),style:c,children:[(0,s.jsx)("path",{className:r,d:"M6 0h-.5v1.55c0 .55-.27 1.06-.71 1.55-.53.6-1.16 1.05-1.79 1.51-.57.42-1.15.85-1.65 1.37C.87 6.48.5 7.06.5 7.74c0 .68.37 1.26.85 1.77.5.52 1.08.94 1.65 1.36.63.47 1.26.93 1.79 1.51.44.5.71 1 .71 1.56V16H6V0Z"}),(0,s.jsx)("path",{className:d,fillRule:"evenodd",clipRule:"evenodd",d:"M6 0v1.55c0 .74-.36 1.36-.85 1.9-1.01 1.13-2.4 1.8-3.44 2.89-.45.47-.71.92-.71 1.4 0 .48.26.93.7 1.4 1.05 1.1 2.44 1.76 3.45 2.89.5.54.85 1.17.85 1.9V16h-.5v-2.06c0-.56-.27-1.06-.71-1.56-1.01-1.12-2.4-1.79-3.44-2.87C.87 9 .5 8.42.5 7.74c0-.68.37-1.26.85-1.76C2.4 4.89 3.78 4.22 4.8 3.1c.44-.5.71-1 .71-1.55V0H6Z"})]})};a(27062);var u=a(36081);a(45078);var m=a(12331);a(57383);let x=e=>{let{anchorRef:t,canShowNux:a,text:n,id:l,nuxItem:i,side:r}=e,{shouldShow:o,dismiss:c}=(0,m.z)(l,i);return o&&a?(0,s.jsx)(d,{side:r,anchorRef:t,onClose:c,accentColor:"secondary",introDelay:.5,children:(0,s.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,s.jsx)(u.A,{size:16,className:"text-accent-secondary-200"}),(0,s.jsx)("p",{className:"-my-[2px]",children:n})]})}):null}},7409:(e,t,a)=>{a.d(t,{Dk:()=>r,NM:()=>i,lD:()=>d,sv:()=>o});var s=a(54568),n=a(61125),l=a(7386);let i=e=>{let{file:t,size:a,showWarnings:n,onRemoveFile:i,onClick:r,isEditable:o}=e;return"xxs"===a?(0,s.jsx)(l.M1,{file:t}):(0,s.jsx)(l.NM,{file:t,showWarnings:n,handleRemove:i,handleClick:r,isEditable:o})};function r(e){let t=e.match(/\.[^/.]+$/);return t&&(0,n.cm)({imagesEnabled:!0}).includes(t[0].toLowerCase())?e.replace(/\.[^/.]+$/,""):e}let o=()=>(0,s.jsx)(l.Iq,{title:"Images hidden in shared chats",isError:!0}),d=()=>(0,s.jsx)(l.Iq,{title:"Files hidden in shared chats",isError:!0})},12331:(e,t,a)=>{a.d(t,{z:()=>i});var s=a(7620),n=a(20878),l=a(50163);function i(e,t){let{dateAdded:a,priority:i,showAfterOthersDismiss:r}=t,o=(0,s.useContext)(l.L),{dismiss:d,isDismissed:c}=(0,n.W)();if(!o)throw Error("useNux must be used within a NuxProvider");let{registerNux:u,unregisterNux:m,currentlyShowing:x}=o;return(0,s.useEffect)(()=>{if(!c(e))return u(e,{dateAdded:a,priority:i,showAfterOthersDismiss:r}),()=>m(e)},[e,a,i,r,c,u,m]),{shouldShow:x===e&&!c(e),dismiss:()=>{d(e),m(e)}}}},14786:(e,t,a)=>{a.d(t,{q:()=>o});var s=a(54568),n=a(4705),l=a(32987),i=a(7620),r=a(57383);let o=e=>{let{children:t,actionButton:a,title:o,minimalUi:d}=e,{hasBlockingWarning:c,setHasBlockingWarning:u}=(0,r.o)();return(0,i.useEffect)(()=>(u(!0),()=>{u(!1)}),[c,u]),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,s.jsxs)("div",{className:(0,l.A)("flex flex-row items-center gap-2 md:w-full",d?null:"text-danger-000"),children:[d?null:(0,s.jsx)(n.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsxs)("div",{children:[o&&(0,s.jsx)("div",{className:"text-sm font-medium",children:o}),(0,s.jsx)("div",{className:"text-sm",children:t})]})]}),!!a&&(0,s.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:a})]})})}},16310:(e,t,a)=>{a.d(t,{ey:()=>P,$3:()=>q});var s=a(54568),n=a(8027),l=a(11515),i=a(70011),r=a(85644),o=a(9896),d=a(1761),c=a(51121),u=a(19125),m=a(22529),x=a(43195),p=a(34059),h=a(84403),f=a(27062),g=a(77101),v=a(85544),y=a(24871),j=a(21036),b=a(7620),w=a(46760),M=a(61906),k=a(99965);async function A(e){let{organizationUuid:t,conversationUuid:a,filePath:s}=e,n="/api/organizations/".concat(t,"/conversations/").concat(a||"00000000-0000-0000-0000-000000000000","/wiggle/download-file?path=").concat(encodeURIComponent(s)),l=await fetch(n);if(!l.ok)throw Error("Failed to fetch file: ".concat(l.status," ").concat(l.statusText));return l}var _=a(85717),C=a(35747),N=a(92947),S=a(45078),I=a(91768),E=a(43156),T=a(57383),D=a(45727),O=a(1524),R=a(85201);let L="inputMenu",z=()=>({isDisabled:!0,tooltip:(0,w.A)().formatMessage({defaultMessage:"Select a different model to use this feature",id:"/9vSDy2Wm0"}),isChecked:!1}),P=e=>{let{actions:t}=e,a=(0,w.A)(),n=(0,k.lu)(),l=(0,d.O9)(),r=(0,d.zc)(),o=(0,d.h0)(),c=(0,N.sb)(),u=(0,R.Ob)(),{conversation:m,model:p}=(0,T.o)(),h=(0,i.Z3)((null==m?void 0:m.id)||null),f=null!=p?p:h,g=U({actions:t,currentModel:f}),v=J(),j=V({actions:t}),b=B({actions:t}),M=K({currentModel:f,conversation:m}),A=Z(),_=$();if((0,R.gB)())return j;let C=[...b?[b]:[],...M?[M]:[],...A?[A]:[],..._?[_]:[]];g.length&&(C=C.concat([...C.length?[{key:"divider1",type:"divider",label:""}]:[],...g]));let S=n&&(l||r);return(v.length||S||c)&&(C=C.concat([...v,...c?[{key:"divider2",type:"divider",label:""},{key:"addIntegrations",type:"button",icon:(0,s.jsx)(y.c,{size:16}),label:a.formatMessage({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),tag:o?void 0:u?"upgrade":"pro",onClick:o||!u?t.openMcpDirectoryModal:()=>{window.location.href="/upgrade"}},{key:"manageIntegrations",type:"button",icon:(0,s.jsx)(x.wB_,{size:16}),label:a.formatMessage({defaultMessage:"Manage connectors",id:"cqx+RdJnHp"}),isExternal:!0,onClick:()=>{window.location.href="/settings/connectors"}}]:S?[{key:"divider2",type:"divider",label:""},{key:"addIntegrations",type:"button",icon:(0,s.jsx)(y.c,{size:16}),label:a.formatMessage({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),isExternal:!0,onClick:()=>{window.location.href="/settings/connectors"}}]:[]])),C},U=e=>{let{actions:t,currentModel:a}=e,s=F({currentModel:a}),n=G({currentModel:a}),l=H({actions:t,currentModel:a}),i=Y({currentModel:a});return[...s?[s]:[],...n?[n]:[],...l?[l]:[],...i?[i]:[]]},F=e=>{let{currentModel:t}=e,a=(0,w.A)(),{conversation:n}=(0,T.o)(),l=(0,d.h0)(),i=(0,R.Ob)(),r=(0,E.Eu)(t),o=(0,E.be)(),c=(0,E.WJ)(),u=(0,E.fy)(n),{toggleConversationSetting:m}=(0,S.rX)(),p=z(),h=X("web_search");if(!o&&!i)return null;let f=u&&r;return o||!i||l?{key:"webSearch",type:"switch",label:a.formatMessage({defaultMessage:"Web search",id:"x0W7xxxEcv"}),icon:(0,s.jsx)(x.qzq,{size:16}),isChecked:f,onClick:()=>m("enabled_web_search",!f),tag:h,...!c?{isDisabled:!0,tooltip:a.formatMessage({defaultMessage:"This feature has been disabled by your administrator.",id:"Jpvq2WYysx"})}:!r?p:null}:{key:"webSearch",type:"switch",label:a.formatMessage({defaultMessage:"Web search",id:"x0W7xxxEcv"}),icon:(0,s.jsx)(x.qzq,{size:16}),isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}}},G=e=>{let{currentModel:t}=e,a=(0,w.A)(),{conversation:n}=(0,T.o)(),l=(0,d.h0)(),i=(0,R.Ob)(),{toggleConversationSetting:o}=(0,S.rX)(),c=(0,_.K6)(),u=(0,r.Wq)()(t,"gsuite_tools"),m=(0,_.$f)(n),{isDriveAuthenticated:x,initDriveAuth:h}=(0,_.cI)({callerIdentifier:L,handleAuthSuccess:()=>{o("enabled_bananagrams",!0)}}),f=z(),g=X("drive_search");if(!c&&!i)return null;let v={key:"driveSearch",icon:(0,s.jsx)(p.ft,{size:16}),label:a.formatMessage({defaultMessage:"{drive} search",id:"nUykp097rV"},{drive:"Drive"})};if(!c&&i&&!l)return{...v,type:"switch",isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}};if(!x)return{...v,type:"button",isExternal:!0,secondaryText:a.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:h,...u?null:f};let y=x&&m;return{...v,type:"switch",isChecked:y,onClick:()=>{o("enabled_bananagrams",!y)},tag:g,...u?null:f}},Y=e=>{let{currentModel:t}=e,a=(0,w.A)(),{conversation:n}=(0,T.o)(),l=(0,d.h0)(),i=(0,R.Ob)(),{toggleConversationSetting:o}=(0,S.rX)(),c=(0,I.Ys)(g.v8.GCAL),u=(0,r.Wq)()(t,"gsuite_tools"),m=(0,I.X0)(g.v8.GCAL,n),{isAuthenticated:x,startAuth:h}=(0,I.ob)(g.v8.GCAL,{callerIdentifier:L,handleAuthSuccess:()=>{o("enabled_foccacia",!0)}}),f=z(),v=X("calendar_search");if(!c&&!i)return null;let y={key:"gcal",label:a.formatMessage({defaultMessage:"Calendar search",id:"b7aUhdL5nd"}),icon:(0,s.jsx)(p.HI,{size:16})};if(!c&&i&&!l)return{...y,type:"switch",isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}};if(!x)return{...y,type:"button",isExternal:!0,secondaryText:a.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:h,...u?null:f};let j=x&&m;return{...y,type:"switch",isChecked:j,onClick:()=>{o("enabled_foccacia",!j)},tag:v,...u?null:f}},H=e=>{let{actions:t,currentModel:a}=e,n=(0,w.A)(),{conversation:l}=(0,T.o)(),i=(0,d.h0)(),o=(0,R.Ob)(),{toggleConversationSetting:c}=(0,S.rX)(),u=(0,I.Ys)(g.v8.GMAIL),m=(0,r.Wq)()(a,"gsuite_tools"),x=(0,I.X0)(g.v8.GMAIL,l),h=z(),f=X("gmail_search"),{isAuthenticated:v}=(0,I.ob)(g.v8.GMAIL,{callerIdentifier:L,handleAuthSuccess:()=>{c("enabled_sourdough",!0)}});if(!u&&!o)return null;let y={key:"gmail",label:n.formatMessage({defaultMessage:"Gmail search",id:"v0qteoUCm+"}),icon:(0,s.jsx)(p.kw,{size:16})};if(!u&&o&&!i)return{...y,type:"switch",isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}};if(!v)return{...y,type:"button",isExternal:!0,secondaryText:n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:()=>{t.openGmailAuthModal()},...m?null:h};let j=v&&x;return{...y,type:"switch",isChecked:j,onClick:()=>{c("enabled_sourdough",!j)},tag:f,...m?null:h}},V=e=>{let{actions:t}=e,a=(0,w.A)(),{personalizedStyle:n}=(0,T.o)(),{personalizedStyleOptions:l}=(0,D.p)();return[...l.map(e=>{let a=(null==n?void 0:n.key)===e.key;return{key:e.key,type:"option",label:"default"===e.type&&e.nameKey?(0,s.jsx)(m.X5,{id:e.nameKey}):e.name,icon:(0,s.jsx)(x.P_O,{size:16}),onClick:()=>{a?t.onStyleChange("Default"):t.onStyleChange(e.key)},isChecked:a}}),{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,s.jsx)(x.OMN,{size:16}),label:a.formatMessage({defaultMessage:"Create & edit styles",id:"cY+Fgc8HvE"}),onClick:t.openStyleModal,nonSearchable:!0}]},B=e=>{let{actions:t}=e,a=(0,w.A)(),n=(0,R.Hd)(),{personalizedStyle:l}=(0,T.o)(),i=V({actions:t}),r=a.formatMessage({defaultMessage:"Use style",id:"f7VY0ldE+0"});return{key:v.xd.STYLES,type:"optionGroup",icon:(0,s.jsx)(x.P_O,{size:16}),label:r,secondaryText:(null==l?void 0:l.isDefault)||null==l?void 0:l.name,children:[...n?[]:[{type:"back",key:"styles-back",label:r}],...i],indicatorActive:l&&"Default"!==l.key}},K=e=>{let t,{currentModel:a,conversation:n}=e,l=(0,w.A)(),i=(0,S.vP)("paprika_mode"),r=(0,C.J)(),o=(0,C.j)()(a),{toggleConversationSetting:c}=(0,S.rX)(),{value:u}=(0,f.fS)("model_selector_enabled"),{data:m}=(0,M.EY)(),p=(0,d.h0)(),h=(0,j.useLayer)("trials_freemium"),g=z(),y=(0,R.Ob)();(0,b.useEffect)(()=>{let e=!p,t=h.get("free_thinking",!1),a=e&&t&&(null==m?void 0:m.remaining)===0,s=!n||0===n.messagesSoFar;a&&i&&!s&&c("paprika_mode",null)},[null==m?void 0:m.remaining,p,h,i,c,n]);let k=h.get("free_thinking",!1),A=r&&(u||k&&!p);if(!r||!u&&!k&&!y)return null;let _=l.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"}),N=!p,I=h.get("free_thinking",!1),E=N&&I&&(null==m?void 0:m.remaining)===0,T=!E&&!!i;if(N&&I&&m&&void 0!==m.remaining&&m.resets_at){let e=new Date(1e3*m.resets_at),a=l.formatDate(e,{month:"short",day:"numeric"});t=l.formatMessage({defaultMessage:"{remaining} remaining until {date}",id:"httnsxXSeU"},{remaining:m.remaining,date:a})}let D={key:v.xd.EXTENDED_THINKING,type:"switch",label:_,icon:(0,s.jsx)(x.Sw4,{size:16}),isChecked:T,indicatorActive:T,...t&&{subtitle:t},...E&&{isDisabled:!0,tag:"upgrade",rateLimitReached:!0,onClick:()=>{window.location.href="/upgrade"}}};return A||!y||p?o?{...D,...E?{}:{onClick:()=>{c("paprika_mode",i?null:"extended")},tooltip:l.formatMessage({defaultMessage:"Allow Claude to think out loud for longer for trickier questions and challenges.",id:"bbgQqH7Grg"}),tooltipImage:{src:"/images/feature-preview/extended-thinking.png",width:200,height:108}}}:{...D,...g}:{...D,isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}}},W=e=>{let{showConnectAction:t,mcpToolsSetting:a,toggleMcpToolEnabled:i,remoteOnly:r}=e,o=(0,w.A)(),{servers:d}=(0,N.gt)(),c=(0,N.QD)();return d.filter(e=>(!!e.isConnected||!!e.isAuthless||!!e.isLoading||!!t)&&(!r||"remote"===e.type)).map(e=>{let t={key:e.uuid,label:e.name,icon:(0,s.jsx)(l.d,{url:e.url,fallbackSvg:(0,s.jsx)(n.B,{letter:e.name,size:16}),size:16})};if(!e.isConnected&&!e.isAuthless&&!e.isLoading)return{...t,type:"button",isExternal:!0,secondaryText:o.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:()=>c({uuid:e.uuid,url:e.url})};let r=e.tools.map(t=>{let l=t.enabledKey,r=!1!==a[l];return{key:l,type:"switch",label:t.name,icon:(0,s.jsx)(n.B,{letter:t.name,size:16}),isChecked:r,onClick:()=>{i(l,!r,e.url)}}}),d=r.filter(e=>"switch"===e.type&&e.isChecked).length,u=d>0;return r.length>1?r.unshift({key:"select-all",type:"switch",label:u?o.formatMessage({defaultMessage:"Disable all tools",id:"8A9N39nihk"}):o.formatMessage({defaultMessage:"Enable all tools",id:"x4/g36jIjW"}),icon:(0,s.jsx)(n.p,{letter:e.tools[0].name,size:16}),onClick:()=>{i(e.tools.map(e=>e.enabledKey),!u,e.url)},isChecked:u,skipCloseOnClick:!0,nonSearchable:!0},{key:"divider1",type:"divider",label:""}):0===r.length&&r.push({key:"empty",type:"button",label:o.formatMessage({defaultMessage:"No tools available",id:"+XSkrzcF/0"}),icon:(0,s.jsx)(x.k0E,{size:16}),onClick:()=>void 0,isDisabled:!0}),{...t,type:"toggleGroup",enabledCount:d,children:r}})},J=()=>{var e;let t=null!=(e=(0,S.vP)("enabled_mcp_tools"))?e:{},{toggleMcpToolEnabled:a}=(0,N.es)();return W({showConnectAction:!0,mcpToolsSetting:t,toggleMcpToolEnabled:a})},q=()=>{var e;let{servers:t}=(0,N.gt)(),a=(0,b.useMemo)(()=>t.filter(e=>"remote"===e.type),[t]),s=null!=(e=(0,S.vP)("enabled_mcp_tools"))?e:{},[n,l]=(0,b.useState)(()=>{let e=new Set(a.map(e=>e.uuid));return Object.fromEntries(Object.entries(s).filter(t=>{let[a]=t,s=a.split(":")[0];return e.has(s)}))});return{menuOptions:W({showConnectAction:!1,mcpToolsSetting:n,toggleMcpToolEnabled:function(e,t){l(a=>({...a,...Array.isArray(e)?Object.fromEntries(e.map(e=>[e,t])):{[e]:t}}))},remoteOnly:!0}),getEnabledRemoteTools:()=>{let e=[];for(let t of a)for(let a of t.tools)!1!==n[a.enabledKey]&&e.push({tool_name:a.name,server_uuid:t.uuid});return e}}},X=e=>(0,j.useDynamicConfig)("claude_ai_beta_tools").get("beta_tools",[]).includes(e)?"beta":void 0,$=()=>{(0,O.f)(),(0,S.vP)("enabled_monkeys_in_a_barrel");let{prompt:e,setPrompt:t}=(0,T.o)();return Q(a=>{let s="Hey Claude - please look at the skill located at ".concat(a," and use it.");t(e?"".concat(e,"\n\n").concat(s):s,{forceUpdateTiptap:!0})}),null},Z=()=>{var e;let t=(0,O.f)();(0,w.A)();let{addSuccess:a}=(0,c.Y)(),{activeModelOptions:n}=(0,r.A9)(),l=!!(0,S.vP)("enabled_monkeys_in_a_barrel"),{toggleConversationSetting:i,batchToggleConversationSettings:d}=(0,S.rX)(),{setStickyModelPreference:m}=(0,o.F)(),{conversation:p,setModel:f,model:g}=(0,T.o)(),[,v]=(0,u.V)(h.L.MONKEYS_IN_A_BARREL,null);return(p&&p.messagesSoFar,null==(e=n.find(e=>e.model.includes("opus")))||e.model,(0,b.useRef)(!1),t&&l)?{key:"monkeys_in_a_barrel",type:"switch",label:"Disable preview feature",icon:(0,s.jsx)(x.N5l,{size:16}),isChecked:l,indicatorActive:l,onClick:()=>{l||v(!0),i("enabled_monkeys_in_a_barrel",!l)}}:null},Q=e=>{let{conversation:t}=(0,T.o)(),{skills:a,isLoading:s,error:n}=function(e){let{activeOrganization:t}=(0,d.YL)(),a=null==t?void 0:t.uuid,[s,n]=(0,b.useState)([]),[l,i]=(0,b.useState)(!0),[r,o]=(0,b.useState)(null);return(0,b.useEffect)(()=>{if(!a)return void i(!1);(async()=>{try{i(!0),o(null);let t=await A({organizationUuid:a,conversationUuid:e,filePath:"/mnt/skills/all_skills.json"}),s=await t.json();if(!Array.isArray(s))throw Error("Invalid skills data format: expected an array");n(s)}catch(e){o(e instanceof Error?e:Error("Unknown error fetching skills")),n([])}finally{i(!1)}})()},[a,e]),{skills:s,isLoading:l,error:r}}(null==t?void 0:t.id),l=(0,w.A)();return s?[{key:"loading",type:"button",label:l.formatMessage({defaultMessage:"Loading skills...",id:"PCkRYF7lFM"}),isDisabled:!0}]:n?[{key:"error",type:"button",label:l.formatMessage({defaultMessage:"Failed to load skills",id:"zshJowR8s2"}),isDisabled:!0}]:a.map(t=>({key:"skill-".concat(t.name),type:"button",label:t.name,subtitle:t.description,onClick:()=>{e(t.main_instructions)},tooltip:"".concat(t.description)}))}},20434:(e,t,a)=>{a.d(t,{c:()=>s});var s=function(e){return e[e.HIGH=30]="HIGH",e[e.MEDIUM=20]="MEDIUM",e[e.LOW=10]="LOW",e[e.NONE=0]="NONE",e}({})},25931:(e,t,a)=>{a.d(t,{d:()=>p});var s=a(42977),n=a(54568),l=a(9537),i=a(15046),r=a(90510),o=a(41417),d=a(62942),c=a(46760),u=a(62971);function m(){let e=(0,s._)(["\n  text-text-400\n  text-sm\n  font-medium\n"]);return m=function(){return e},e}function x(){let e=(0,s._)(["\n  text-xs\n  font-normal\n"]);return x=function(){return e},e}let p=e=>{let{category:t,setCategory:a,notes:s,setNotes:r,reporterEmail:m,setReporterEmail:x,reporterName:p,setReporterName:g,optOutOfTraining:v,setOptOutOfTraining:y,onSubmit:j,onClose:b,formLink:w="https://docs.google.com/forms/d/e/1FAIpQLSeO9Hzkyf_hQ2fYkfP_cqAcJG5kdlkg1wF4drQEFK9Z6db7jg/viewform",additionalFields:M}=e,k=(0,c.A)(),A=(0,d.useRouter)(),_=(()=>{let e=(0,c.A)();return{COPYRIGHT_INFRINGEMENT:e.formatMessage({defaultMessage:"Copyright infringement",id:"KBxpgB8JHb"}),TRADEMARK_INFRINGEMENT:e.formatMessage({defaultMessage:"Trademark infringement",id:"vYjeaNdXif"}),CHILD_SAFETY:e.formatMessage({defaultMessage:"Child safety/sexual abuse",id:"ddXREI8PNV"}),FRAUD:e.formatMessage({defaultMessage:"Fraud",id:"YoXOdinNC1"}),SEXUALLY_EXPLICIT_CONTENT:e.formatMessage({defaultMessage:"Sexually Explicit content",id:"D0NxeIKdoR"}),VIOLENCE_AND_HATE:e.formatMessage({defaultMessage:"Violence and/or hate speech",id:"vyV1zGTEEH"}),ILLEGAL_GOODS:e.formatMessage({defaultMessage:"Illegal goods",id:"13OdRQYanm"}),COURT_ORDER:e.formatMessage({defaultMessage:"Court order",id:"2mmEfFQIze"}),PRIVATE_OR_CONFIDENTIAL_INFORMATION:e.formatMessage({defaultMessage:"Private/confidential information",id:"qndjDTg0gE"}),DEFAMATION:e.formatMessage({defaultMessage:"Defamation",id:"h9Y5N1xs5X"}),OTHER_ILLEGAL:e.formatMessage({defaultMessage:"Other illegal or unlawful content",id:"Bjp5vOloME"}),VIOLATION_OF_TERMS:e.formatMessage({defaultMessage:"Violation of terms or usage policy",id:"8Aa/HbeJSY"})}})(),C=null;return"COPYRIGHT_INFRINGEMENT"===t||"TRADEMARK_INFRINGEMENT"===t||"PRIVATE_OR_CONFIDENTIAL_INFORMATION"===t||"COURT_ORDER"===t?C=(0,n.jsx)("div",{className:"text-text-300 border-0.5 border-border-300 rounded-lg p-12 text-sm",children:(0,n.jsx)(u.A,{defaultMessage:"Please use this <link>form</link> to report copyright infringement.",id:"6Ovg0gmxY3",values:{link:e=>(0,n.jsx)("a",{href:w,target:"_blank",className:"underline",children:e})}})}):t&&(C=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h,{htmlFor:"reporter-name",children:(0,n.jsx)(u.A,{defaultMessage:"Your name",id:"vlKhIlKczK"})}),(0,n.jsx)(l.ks,{id:"reporter-name",value:p,onChange:e=>g(e.target.value),placeholder:k.formatMessage({defaultMessage:"Optional",id:"InWqysQtIQ"})}),M,(0,n.jsxs)(h,{htmlFor:"reporter-email",children:[(0,n.jsx)(u.A,{defaultMessage:"Your email",id:"nONnTwYJzw"}),(0,n.jsx)(f,{children:(0,n.jsx)(u.A,{defaultMessage:"If provided, we may contact you for additional information or updates on this report",id:"76+sVeXWuh"})})]}),(0,n.jsx)(l.ks,{id:"reporter-email",value:m,onChange:e=>x(e.target.value),placeholder:k.formatMessage({defaultMessage:"Optional",id:"InWqysQtIQ"})}),(0,n.jsxs)(h,{htmlFor:"notes",children:[(0,n.jsx)(u.A,{defaultMessage:"Additional information",id:"gh/lBJ3ybG"}),(0,n.jsxs)(f,{className:"flex flex-col gap-1",children:[(0,n.jsx)("div",{children:(0,n.jsx)(u.A,{defaultMessage:"Please provide any additional information to help us understand your request.",id:"iqT0iuZphp"})}),(0,n.jsx)("div",{children:(0,n.jsx)(u.A,{defaultMessage:"If you are reporting the content as illegal/unlawful, please describe in detail why you believe the identified content is illegal/unlawful, citing specific provisions of law wherever possible.",id:"FtDimnJZ6A"})}),(0,n.jsx)("div",{children:(0,n.jsx)(u.A,{defaultMessage:"If you are reporting the content as violating our policies (including our terms or Usage Policy), please describe in detail why you believe the identified content is in violation of our policies, with specific citations to our policies wherever possible.",id:"4XdZthEtcv"})})]})]}),(0,n.jsx)(l.fs,{id:"notes",value:s,onChange:e=>r(e.target.value),placeholder:k.formatMessage({defaultMessage:"Optional",id:"InWqysQtIQ"})}),(0,n.jsxs)(h,{children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(u.A,{defaultMessage:"Opt out of training on this report",id:"mREcB0MAuE"}),(0,n.jsx)(i.j,{checked:v,onChange:()=>y(!v)})]}),(0,n.jsx)(f,{children:(0,n.jsx)(u.A,{defaultMessage:"We value user reports to uphold our platform’s integrity and improve our ability to enforce our Usage Policy. Unless you opt out, reports may be used to train models for use by our Trust & Safety team, consistent with Anthropic’s safety mission. Opt out of this use by changing the toggle above.",id:"2IiG1AGCna"})})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,n.jsx)(o.$,{variant:"secondary",onClick:b,children:(0,n.jsx)(u.A,{defaultMessage:"Close",id:"rbrahOGMC3"})}),(0,n.jsx)(o.$,{onClick:()=>{j(),A.push("/reported")},variant:"primary",children:(0,n.jsx)(u.A,{defaultMessage:"Report",id:"x5Tz6MZH82"})})]})]})),(0,n.jsxs)("div",{className:"bg-bg-200 flex w-full flex-col gap-2 pt-6",children:[(0,n.jsx)(h,{htmlFor:"report-reason-dropdown",children:(0,n.jsx)(u.A,{defaultMessage:"Why are you reporting this?",id:"0nCKXihfO0"})}),(0,n.jsxs)(l.l6,{id:"report-reason-dropdown",value:null!=t?t:"select-report-reason",onChange:e=>a(e.target.value),children:[(0,n.jsx)("option",{value:"select-report-reason",disabled:!0,children:(0,n.jsx)(u.A,{defaultMessage:"Select report reason",id:"bk8tuJl/tJ"})}),Object.entries(_).map(e=>{let[t,a]=e;return(0,n.jsx)("option",{value:t,children:a},t)})]}),C]})},h=r.J.label(m()),f=r.J.div(x())},33562:(e,t,a)=>{async function s(e){let t,a="CaptureController"in window?new CaptureController:null;null==a||a.setFocusBehavior("no-focus-change");try{t=await navigator.mediaDevices.getDisplayMedia({video:!0,controller:a})}catch(e){if(e instanceof DOMException&&"NotAllowedError"===e.name)return null;throw e}let s=document.createElement("video");s.srcObject=t,await new Promise((e,t)=>{s.onloadedmetadata=()=>{s.play().then(e,t)}});let n=document.createElement("canvas");if(e){let t=Math.min(e.width/Math.min(s.videoWidth,e.width),e.height/Math.min(s.videoHeight,e.height));n.width=s.videoWidth*t,n.height=s.videoHeight*t}else n.width=s.videoWidth,n.height=s.videoHeight;let l=n.getContext("2d");if(!l)throw Error("Could not create 2D context");l.drawImage(s,0,0,n.width,n.height);let i=n.toDataURL("image/png");return t.getTracks().forEach(e=>e.stop()),{imageDataUrl:i}}a.d(t,{U_:()=>b,pi:()=>k,$V:()=>w,Cn:()=>y});var n=a(98518),l=a(51121),i=a(90517),r=a(77101),o=a(70825),d=a(46760),c=a(67455),u=a(85717),m=a(71436),x=a(57383),p=a(45727),h=a(80047),f=a(49194),g=a(31102),v=a(34211);let y=e=>{let{setMcpDirectoryModalIsOpen:t,setStyleModalOpenWithScreen:a,setCreateProjectModalIsOpen:s,setGithubModalIsOpen:n,setGmailAuthModalIsOpen:l,setCreatePromptArgumentModalIsOpen:r}=e,o=M(),d=k(),c=w(),x=(0,v.y)(),{openFeaturePreviewModal:p}=(0,h.go)(),{checkIsGithubAuthenticated:f,initGithubAuth:g}=(0,m.nB)(),{initDriveAuth:y}=(0,u.cI)();return{onAddScreenshot:()=>{o()},openGithubModal:()=>{f().then(e=>{if(!e)return void g();n(!0)})},openGmailAuthModal:()=>{l(!0)},openMcpDirectoryModal:()=>{t(!0)},initDriveAuth:y,createDriveSyncSource:j(),onStyleChange:e=>{d(e)},openStyleModal:()=>{a(i.I.LIST)},onSelectProject:c,onCreateProject:e=>{s({isOpen:!0,moveAttachments:e})},onSelectBeamChat:x,openFeaturePreviewModal:p,onEnterPromptArguments:(e,t,a)=>{r({isOpen:!0,prompt:e,serverUuid:t,client:a})}}},j=()=>{let{addError:e}=(0,l.Y)(),{setIsUploadingDriveSync:t,setSyncSourceUuids:a}=(0,x.o)(),{mutate:s}=(0,c.EF)({onMutate:()=>{t(!0)},onSuccess:e=>{t(!1),a(t=>[...t,e.uuid])},onError:a=>{t(!1),e((0,g.J)(a))},meta:{noToast:!0}});return e=>s({sync_source_type:r.v8.GDRIVE,sync_source_config:{uri:e}})},b=e=>{var t;null==(t=document.getElementById("chat-input-file-upload-".concat(e)))||t.click()},w=()=>{let{projectUuid:e,setProjectUuid:t}=(0,x.o)();return a=>{e===a?t(void 0):t(a)}},M=()=>{let{addError:e}=(0,l.Y)(),t=(0,d.A)(),{handleUpload:a}=(0,x.o)();return async()=>{let n=null;try{n=await s({width:1568,height:1568})}catch(a){(0,o.Cp)(a),e(t.formatMessage({defaultMessage:"Could not capture screen",id:"GT8HkzCHoM"}))}if(!n)return;let l=new File([await fetch(n.imageDataUrl).then(e=>e.blob())],"screenshot.png",{type:"image/png"});await a([l])}},k=()=>{let{setPersonalizedStyle:e}=(0,x.o)(),t=(0,n.st)(),{personalizedStyleOptions:a,setStoredStyle:s}=(0,p.p)();return n=>{let l=a.find(e=>e.key===n);if(!l)return;e(l);let i=(0,f.X)(l);s({styleKey:i,timestamp:new Date}),t.track({event_key:"styles.selected",style_key:i})}}},34211:(e,t,a)=>{a.d(t,{f:()=>l,y:()=>n});var s=a(57383);let n=()=>{let{beamChatUuid:e,setBeamChatUuid:t,isNewBeamChat:a,setIsNewBeamChat:n,prompt:l,setPrompt:i,promptInputRef:r}=(0,s.o)();return s=>{a&&!s&&n(!1),e===s?t(void 0):(t(s),l.length>0&&"@"===l[l.length-1]&&i(l.slice(0,-1)),setTimeout(()=>{var e;null==(e=r.current)||e.focus()},250))}},l=()=>{let{setIsNewBeamChat:e}=(0,s.o)();return()=>{e(!0)}}},35368:(e,t,a)=>{a.d(t,{A6:()=>o,Wi:()=>d});var s=a(75006),n=a(27062),l=a(85544);let i=[],r=[];function o(){let e=d(),t=(0,n.T9)("frontend_fallback_paprika_config","modes",r,c);return e.length>0?e:t}function d(){return(0,n.T9)("paprika_config","modes",i,c)}let c=s.z.array(s.z.object({id:s.z.string(),title:s.z.string(),description:s.z.string(),description_key:s.z.string().optional(),paprika_mode_value:l.T4.optional()}))},35747:(e,t,a)=>{a.d(t,{J:()=>d,j:()=>o});var s=a(85644),n=a(55554),l=a(85544),i=a(35368),r=a(21036);let o=()=>{let{allModelOptions:e}=(0,s.A9)();return t=>{var a;let s=e.find(e=>e.model===t);return!!(null==s||null==(a=s.paprika_modes)?void 0:a.includes("extended"))}},d=()=>{let e=(0,i.A6)(),{selectedTier:t,isTierSelectorEnabled:a,shouldOverrideFeatureAccess:s}=(0,n.t)(),o=(0,r.useLayer)("trials_freemium");return a&&s&&t?t===l.d7.PRO||t===l.d7.MAX||t===l.d7.ENTERPRISE||t===l.d7.FREE&&o.get("free_thinking",!1):!!e.length}},36208:(e,t,a)=>{a.d(t,{So:()=>i,vv:()=>s,xs:()=>n});let s=function(e,t){let{preferWholeNumber:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=Math.round(e);let s={minimumFractionDigits:2,maximumFractionDigits:2};a&&e/100%1==0&&(s.minimumFractionDigits=0,s.maximumFractionDigits=0);let n=navigator.languages&&navigator.languages.length?navigator.languages:navigator.language?navigator.language:"en-US",l="string"==typeof n?n:n[0];return(["SGD","AUD","NZD"].includes(t)||"USD"===t&&"en-US"!==l)&&(s.currencyDisplay="code"),new Intl.NumberFormat(n||void 0,{style:"currency",currency:t,...s}).format(e/100)};function n(e){let{amount:t,currency:a,preferWholeNumber:n}=e;return s(t,a,{preferWholeNumber:n})}let l={aud:{showIncluded:!0,taxLabel:"GST"},brl:{showIncluded:!1,taxLabel:null},cad:{showIncluded:!1,taxLabel:null},eur:{showIncluded:!1,taxLabel:"VAT"},gbp:{showIncluded:!0,taxLabel:"VAT"},nzd:{showIncluded:!0,taxLabel:"VAT"},sgd:{showIncluded:!0,taxLabel:"GST"},usd:{showIncluded:!1,taxLabel:null}};function i(e){var t;return null!=(t=l[e.toLowerCase()])?t:l.usd}},37058:(e,t,a)=>{a.d(t,{U:()=>D});var s=a(54568),n=a(98518),l=a(1761),i=a(41417),r=a(56370),o=a(27062),d=a(29638),c=a(7620),u=a(46760),m=a(62971),x=a(81527),p=a(51121),h=a(37076);function f(e){let{isOpen:t,onClose:a,project:n}=e,{addError:l}=(0,p.Y)(),r=(0,u.A)(),{mutateAsync:o}=(0,x.sS)(n.uuid),d=async()=>{try{await o({is_archived:!0}),a()}catch(e){l(r.formatMessage({defaultMessage:"Could not archive",id:"3O1N877xLt"}))}};return(0,s.jsxs)(h.aF,{isOpen:t,onClose:a,modalSize:"md",children:[(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)("h2",{className:"font-xl-bold",children:(0,s.jsx)(m.A,{defaultMessage:"Archive project",id:"sxTTUDY6HD"})})}),(0,s.jsx)("div",{className:"mb-6 mt-3",children:(0,s.jsx)(m.A,{defaultMessage:"Are you sure you want to archive <strong>{projectName}</strong>?",id:"le3xsYo+U6",values:{strong:e=>(0,s.jsx)("strong",{className:"font-medium",children:e}),projectName:n.name}})}),(0,s.jsxs)("div",{className:"mt-2 flex justify-end gap-2",children:[(0,s.jsx)(i.$,{variant:"secondary",onClick:a,children:(0,s.jsx)(m.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,s.jsx)(i.$,{variant:"danger",onClick:()=>{d()},children:(0,s.jsx)(m.A,{defaultMessage:"Yes, archive",id:"wWN1otYIK8"})})]})]})}var g=a(62942);function v(e){let{isOpen:t,onClose:a,project:n}=e,{addError:l}=(0,p.Y)(),r=(0,u.A)(),o=(0,g.usePathname)(),d=(0,g.useRouter)(),{mutateAsync:c}=(0,x.eW)(n.uuid),f=async()=>{try{await c(),a(),o==="/project/".concat(n.uuid)&&d.push("/projects")}catch(e){l(r.formatMessage({defaultMessage:"Could not delete",id:"njF5218LQD"}))}};return(0,s.jsxs)(h.aF,{isOpen:t,onClose:a,modalSize:"md",children:[(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)("h2",{className:"font-xl-bold",children:(0,s.jsx)(m.A,{defaultMessage:"Delete project",id:"f2FD7U33A1"})})}),(0,s.jsx)("div",{className:"mb-6 mt-3",children:(0,s.jsx)(m.A,{defaultMessage:"Are you sure you want to delete <strong>{projectName}</strong>?",id:"8uUtYJ+WwJ",values:{strong:e=>(0,s.jsx)("strong",{className:"font-medium",children:e}),projectName:n.name}})}),(0,s.jsxs)("div",{className:"mt-2 flex justify-end gap-2",children:[(0,s.jsx)(i.$,{variant:"secondary",onClick:a,children:(0,s.jsx)(m.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,s.jsx)(i.$,{variant:"danger",onClick:()=>{f()},children:(0,s.jsx)(m.A,{defaultMessage:"Yes, delete",id:"cqUzl13UxR"})})]})]})}var y=a(9537);function j(e){let{isOpen:t,onClose:a,project:n}=e,[l,r]=(0,c.useState)(n.name),[o,d]=(0,c.useState)(n.description),f=(0,u.A)(),{addError:g}=(0,p.Y)(),{mutateAsync:v}=(0,x.sS)(n.uuid),j=async()=>{try{await v({name:l,description:o}),a()}catch(e){g(f.formatMessage({defaultMessage:"Error updating project, please try again later",id:"eLzspFmHkT"}))}};return(0,s.jsxs)(h.aF,{isOpen:t,onClose:a,modalSize:"md",children:[(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)("h2",{className:"font-xl-bold",children:(0,s.jsx)(m.A,{defaultMessage:"Edit details",id:"BVWzJ5FL/Y"})})}),(0,s.jsxs)("div",{className:"mb-6 mt-3",children:[(0,s.jsx)(y.ks,{className:"mb-4 w-full",label:f.formatMessage({defaultMessage:"Name",id:"HAlOn1ZsuY"}),value:l,onChange:e=>r(e.target.value),required:!0}),(0,s.jsx)(y.fs,{label:f.formatMessage({defaultMessage:"Description",id:"Q8Qw5BZ1VA"}),value:o,onChange:e=>d(e.target.value),minRows:6,required:!0,className:"max-h-60 overflow-auto"})]}),(0,s.jsxs)("div",{className:"mt-2 flex justify-end gap-2",children:[(0,s.jsx)(i.$,{variant:"secondary",onClick:a,children:(0,s.jsx)(m.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,s.jsx)(i.$,{onClick:()=>{j()},children:(0,s.jsx)(m.A,{defaultMessage:"Save",id:"jvo0vs3nF0"})})]})]})}var b=a(42977),w=a(90510),M=a(77101),k=a(41932),A=a(52909),_=a(25931);function C(){let e=(0,b._)(["\n  text-text-400\n  text-sm\n  font-medium\n"]);return C=function(){return e},e}function N(){let e=(0,b._)(["\n  text-xs\n  font-normal\n"]);return N=function(){return e},e}let S=e=>{let{syncSource:t}=e;return t.type===M.v8.GDRIVE?(e=>(0,s.jsx)("option",{value:"sync-".concat(e.uuid),children:e.status.extra||(0,s.jsx)(m.A,{defaultMessage:"Unknown Google Drive document",id:"DjaaH+4Tyz"})},"sync-".concat(e.uuid)))(t):t.type===M.v8.GITHUB?(e=>{let{owner:t,repo:a}=e.config,n="".concat(t,"/").concat(a);return(0,s.jsx)("option",{value:"sync-".concat(e.uuid),children:n},"sync-".concat(e.uuid))})(t):void 0},I=w.J.label(C()),E=w.J.div(N());function T(e){let{isOpen:t,onClose:a,projectUuid:n,organizationUuid:l}=e,[i,r]=(0,c.useState)(),[o,d]=(0,c.useState)(),[u,p]=(0,c.useState)(),[f,g]=(0,c.useState)(),[v,j]=(0,c.useState)(!1),[b,w]=(0,c.useState)(),[M,C]=(0,c.useState)(),[N,T]=(0,c.useState)(),{mutateAsync:D}=(0,x.GQ)(l,n),{data:O}=(0,k.MO)(n,!!n&&t),{data:R}=(0,k.uE)(n,!!n&&t),{data:L}=(0,A.CO)(n,!1,!!n&&t),z=async()=>{await D({category:i||"",notes:o,reporter_name:f,reporter_email:u,opt_out_of_training:v,doc_uuid:b,file_uuid:M,sync_source_uuid:N}),r(void 0),d(void 0),w(void 0),C(void 0),T(void 0),g(void 0),p(void 0),j(!1),a(!0)},P=(O&&O.length>0||R&&R.length>0||L&&L.length>0)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(I,{children:[(0,s.jsx)(m.A,{defaultMessage:"Specific document, file, or source (optional)",id:"axKp3B/R/i"}),(0,s.jsx)(E,{children:(0,s.jsx)(m.A,{defaultMessage:"Select a specific document, file, or sync source in this project to report",id:"UhG56XNcMi"})})]}),(0,s.jsxs)(y.l6,{value:b?"doc-".concat(b):M?"file-".concat(M):N?"sync-".concat(N):"select-item",onChange:e=>{let t=e.target.value;"select-item"===t?(w(void 0),C(void 0),T(void 0)):t.startsWith("doc-")?(w(t.substring(4)),C(void 0),T(void 0)):t.startsWith("file-")?(C(t.substring(5)),w(void 0),T(void 0)):t.startsWith("sync-")&&(T(t.substring(5)),w(void 0),C(void 0))},children:[(0,s.jsx)("option",{value:"select-item",children:(0,s.jsx)(m.A,{defaultMessage:"Select a document, file, or source (optional)",id:"uH9yKzuAxu"})}),O&&O.length>0&&(0,s.jsx)("optgroup",{label:"Documents",children:O.map(e=>(0,s.jsx)("option",{value:"doc-".concat(e.uuid),children:e.file_name},"doc-".concat(e.uuid)))}),R&&R.length>0&&(0,s.jsx)("optgroup",{label:"Files",children:R.map(e=>(0,s.jsx)("option",{value:"file-".concat(e.file_uuid),children:e.file_name},"file-".concat(e.file_uuid)))}),L&&L.length>0&&(0,s.jsx)("optgroup",{label:"Sync Sources",children:L.map(e=>(0,s.jsx)(S,{syncSource:e},"syncs-".concat(e.uuid)))})]})]});return(0,s.jsx)(h.aF,{modalSize:"md",isOpen:t,onClose:a,hasCloseButton:!0,title:(0,s.jsx)("span",{className:"font-claude-response font-medium",children:(0,s.jsx)(m.A,{defaultMessage:"Report project",id:"i+TY5eOB+b"})}),children:(0,s.jsx)(_.d,{category:i,setCategory:r,notes:o,setNotes:d,reporterEmail:u,setReporterEmail:p,reporterName:f,setReporterName:g,optOutOfTraining:v,setOptOutOfTraining:j,onSubmit:z,onClose:()=>a(!1),additionalFields:P})})}let D=e=>{let{star:t=!0,project:a,iconSize:p=16,buttonSize:h="icon_sm",open:g,onOpenChange:y}=e,b=(0,u.A)(),{track:w}=(0,n.st)(),[M,k]=(0,c.useState)(!1),[A,_]=(0,c.useState)(!1),[C,N]=(0,c.useState)(!1),[S,I]=(0,c.useState)(!1),{mutate:E}=(0,x.sS)(a.uuid),D=null!==a.archived_at,{value:O}=(0,o.fS)("project_deletion_button"),{value:R}=(0,o.fS)("claude_ai_constellation"),{account:L,activeOrganization:z}=(0,l.YL)(),P=(null==a?void 0:a.creator.uuid)===(null==L?void 0:L.uuid);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.ms,{align:"end",open:g,onOpenChange:y,trigger:(0,s.jsx)(i.$,{variant:"ghost",className:"active:!scale-100 pointer-events-auto",size:h,onClick:e=>{e.stopPropagation(),e.preventDefault()},onMouseDown:e=>{e.stopPropagation(),e.preventDefault()},"aria-label":a.name?b.formatMessage({defaultMessage:"More options for {label}",id:"rKQPgfPvWS"},{label:a.name}):b.formatMessage({defaultMessage:"More options",id:"IzCVhGdYVc"}),children:(0,s.jsx)(d.H,{weight:"bold",size:p})}),unstyledTrigger:!0,children:(0,s.jsxs)("div",{children:[t&&(0,s.jsx)(r.tJ,{"data-testid":"star-project-trigger",onSelect:()=>{let e=!a.is_starred;E({is_starred:e}),w({event_key:e?"claudeai.projects.starred":"claudeai.projects.unstarred",project_uuid:a.uuid,project_name:a.name})},children:a.is_starred?(0,s.jsx)(m.A,{defaultMessage:"Unstar",id:"Y5zRLWgCMP"}):(0,s.jsx)(m.A,{defaultMessage:"Star",id:"VwapsmdMes"})}),P&&(0,s.jsxs)(s.Fragment,{children:[!D&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.tJ,{"data-testid":"rename-project-trigger",onSelect:()=>k(!0),children:(0,s.jsx)(m.A,{defaultMessage:"Edit details",id:"BVWzJ5FL/Y"})}),(0,s.jsx)(r.tJ,{danger:!0,"data-testid":"archive-project-trigger",onSelect:()=>_(!0),children:(0,s.jsx)(m.A,{defaultMessage:"Archive",id:"hrgo+EleAn"})}),O&&(0,s.jsx)(r.tJ,{danger:!0,"data-testid":"delete-project-trigger",onSelect:()=>N(!0),children:(0,s.jsx)(m.A,{defaultMessage:"Delete",id:"K3r6DQW7h+"})})]}),D&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r.tJ,{className:"text-danger-000",onClick:()=>{E({is_archived:!1})},children:(0,s.jsx)(m.A,{defaultMessage:"Unarchive",id:"ftDYZo4V2C"})})})]}),R&&(0,s.jsx)(r.tJ,{className:"text-danger-000",onSelect:()=>I(!0),children:(0,s.jsx)(m.A,{defaultMessage:"Report",id:"x5Tz6MZH82"})})]})}),(0,s.jsx)(j,{isOpen:M,onClose:()=>k(!1),project:a}),(0,s.jsx)(f,{isOpen:A,onClose:()=>_(!1),project:a}),(0,s.jsx)(v,{isOpen:C,onClose:()=>N(!1),project:a}),(0,s.jsx)(T,{isOpen:S,onClose:()=>I(!1),projectUuid:a.uuid,organizationUuid:null==z?void 0:z.uuid})]})}},38524:(e,t,a)=>{a.d(t,{V:()=>aj});var s=a(42977),n=a(54568),l=a(74530),i=a(90510),r=a(22529),o=a(27062),d=a(57646),c=a(32987),u=a(49645),m=a(37463),x=a(7620),p=a(46760),h=a(67455),f=a(53685),g=a(59296),v=a(7409),y=a(7386),j=a(38715);let b=e=>{let{attachments:t,files:a,syncSourceResults:s,onRemoveAttachment:l,onRemoveFile:i,onRemoveSyncSource:r,isUploadingFile:o,isUploadingSync:d}=e;return(0,n.jsxs)("div",{className:"border-border-300/25 border-t-0.5 rounded-b-2xl bg-bg-100 !p-3.5 !m-0 flex flex-row overflow-x-auto gap-3 px-3.5 py-2.5 -my-1",children:[t.map((e,t)=>(0,n.jsx)(v.NM,{file:e,size:"md",onRemoveFile:()=>l(t),isEditable:!0},t)),a.map((e,t)=>(0,n.jsx)(v.NM,{file:e,showWarnings:!0,size:"md",onRemoveFile:()=>i(t),isEditable:!0},e.file_uuid)),(0,n.jsx)(y.NG,{isShown:o}),s.map(e=>{let{syncSource:t,uuid:a}=e;return(0,n.jsx)(j.V,{uuid:a,syncSource:t,onRemove:()=>r(a),isEditable:!0},a)}),(0,n.jsx)(y.NG,{isShown:d})]})};var w=a(57383),M=a(72431),k=a(51291),A=a(42824),_=a(66860),C=a(51121),N=a(77101),S=a(62971),I=a(85717),E=a(48676),T=a(31102),D=a(62628),O=a(77186),R=a(1761),L=a(70825),z=a(70011),P=a(4708),U=a(23661),F=a(94390),G=a(75006),Y=a(85644),H=a(56147);let V=e=>{var t,a;let{model:s,projectUuid:l}=e,{allModelOptions:i}=(0,Y.A9)(),r=(0,H.ED)(l),o=(0,H.Pb)(l),d=null!=(a=null==(t=i.find(e=>e.model===s))?void 0:t.slow_kb_warning_threshold)?a:155e3,c=!o&&(null!=r?r:0)>d?(0,n.jsx)("div",{className:"max-md:hidden",children:(0,n.jsx)(S.A,{defaultMessage:"Large knowledge may slow responses",id:"d6mr4c6d+8"})}):void 0;return(0,n.jsx)("div",{className:"text-text-400 text-xs ml-2",children:null!=c?c:void 0})};var B=a(9896),K=a(55554),W=a(41417),J=a(56370),q=a(29242),X=a(91961),$=a(85544),Z=a(60265),Q=a(99272),ee=a(62094),et=a(21036),ea=a(61906),es=a(62757),en=a(35747),el=a(45078),ei=a(85201);let er=e=>{let{remaining:t,total:a}=e,s="".concat(t,"/").concat(a);return(0,n.jsx)("span",{className:"inline-flex items-center text-accent-secondary-000 bg-bg-000 border-0.5 border-border-200 rounded-full px-1.5 py-0.25",children:(0,n.jsx)("span",{className:"text-xs",children:s})})};var eo=a(50707),ed=a(49077),ec=a(64979);function eu(){let e=(0,s._)(["\n  uppercase\n  mt-0.3\n  bg-accent-pro-100/10\n  text-accent-pro-000\n  rounded-full\n  px-2\n  ml-2\n  -mr-1\n  border-0.5\n  border-accent-pro-100/10\n  leading-4\n  h-4\n  text-[0.6rem]\n  flex-shrink-0\n"]);return eu=function(){return e},e}function em(){let e=(0,s._)(["\n  border-0.5\n  border-border-300\n  -mr-1\n  ml-2\n  translate-y-px\n  rounded-full\n  px-2\n  py-px\n  text-xs\n  text-text-500\n  tracking-tight\n  group-hover:bg-bg-100\n"]);return em=function(){return e},e}let ex=i.J.div(eu()),ep=i.J.div(em()),eh=(0,n.jsx)(S.A,{defaultMessage:"Upgrade to Claude Pro to use our best and latest models",id:"GFsmqWxmnh"}),ef={model:"missing-model",name:"Legacy Model",description:"",inactive:!0},eg=e=>{var t,a;let s,{model:l,currentModelOption:i,opensInNewChat:o,onSelect:d,hasMultiModalContent:u,tag:m,tooltip:h,onUpgradeClick:f}=e,g=(0,p.A)(),v=(0,x.useMemo)(()=>({"haiku-3-5-description":(0,n.jsx)(S.A,{defaultMessage:"Fastest model for daily tasks",id:"75wJbzj8Tm",description:"A description of the AI model"}),"sonnet-3-7-description":(0,n.jsx)(S.A,{defaultMessage:"Our most intelligent model yet",id:"WW0Apyq96E",description:"A description of the AI model"}),"telescope-cinnamon-lampshade":(0,n.jsx)(r.YX,{id:"telescope_cinnamon_lampshade"}),"origami-glacier-marmalade":(0,n.jsx)(r.YX,{id:"origami_glacier_marmalade"})}),[]),{data:y}=(0,ea.jc)(),j=(0,R.h0)(),b=(0,et.useLayer)("trials_freemium"),w=l.model===(null==i?void 0:i.model),M=(0,ec.t)(l.name,l.model,u),k=!j,A=b.get("free_opus",!1),_="claude-opus-4-20250514"===l.model||"claude-opus-4-20250514-claude-ai-pro"===l.model;if(_&&k&&A&&y&&void 0!==y.remaining&&y.resets_at){let e=new Date(1e3*y.resets_at),t=g.formatDate(e,{month:"short",day:"numeric"});s=g.formatMessage({defaultMessage:"{remaining} remaining until {date}",id:"httnsxXSeU"},{remaining:y.remaining,date:t})}let C=_&&k&&A&&(null==y?void 0:y.remaining)===0,N=C?"Upgrade":m;return(0,n.jsx)(q.m,{tooltipContent:h,side:"right",children:(0,n.jsxs)(J.tJ,{onClick:()=>{w||N||C?("Upgrade"===N||C)&&(null==f||f()):d(l)},className:(0,c.A)("group pr-1 py-1.5",("Upgrade"===N||C)&&"cursor-pointer"),disabled:C&&"Upgrade"!==N,children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"flex-1 text-sm",children:(0,n.jsx)("div",{className:"flex items-center gap-1.5",children:(0,n.jsx)("div",{children:M})})}),N&&!w&&"Upgrade"===N?(0,n.jsx)(eo.M,{as:"button",className:"mt-0.3 ml-2 -mr-1 flex-shrink-0",onClick:e=>{e.stopPropagation(),null==f||f()}}):N&&!w?(0,n.jsx)(ex,{children:N}):null,!w&&o&&!N&&!C&&(0,n.jsx)(ep,{children:(0,n.jsx)(S.A,{defaultMessage:"New chat",id:"ATDyLPIoxz"})})]}),(0,n.jsxs)("div",{className:"text-text-500 pr-4 text-xs mt-1",children:[null!=(a=v[null!=(t=l.description_i18n_key)?t:""])?a:l.description,s&&(0,n.jsx)("div",{className:"mt-0.5",children:s})]})]}),w&&(0,n.jsx)(Z.J,{className:"text-accent-secondary-100 mb-1 mr-1.5",size:16,weight:"bold"})]})})},ev=e=>{let{models:t,currentModelOption:a,opensInNewChat:s,handleModelSelect:l,hasMultiModalContent:i,upsellMode:o}=e,d=(0,x.useMemo)(()=>({"velvet-bicycle-thunderstorm":(0,n.jsx)(r.YX,{id:"velvet_bicycle_thunderstorm"})}),[]),c=(0,ei.Ob)(),u=(0,R.h0)(),m=(0,et.useLayer)("trials_freemium").get("free_opus",!1),p=!u,h=()=>{window.location.href="/upgrade"};return(0,n.jsx)(n.Fragment,{children:t.map(e=>(0,n.jsx)(eg,{model:e,currentModelOption:a,opensInNewChat:s,onSelect:l,hasMultiModalContent:i,tag:o&&e.model!==(null==a?void 0:a.model)&&e.model.startsWith("claude-opus-4")&&(!p||!m)?c?"Upgrade":"PRO":void 0,tooltip:(e=>{var t,s;return o&&e.model!==(null==a?void 0:a.model)?eh:null!=(s=d[null!=(t=e.notice_text_i18n_key)?t:""])?s:e.notice_text})(e),onUpgradeClick:h},e.model))})},ey=e=>{let{selectedModel:t,conversationUUID:a,onSelect:s,placement:l,hasMultiModalContent:i,open:r,onOpenChange:d,isNewConversation:u,hideModelNameLogo:p}=e,h=!u,{allModelOptions:f,mainModels:g,overflowModels:v}=(0,Y.A9)(),y=(0,z.Z3)(a||null),j=null!=t?t:y,b=(0,x.useRef)(null),w=(0,el.vP)("paprika_mode"),M=(0,en.j)(),k=(0,es.G8)(),{toggleConversationSetting:A}=(0,el.rX)(),_=f.find(e=>e.model===j);_||(_=ef);let{value:C}=(0,o.fS)("model_selector_enabled"),N=(0,R.h0)(),{selectedTier:I,shouldOverrideFeatureAccess:E,isTierSelectorEnabled:T}=(0,K.t)(),D=T&&E&&!!I,O=D?I===$.d7.FREE:!C&&!N,L=(0,et.useLayer)("trials_freemium").get("free_opus",!1),{data:P}=(0,ea.jc)(),{setStickyModelPreference:U}=(0,B.F)(),[F,G]=(0,x.useState)(!1),H=("claude-opus-4-20250514"===j||"claude-opus-4-20250514-claude-ai-pro"===j)&&!N&&L&&P&&void 0!==P.remaining&&void 0!==P.limit,V=e=>{let t=!N&&L;(C||D&&"free"!==I||t)&&(w&&!M(e.model)&&A("paprika_mode",null),k(e.model)||A("compass_mode",null),U(e.model),s(e))};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(J.ms,{className:(0,c.A)("!min-w-[17rem] relative"),..."bottom"===l?{side:"top",sideOffset:4}:{side:"bottom",sideOffset:4},align:"end",unstyledTrigger:!0,onCloseAutoFocus:e=>e.preventDefault(),open:r,onOpenChange:e=>{d&&d(e),e||G(!1)},trigger:(0,n.jsx)(m.P.div,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:700,damping:32,mass:.7},className:"overflow-hidden shrink-0 p-1 -m-1",children:(0,n.jsxs)(W.$,{ref:b,variant:"unstyled",size:"unset","data-testid":"model-selector-dropdown",className:(0,c.A)("h-7 border-0.5 text-text-100 ml-1.5 inline-flex items-start gap-[0.175em] rounded-md border-transparent text-sm opacity-80 transition hover:opacity-100 disabled:!opacity-80 hover:bg-bg-100 hover:border-border-400 px-1.5"),children:[(0,n.jsx)(ed.V,{model:_,hasMultiModalContent:i,hideModelNameLogo:p}),H&&(0,n.jsx)(er,{remaining:P.remaining,total:P.limit}),(0,n.jsx)(Q.a,{size:12,className:"text-text-500 shrink-0"})]})}),children:[(0,n.jsx)(ev,{models:g,currentModelOption:_,opensInNewChat:h,handleModelSelect:V,hasMultiModalContent:i,upsellMode:O}),v.length>0&&((0,X.Fr)()?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.DG,{}),(0,n.jsx)("div",{className:"text-xs text-text-500 pt-2 pb-1 px-2",children:(0,n.jsx)(S.A,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,n.jsx)(ev,{models:v,currentModelOption:_,opensInNewChat:h,handleModelSelect:V,hasMultiModalContent:i,upsellMode:O})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.DG,{}),(0,n.jsxs)(J.MS,{children:[(0,n.jsxs)(J.Wn,{className:"pl-2 py-1.5 gap-2",children:[(0,n.jsx)("div",{className:"group-hover:text-text-100  text-sm",children:(0,n.jsx)(S.A,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,n.jsx)(ee.K,{className:"text-text-500 group-hover:text-text-300 mr-1",size:16})]}),(0,n.jsx)(J.cm,{children:(0,n.jsx)(J.FV,{sideOffset:4,children:(0,n.jsx)(ev,{models:v,currentModelOption:_,opensInNewChat:h,handleModelSelect:V,hasMultiModalContent:i,upsellMode:O})})})]})]}))]})})};var ej=a(36881);a(97509);var eb=a(93271),ew=a(43195),eM=a(52080),ek=a(98769),eA=a(48498),e_=a(62942),eC=a(92947),eN=a(5799),eS=a(21103),eI=a(20434),eE=a(12331),eT=a(2881),eD=a(38583);let eO=e=>{let{path:t}=e,a={drive:(0,p.A)().formatMessage({defaultMessage:"Paste a Drive link in the chat to upload it",id:"ZJxjEilF0C"})},s=t&&t in a?a[t]:null;return s?(0,n.jsxs)("div",{className:"h-8 w-full bg-bg-100 border-t-0.5 border-border-300 opacity-80 text-text-500 flex flex-row items-center gap-2.5 px-3 text-[0.8125rem]",children:[(0,n.jsx)(eD.R,{size:14}),s]}):null};var eR=a(73817),eL=a(24871),ez=a(14067);let eP=e=>{let{tooltip:t,text:a,tag:s,showCaretIcon:l,indicatorActive:i=!1,hideIndicatorText:r,canShowDot:o,onDoubleClick:d,menuType:c,menuView:u,inputMenuIsOpen:h,setInputMenuIsOpen:f}=e,g=(0,p.A)(),v=(0,x.useRef)(null),{rootItems:y}=u,j={indicatorActive:i,text:a||"",tooltip:t},b=(0,ei.gB)(),w="tools"===c&&b;if(w){j.tooltip=g.formatMessage({defaultMessage:"Style",id:"7mL9QEUFav"});let e=y.find(e=>"option"===e.type&&e.isChecked);e&&"Default"!==e.key&&(j.indicatorActive=!0,j.text=e.label)}let M=y.filter(e=>{let{indicatorActive:t}=e;return t}).length,k=(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:["plus"===c?(0,n.jsx)(m.P.div,{animate:{rotate:45*!!h},transition:{type:"spring",stiffness:650,damping:32,duration:.1},children:(0,n.jsx)(eL.F,{size:16})}):"research"===c?(0,n.jsx)(ew.isz,{size:16}):w?(0,n.jsx)(ew.P_O,{size:16}):(0,n.jsx)(ez.l,{size:16}),(0,n.jsx)(eU,{isShown:o&&M>0})]}),A="plus"===c?g.formatMessage({defaultMessage:"attachments",id:"whkEDsy4V6",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):"research"===c?g.formatMessage({defaultMessage:"research",id:"PUcnDUZD0/",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):w?g.formatMessage({defaultMessage:"styles",id:"G91kUvt+GD",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):g.formatMessage({defaultMessage:"tools",id:"yd3KUET1r+",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"});return(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(eT.O,{tag:s,showCaretIcon:l,hideIndicatorText:!!r,icon:k,id:"input-".concat(c,"-menu-trigger"),ref:v,onClick:()=>{f(!h)},onKeyDown:e=>{h||"Space"!==e.code&&"ArrowDown"!==e.code||f(!0)},onDoubleClick:d?e=>{e.preventDefault(),null==d||d()}:void 0,"aria-expanded":h,"aria-haspopup":"listbox","aria-controls":"input-menu","data-testid":"input-menu-".concat(c),"aria-label":g.formatMessage({defaultMessage:"Open {menuType} menu",id:"Larie1pvYJ"},{menuType:A}),...j})})},eU=e=>{let{isShown:t}=e;return!!t&&(0,n.jsx)(m.P.div,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},children:(0,n.jsx)("div",{className:"h-1.5 w-1.5 bg-accent-secondary-200 rounded-full mr-0.5"})})};var eF=a(73212),eG=a(38807),eY=a(33562);let eH={forward:{initial:{x:"20%",opacity:0},animate:{x:0,opacity:1}},back:{initial:{x:"-20%",opacity:0},animate:{x:0,opacity:1}},none:{initial:{x:0},animate:{x:0}}},eV=e=>{let{placement:t,canShowDot:a}=e,s=(0,x.useRef)(null),l=(0,p.A)(),i=(0,eG.tl)(),r=(0,eC.AY)(),o=(0,eC.M8)();return(0,n.jsxs)("div",{ref:s,children:[(0,n.jsx)(eJ,{canShowDot:a,placement:t,menuType:"tools",...i,tooltip:l.formatMessage({defaultMessage:"Search and tools",id:"lhFEU+uT6i"})}),(0,n.jsx)(eN.V,{canShowNux:o,anchorRef:s,side:"bottom",text:l.formatMessage({defaultMessage:"Add your everyday tools and apps to get the best out of Claude",id:"olaMSdwPL6"}),id:"research-rmcp-tools-nux-1",nuxItem:{dateAdded:"2025-05-14",priority:eI.c.HIGH,showAfterOthersDismiss:!0}}),(0,n.jsx)(eN.V,{canShowNux:r,anchorRef:s,side:"bottom",text:l.formatMessage({defaultMessage:"MCP is here now! Access integrations in this menu.",id:"NkJar0wFk+"}),id:"mcp-tools-nux-1",nuxItem:{dateAdded:"2025-04-29",priority:eI.c.HIGH,showAfterOthersDismiss:!0}})]})},eB=e=>{let{placement:t,canShowDot:a}=e,s=(0,eG.CH)();return(0,n.jsx)(eJ,{placement:t,menuType:"plus",canShowDot:a,...s})},eK=e=>{let t,{hideIndicatorText:a}=e,s=(0,p.A)(),{conversation:l,model:i,setModel:r}=(0,w.o)(),o=(0,el.vP)("compass_mode"),{toggleConversationSetting:d}=(0,el.rX)(),c=(0,es.g7)(),u=(0,es.BU)(),m=(0,es.Gm)(l),x=(0,z.Z3)((null==l?void 0:l.id)||null),h=(0,es.G8)()(null!=i?i:x),f=(0,es.G8)()(x),g=!l&&!h&&f;if(!c)return null;u?m?h||g||(t=s.formatMessage({defaultMessage:"Select a different model to use this feature",id:"/9vSDy2Wm0"})):t=s.formatMessage({defaultMessage:"Enable a search integration to use research",id:"WyiVeak7w5"}):t=s.formatMessage({defaultMessage:"Your administrator must enable a search tool to use research",id:"CzjOV5rgPZ"});let v=!!t;return(0,n.jsx)(eT.O,{disabled:v,tooltip:t,hideIndicatorText:!!a,icon:(0,n.jsx)(ew.isz,{size:16}),onClick:()=>{v||(g&&r(x),d("compass_mode","advanced"===o?null:"advanced"))},indicatorActive:!v&&"advanced"===o,text:s.formatMessage({defaultMessage:"Research",id:"JEe7dVso7F"}),className:"!shrink-0"})},eW={id:"mcp-add-connectors-nux",nuxItem:{dateAdded:"2025-07-11",priority:eI.c.HIGH,showAfterOthersDismiss:!0}},eJ=e=>{let{text:t,tag:a,showCaretIcon:s,indicatorActive:l,canShowDot:i,hideIndicatorText:r,tooltip:o,placement:d,menuType:p,path:h,menuView:f,highlightedItemKey:g,setHighlightedItemKey:v,handleClickItem:y,inputMenuIsOpen:j,setInputMenuIsOpen:b,inputMenuSearchQuery:w,setInputMenuSearchQuery:M,handleBack:k,animationDirection:A}=e,{currentItems:_}=f,C=(0,eA.L)(()=>{b(!1)},["mouseup","touchend"]),N=(0,x.useRef)(null),I=(0,x.useRef)(null),E=(0,x.useRef)(null),T=(0,x.useRef)(null),[D,O]=(0,x.useState)(void 0),[R,L]=(0,x.useState)("bottom"===d?"top":"bottom"),[z,P]=(0,x.useState)(0),U=(0,e_.useSearchParams)(),{shouldShow:F}=(0,eE.z)(eW.id,eW.nuxItem),G="true"===U.get(eS.HU)&&F&&"tools"===p;(0,x.useEffect)(()=>{G&&(b(!0),E.current&&(E.current.scrollTop=E.current.scrollHeight))},[G,b]),(0,x.useEffect)(()=>{if(!N.current||!I.current)return;let e=N.current.getBoundingClientRect(),{updatedHeightAvailable:t,updatedDropdownSide:a}=eq({placement:d,triggerRectTop:e.top,triggerRectBottom:e.bottom});O(Math.min(432,t)),L(a);let s=I.current.getBoundingClientRect();P(Math.min(0,window.innerWidth-s.right-8))},[d,j]);let Y=(0,ei.Hd)(),H=("plus"===p||"tools"===p)&&Y?(0,n.jsx)(eR.s,{path:h,inputMenuSearchQuery:w,setInputMenuSearchQuery:M,handleBack:k}):null;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"relative shrink-0",onClick:e=>{e.preventDefault()},ref:C,children:[(0,n.jsx)("div",{ref:N,children:(0,n.jsx)(eP,{tag:a,tooltip:o,text:t,showCaretIcon:s,indicatorActive:l,hideIndicatorText:r,canShowDot:i,menuType:p,menuView:f,inputMenuIsOpen:j,setInputMenuIsOpen:b,onDoubleClick:"plus"===p?()=>(0,eY.U_)(d):void 0})}),(0,n.jsx)("div",{ref:I,className:(0,c.A)("w-[20rem] absolute max-w-[calc(100vw-16px)]","top"===R?"bottom-10":"top-10",j?"block":"hidden"),children:(0,n.jsx)(u.N,{children:j&&(0,n.jsx)(m.P.div,{ref:E,initial:{opacity:0,scale:.95,y:"top"===R?8:-8,x:-8},animate:{opacity:1,scale:1,y:0,x:0},exit:{opacity:0,scale:.95,y:"top"===R?8:-8,x:-8},transition:{type:"spring",stiffness:650,damping:23,mass:.6,height:{ease:"easeInOut"}},className:(0,c.A)("relative w-full will-change-transform h-auto overflow-y-auto overscroll-auto flex z-dropdown bg-bg-000 rounded-lg overflow-hidden border-border-300 border-0.5 shadow-diffused shadow-[hsl(var(--always-black)/6%)]","top"===R?"flex-col-reverse":"flex-col"),onMouseEnter:()=>v(null),style:{maxHeight:D?"".concat(D,"px"):void 0,left:z},onClick:e=>{e.stopPropagation(),(0,eF.l)()},children:(0,n.jsxs)(eM.D,{duration:100,className:(0,c.A)("flex flex-col min-h-0 w-full !ease-out","top"===R?"justify-end":"justify-start"),children:[(0,n.jsxs)("div",{className:"p-1.5 flex flex-col",children:["bottom"===R&&H,(0,n.jsx)(m.P.div,{variants:eH[A],initial:"initial",animate:"animate",className:"flex flex-col",transition:{x:{duration:.15,ease:ek.A.outCirc},opacity:{duration:.25,ease:"easeInOut"}},children:("top"===R?[..._].reverse():_).filter(e=>{let{menuItemHidden:t}=e;return!t}).map(e=>"addIntegrations"===e.key?(0,n.jsx)("div",{ref:T,children:(0,n.jsx)(eb.$,{item:e,onClick:()=>y(e),isHighlighted:g===e.key})},e.key):(0,n.jsx)(eb.$,{item:e,onClick:()=>y(e),isHighlighted:g===e.key},e.key))},null!=h?h:"root"),"top"===R&&H]}),(0,n.jsx)(eO,{path:h})]})})})})]}),(0,n.jsx)(eN.V,{canShowNux:G&&!!T.current&&j,anchorRef:T,side:"right",text:(0,n.jsx)(S.A,{defaultMessage:"Find and add more of your favorite tools in <span>Add connectors</span>.",id:"2icgWBPsqj",values:{span:e=>(0,n.jsx)("span",{className:"font-bold",children:e})}}),...eW})]})},eq=e=>{let{placement:t,triggerRectTop:a,triggerRectBottom:s}=e,n=window.innerHeight-s-8-8;if("bottom"===t){let e=a-76-8;return e<160&&n>e?{updatedDropdownSide:"bottom",updatedHeightAvailable:n}:{updatedDropdownSide:"top",updatedHeightAvailable:e}}{let e=a-8-8;return n<160&&e>n?{updatedDropdownSide:"top",updatedHeightAvailable:e}:{updatedDropdownSide:"bottom",updatedHeightAvailable:n}}};var eX=a(4705),e$=a(98682);let eZ=e=>{let{menuItem:t,handleClick:a,limitInfo:s,...l}=e,{handleClickItem:i}=(0,eG.CH)();if(!t||t.isDisabled||"pro"===t.tag||"new chat"===t.tag||!t.indicatorActive)return null;let{indicatorActive:r}=t,o=!!t.menuItemHidden,d=s?(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[l.icon,(0,n.jsx)(er,{remaining:s.remaining,total:s.total})]}):l.icon;return(0,n.jsx)(eT.O,{onClick:null!=a?a:()=>i(t),indicatorActive:r,disabled:o,showRemoveIcon:!0,...l,icon:d})};a(34211);var eQ=a(1524);let e0=e=>{let{hideIndicatorText:t,hideIndicators:a}=e,s=(0,p.A)();return((0,o.fS)("claudeai_beam").value,a)?null:(0,n.jsx)(e$.o,{children:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2 min-w-0",children:[(0,n.jsx)(e1,{}),(0,n.jsx)(e6,{hideIndicatorText:t}),(0,n.jsx)(e2,{itemKey:$.xd.COMPASS,tooltip:s.formatMessage({defaultMessage:"Research mode",id:"lYf0AUt2RH"})}),(0,n.jsx)(e5,{hideIndicatorText:t}),(0,n.jsx)(e7,{hideIndicatorText:t}),""]})})},e1=()=>{let e=(0,p.A)(),{menuView:{rootItems:t}}=(0,eG.tl)(),a=(0,R.h0)(),s=(0,et.useLayer)("trials_freemium"),{data:l}=(0,ea.EY)(),i=t.find(e=>e.key===$.xd.EXTENDED_THINKING),r=(0,o.P0)("thinking_sticky_default_on","hide_thinking_chat_indicator",!1,o.e_);if(!i||r)return null;let d=s.get("free_thinking",!1),c=!a&&d&&l&&void 0!==l.remaining&&void 0!==l.limit&&i.indicatorActive;return(0,n.jsx)(eZ,{hideIndicatorText:!0,menuItem:i,icon:i.icon,tooltip:e.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"}),limitInfo:c?{remaining:l.remaining,total:l.limit}:null})},e2=e=>{let{itemKey:t,tooltip:a}=e,{menuView:{rootItems:s}}=(0,eG.CH)(),{menuView:{rootItems:l}}=(0,eG.tl)(),i=[...s,...l].find(e=>e.key===t);return i?(0,n.jsx)(eZ,{hideIndicatorText:!0,menuItem:i,icon:i.icon,tooltip:a}):null},e5=e=>{let{hideIndicatorText:t}=e,{menuView:{rootItems:a}}=(0,eG.tl)(),s=(0,eY.pi)(),l=a.find(e=>"styles"===e.key);return l&&"optionGroup"===l.type?(0,n.jsx)(eZ,{hideIndicatorText:t,menuItem:l,icon:(0,n.jsx)(ew.P_O,{size:16}),text:l.secondaryText,buttonClassName:"!shrink",handleClick:()=>s("Default")}):null},e7=e=>{let{hideIndicatorText:t}=e,{menuView:{rootItems:a}}=(0,eG.CH)(),s=(0,eY.$V)(),l=a.find(e=>e.key===$.xd.PROJECTS);return l&&"optionGroup"===l.type?(0,n.jsx)(eZ,{hideIndicatorText:t,menuItem:l,icon:(0,n.jsx)(ew.JtL,{size:16}),text:l.secondaryText,buttonClassName:"!shrink-[2]",handleClick:()=>s(void 0)}):null},e6=e=>{let{hideIndicatorText:t}=e,a=(0,eQ.f)(),{menuView:{rootItems:s}}=(0,eG.tl)(),l=s.find(e=>"monkeys_in_a_barrel"===e.key);return a&&l?(0,n.jsx)(eZ,{buttonClassName:"border-danger-200/70 bg-danger-100/[8%] text-danger-200/90 hover:text-danger-200/90 hover:bg-danger-100/[12%]",hideIndicatorText:!!t,menuItem:l,icon:(0,n.jsx)(eX.i,{size:16}),tooltip:"Disable preview feature"}):null},e4=G.z.object({enabled:G.z.boolean(),system_prompt:G.z.string().optional()}),e3=e=>{let{placement:t,isDisabled:a}=e,s=(0,p.A)(),{value:l}=(0,o.fS)("claudeai_beam");(0,o.iW)("prompt_improver_config",{enabled:!1},e4);let{projectUuid:i,prompt:r,model:d,setModel:c,attachments:u,files:m,syncSourceUuids:h,sendMessage:f,stopSampling:g,conversation:v,isSending:y,isChatSyncing:j,isProjectSyncing:b,isModelSelectorOpen:M,setIsModelSelectorOpen:k,isNewConversation:A,currentCompassTask:_,improvePrompt:C,isImprovingPrompt:N}=(0,w.o)(),S=j||b?s.formatMessage({defaultMessage:"Syncing knowledge...",id:"QuwefnZNVj"}):void 0,I=(0,x.useMemo)(()=>{var e;return[...m,...null!=(e=null==v?void 0:v.files)?e:[]].some(e=>e.file_kind===U.M.Image||e.file_kind===U.M.SanitizedDocument)},[m,v]),E=(0,x.useCallback)(e=>c(e.model),[c]),[T,D]=(0,F.w)({box:"border-box"}),O=D.width||null,R=null===O||O<480,L=null===O||O<396,z=null!==O&&O<440&&!L;return(0,n.jsxs)("div",{className:"flex gap-2.5 w-full items-center",ref:T,children:[(0,n.jsxs)("div",{className:"relative flex-1 flex items-center gap-2 shrink min-w-0",children:[(0,n.jsx)(eB,{placement:t,canShowDot:null!==O&&L}),(0,n.jsx)(eV,{placement:t,canShowDot:null!==O&&L}),"",(0,n.jsx)(eK,{hideIndicatorText:R}),null!==O&&(0,n.jsx)(e0,{hideIndicatorText:R,hideIndicators:L}),(0,n.jsx)(V,{model:d,projectUuid:i})]}),(0,n.jsx)(ey,{selectedModel:d,onSelect:E,hasMultiModalContent:I,placement:t,open:M,onOpenChange:k,isNewConversation:A,hideModelNameLogo:z}),(0,n.jsx)(ej.H,{isSending:y,isDisabled:a,disabledReason:S,prompt:r,files:m,attachments:u,syncSourceUuids:h,conversation:v,currentCompassTask:_,onSend:()=>f(),onStop:()=>g()})]})};var e8=a(82200),e9=a(29292);let te=()=>{let{onDrop:e}=(0,w.o)();return(0,n.jsx)(e8.wC,{onDrop:e,children:(0,n.jsx)(tt,{})})},tt=()=>{let{dragState:e}=(0,e8.t1)(),t=e===e8.mq.DRAGGING_ON_TARGET;return e!==e8.mq.DRAGGING_OFF_TARGET&&e!==e8.mq.DRAGGING_ON_TARGET?null:(0,n.jsx)("div",{className:"absolute top-0 border border-dashed bg-clip-padding rounded-2xl min-h-4 h-full w-full border-accent-secondary-100 bg-bg-000 overflow-hidden z-10",children:(0,n.jsx)("div",{className:(0,c.A)("flex items-center justify-center h-full w-full transition-colors",t?"bg-accent-secondary-900":"bg-accent-secondary-900/50"),children:(0,n.jsxs)("p",{className:"text-accent-secondary-100 flex flex-row items-center gap-2.5",children:[(0,n.jsx)(e9._,{size:20,className:"opacity-50"}),(0,n.jsx)(S.A,{defaultMessage:"Drop files here to add to chat",id:"IYBR/J+nuA"})]})})})};var ta=a(45727),ts=a(9537),tn=a(37076),tl=a(45986),ti=a.n(tl),tr=a(99965),to=a(73347);function td(e){var t,a;let{isOpen:s,onClose:l,client:i,prompt:r,serverUuid:o}=e,d=(0,p.A)(),c=(0,x.useCallback)(()=>{h({}),l()},[l]),u=(0,tr.vW)(c),[m,h]=(0,x.useState)({}),f=null==r||null==(t=r.arguments)?void 0:t.some(e=>e.required&&!m[e.name]);return r?(0,n.jsxs)(tn.aF,{title:d.formatMessage({defaultMessage:"Enter prompt inputs",id:"zDs90mJ5UJ"}),subtitle:(0,n.jsxs)("div",{className:"flex flex-col gap-1 mt-1",children:[r.name,(0,n.jsx)(to.M,{text:r.description})]}),isOpen:s,onClose:c,modalSize:"lg",children:[(0,n.jsx)("div",{className:"flex flex-col gap-4 max-h-[500px] mb-4 overflow-y-auto",children:null==(a=r.arguments)?void 0:a.map(e=>(0,n.jsx)("div",{className:"flex flex-col gap-1",children:(0,n.jsx)(ts.ks,{required:e.required,label:"".concat(ti()(e.name.toLowerCase())).concat(e.required?"*":""),placeholder:e.description,value:m[e.name]||"",onValueChange:t=>h(a=>({...a,[e.name]:null!=t?t:""})),onBlur:()=>{h(t=>{var a;return{...t,[e.name]:(null!=(a=t[e.name])?a:"").trim()}})},error:e.required&&""===m[e.name]},e.name)},e.name))}),(0,n.jsxs)(tn.vW,{children:[(0,n.jsx)(W.$,{disabled:f,onClick:()=>void u({prompt:r,args:m,serverUuid:o,client:i}),children:(0,n.jsx)(S.A,{defaultMessage:"Add prompt",id:"8UhdEv01LN"})}),(0,n.jsx)(W.$,{variant:"secondary",onClick:c,children:(0,n.jsx)(S.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]}):null}var tc=a(76761),tu=a(41932),tm=a(52909),tx=a(91768),tp=a(15957),th=a(51699);let tf=e=>{let{moveAttachments:t=!1,handleProjectCreated:a,isOpen:s,handleClose:l,syncSources:i=[],attachments:r=[],setSyncSourceUuids:o,setAttachments:d}=e,[c,u]=(0,x.useState)(null),{addError:m}=(0,C.Y)(),p=(0,tp.n)();return tg({project:c,syncSources:i,attachments:r,setSyncSourceUuids:o,setAttachments:d}),(0,n.jsxs)(tn.aF,{isOpen:s,onClose:l,modalSize:"xl",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsx)("h1",{className:"font-heading text-text-200 mb-4",children:t?(0,n.jsx)(S.A,{defaultMessage:"Create a project with attachments",id:"wSxz4Q9mjA"}):(0,n.jsx)(S.A,{defaultMessage:"Create a project",id:"HR5A+UPiIu"})}),(0,n.jsx)(W.$,{onClick:l,size:"icon",variant:"ghost",children:(0,n.jsx)(tc.X,{size:16})})]}),s&&(0,n.jsx)(th.Kk,{syncSources:t?i:void 0,onProjectCreated:e=>{t&&u(e),a(e)},onError:m,onCancel:l,strings:p})]})},tg=e=>{let{project:t,syncSources:a,attachments:s,setSyncSourceUuids:n,setAttachments:l}=e,i=(0,x.useRef)(!1),{addSuccess:r}=(0,C.Y)(),o=(0,p.A)(),{mutate:d}=(0,tu.fh)(null==t?void 0:t.uuid),{mutate:c}=(0,tm.pz)(null==t?void 0:t.uuid),u=(0,x.useCallback)(()=>{t&&(s.length||a.length&&t.is_private)&&(s.forEach(e=>{let{file_name:t,extracted_content:a}=e;d({file_name:t,content:a})}),t.is_private&&(a.forEach(e=>{let t=(0,tx.tS)(e);t&&c(t)}),n([])),l([]),r(o.formatMessage({defaultMessage:"Attachments successfully added to {projectName}",id:"xw8MJ6Kd/h"},{projectName:t.name||"your project"})))},[t,r,s,d,l,c,n,a,o]);(0,x.useEffect)(()=>{t&&!i.current&&(i.current=!0,u())},[t,u])};var tv=a(98518),ty=a(90517),tj=a(43989),tb=a(37790),tw=a(17423),tM=a(61125),tk=a(3975),tA=a(7033),t_=a(99778),tC=a(54556),tN=a(53357),tS=a(91039),tI=a(29585),tE=a(42685);let tT=()=>{let{addError:e}=(0,C.Y)();return{handleRateLimitError:(t,a)=>{t instanceof tI.LG&&429===t.statusCode?"thinking_messages_rate_limit_exceeded"===t.errorCode?e("You’ve reached your weekly limit for thinking messages. Please try again next week."):"opus_messages_rate_limit_exceeded"===t.errorCode?(0,tE.T)():e("You’ve reached the limit for Claude messages at this time. Please wait before trying again."):e(a)}}},tD=(0,tS.default)(()=>a.e(2342).then(a.bind(a,52342)).then(e=>({default:e.WritingAnimation})),{loadableGenerated:{webpack:()=>[52342]},ssr:!1}),tO={default:{type:"spring",stiffness:650,damping:60},opacity:{type:"tween",ease:"easeOut",duration:.35}},tR=(0,x.forwardRef)((e,t)=>{let{setScreen:a,onStyleChange:s,animateBoolRef:l}=e,i=(0,p.A)(),r=(0,tv.st)(),[o,d]=(0,x.useState)(!1),[c,h]=(0,x.useState)(""),{handleRateLimitError:f}=tT(),{mutateAsync:g}=(0,tw.f$)(),v=(0,x.useRef)(null),y=(0,x.useRef)(null);(0,x.useEffect)(()=>{o&&setTimeout(()=>{var e;return null==(e=y.current)?void 0:e.focus()},50)},[o]);let[j,b]=(0,x.useState)(!1),[w,M]=(0,x.useState)(!1),k=(0,x.useRef)(null),A=(0,x.useRef)(null),_=4e3,{handleFileUpload:N,handleTextUpload:I}=function(e){let[t,a]=(0,x.useState)(!1),{activeOrganization:s}=(0,R.YL)(),{addError:n}=(0,C.Y)(),l=(0,O.mn)();return{handleFileUpload:async i=>{if(t||!s)return;if(a(!0),!(0,tM.eT)(i))try{let t=await (0,tM.F9)(i);await e(t),a(!1);return}catch(e){}let r=new FormData;r.append("file",i);try{let t=await l("/api/organizations/".concat(s.uuid,"/convert_document"),{method:"POST",body:r});if(!t.ok)throw Error("Document conversion failed");let a=await t.json();if(!(null==a?void 0:a.extracted_content))throw Error("Document conversion failed: No extracted content");await e(a.extracted_content)}catch(e){n(e instanceof Error?e.message:"Error uploading file")}finally{a(!1)}},handleTextUpload:async n=>{!t&&s&&0!==n.trim().length&&(a(!0),await e(n),a(!1))},isUploading:t}}(async e=>{try{k.current=await g({content_example:e})}catch(e){f(e,i.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"})),b(!1)}}),E=()=>{k.current?s(k.current,!0):A.current=setTimeout(E,_=1e3)},T=async()=>{z(),await I(c)},D=async e=>{let t=Array.from(e.dataTransfer.files);t&&(M(!0),setTimeout(z,20),await N(t[0]))},L=async e=>{let t=e.target.files;t&&(z(),await N(Array.from(t)[0])),e.target.value=""},z=()=>{b(!0),A.current=setTimeout(E,_)};return(0,n.jsx)(m.P.div,{ref:t,className:"w-full h-full grid place-items-center",exit:{opacity:0,scale:.8},transition:l.current?tO:{duration:0},children:(0,n.jsxs)(u.N,{mode:"popLayout",children:[j&&(0,n.jsx)(m.P.div,{className:"w-full h-full grid place-items-center",initial:{opacity:0},animate:{opacity:1},transition:tO,children:(0,n.jsx)(tz,{})},"CreateStyleAnalyzingContentScreen"),!j&&(0,n.jsxs)(m.P.div,{className:"w-full h-full pt-1 flex flex-col sm:grid sm:grid-cols-2 sm:gap-4",children:[(0,n.jsxs)(m.P.div,{exit:{opacity:0,y:40,transition:tO},className:"sm:h-full text-center flex flex-col gap-2 items-center justify-center px-2 pt-8 pb-8 sm:pt-14 sm:pb-20",children:[(0,n.jsx)("div",{className:"relative pb-2 w-full flex items-center justify-center",children:(0,n.jsx)(tD,{})}),(0,n.jsx)("p",{className:"text-text-300 font-claude-response sm:text-lg",children:(0,n.jsx)(S.A,{defaultMessage:"Share a writing example or describe your style and Claude will make a custom writing style tailored just for you.",id:"2qm6Zfzfx3"})})]},"CreatStyleStartScreenExplainer"),(0,n.jsx)(m.P.div,{className:"h-full flex-1",exit:{opacity:0,x:0,scale:.8,transition:{basicTransition:tO}},children:o?(0,n.jsxs)("div",{className:"h-full flex flex-col gap-2 p-2 rounded-xl border-0.5 border-border-300",children:[(0,n.jsx)("textarea",{ref:y,className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:i.formatMessage({defaultMessage:"Paste at least a few paragraphs of example writing, including from multiple various sources if you’d like, for Claude to analyze and the match style of...",id:"mC+9IzmmMY"}),value:c,onChange:e=>h(e.target.value),required:!0}),(0,n.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,n.jsx)(W.$,{variant:"secondary",onClick:()=>d(!1),children:(0,n.jsx)(S.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,n.jsx)(W.$,{onClick:T,children:(0,n.jsx)(S.A,{defaultMessage:"Create style",id:"OC52fhpn7g"})})]})]}):(0,n.jsxs)(e8.wC,{className:"w-full h-full text-center border-dashed border border-border-300 bg-bg-000 rounded-xl relative grid place-items-center",onDrop:D,children:[(0,n.jsx)(tL,{showDropCover:w},"DropZoneOverlay"),(0,n.jsx)("input",{ref:v,type:"file",className:"hidden",accept:(0,tM.cm)({imagesEnabled:!1}).join(","),onChange:L,multiple:!0}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(J.ms,{trigger:(0,n.jsx)(W.$,{variant:"flat",className:"mt-2 font-medium !text-accent-secondary-100 bg-accent-secondary-900 hover:!bg-accent-secondary-100/15 gap-2",prepend:(0,n.jsx)(tk.C,{weight:"bold"}),children:(0,n.jsx)(S.A,{defaultMessage:"Add writing example",id:"EhXT0lXWRc"})}),children:[(0,n.jsx)(J.tJ,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>{v.current&&v.current.click()},children:[(0,n.jsx)(tA.x,{size:16}),(0,n.jsx)(S.A,{defaultMessage:"Upload from device",id:"vMaZk5Jcnv"})]})}),(0,n.jsx)(J.tJ,{onClick:()=>d(!0),children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(t_.v,{size:16}),(0,n.jsx)(S.A,{defaultMessage:"Paste text content",id:"nVQ9XcjUIh"})]})})]}),(0,n.jsxs)("div",{className:"text-xs text-text-400 mt-3 flex flex-col gap-1 max-sm:pb-8",children:[(0,n.jsx)("p",{children:window.innerWidth<=640?(0,n.jsx)(S.A,{defaultMessage:"Select or paste existing doc, post, message, etc.",id:"7oFd31Vmu3"}):(0,n.jsx)(S.A,{defaultMessage:"Select, drop, or paste existing doc, post, message, etc.",id:"ugXnNZ7Ix/"})}),(0,n.jsx)("p",{children:(0,n.jsx)(S.A,{defaultMessage:"Content is not stored after matching style.",id:"bLEGIyr72h"})})]})]}),(0,n.jsx)("div",{className:"absolute w-full bottom-6",children:(0,n.jsx)(W.$,{variant:"underline",size:"inline",className:"text-sm gap-1.5",prepend:(0,n.jsx)(tC.u,{}),onClick:()=>{r.track({event_key:"styles.custom.describe_clicked"}),a(ty.I.CREATE_MANUALLY)},children:(0,n.jsx)(S.A,{defaultMessage:"Describe style instead",id:"p6hP+KeXkD"})})})]})},"CreatStyleStartScreenDropZone")]},"CreatStyleStartScreen")]})})});tR.displayName="CreateStyle";let tL=e=>{let{showDropCover:t}=e,{dragState:a}=(0,e8.t1)(),s=a===e8.mq.DRAGGING_OFF_TARGET||a===e8.mq.DRAGGING_ON_TARGET||t;return(0,n.jsx)(u.N,{children:s&&(0,n.jsx)(m.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:(0,c.A)("absolute -inset-px z-10 flex flex-col justify-center rounded-xl border border-dashed transition-colors",a===e8.mq.DRAGGING_ON_TARGET||t?"bg-accent-secondary-900 border-accent-secondary-200 text-accent-secondary-000":"bg-bg-100 border-border-200 text-text-300"),children:(0,n.jsxs)("div",{className:"py-1.5 text-center",children:[(0,n.jsx)("div",{className:"relative inline-block opacity-60",children:(0,n.jsx)(tN.p,{size:36,weight:"thin"})}),(0,n.jsx)("div",{className:"font-claude-response pt-2 pb-4 italic tracking-tight",children:(0,n.jsx)(S.A,{defaultMessage:"Drop example writing here to match the style",id:"VcDT1Dt8dq"})})]})},"drop-zone-overlay")})},tz=()=>(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,n.jsx)(tD,{animate:!0}),(0,n.jsx)(m.P.div,{className:"font-claude-response italic text-lg",initial:{opacity:0,y:-15},animate:{opacity:1,y:0},transition:{opacity:{delay:.2,ease:"easeOut",duraation:.6},y:{delay:.2,type:"spring",stiffness:230,damping:20}},children:(0,n.jsx)(S.A,{defaultMessage:"Analyzing your writing...",id:"AnDnGKCn6M"})})]});var tP=a(46770),tU=a(29125),tF=a(88999),tG=a(31887);let tY={objective:{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tP.W,{})," ",(0,n.jsx)(S.A,{defaultMessage:"Define style objective",id:"gJB/90MGQ7"})]}),description:"Describe the main purpose and goal of this writing style — whether to teach, analyze, persuade, inspire, etc.",placeholder:"Try something like:\nI want to teach complex topics step-by-step, with a focus on building understanding.",promptPrepend:"I’d like the writing to serve this purpose:"},audience:{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tG.t,{})," ",(0,n.jsx)(S.A,{defaultMessage:"Tailor to an audience",id:"TYdBxyl/f3"})]}),description:"Describe details of the target audience you’d like Claude to write for including relevant information, needs, or preferences.",placeholder:"Try something like:\nWrite for marketing professionals. They’re tech-savvy and appreciate a dash of humor with their data.",promptPrepend:"I’d like to tailor this style to a specific audience:"},voicetone:{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tU.r,{})," ",(0,n.jsx)(S.A,{defaultMessage:"Use specific voice & tone",id:"1Vo908p7lJ"})]}),description:"Think about characteristics like formality, emotion, personality, and how you want the written responses to feel.",placeholder:"Try something like:\nWrite in a warm, approachable tone with light professional humor - like a friendly mentor.",promptPrepend:"I’d like to write in this voice and tone:"},general:{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tC.u,{})," ",(0,n.jsx)(S.A,{defaultMessage:"Describe generally",id:"f3JnPS+B3+"})]}),description:"Describe in detail how you would like Claude to write. Be as specific as you can.",placeholder:"Try something like:\nWrite like an excited scientist explaining fascinating discoveries - technical but energetic.",promptPrepend:"I’d like to write like this:"},custom:{label:(0,n.jsx)(S.A,{defaultMessage:"Use custom instructions (advanced)",id:"hSfu0Sz47T"}),description:"Write exact custom instructions for this style instead of generating a style prompt automatically. Claude will ignore instructions that don’t follow our guidelines.",placeholder:"Write style custom instructions here...",promptPrepend:""}},tH=(0,x.forwardRef)((e,t)=>{let{setScreen:a,onStyleChange:s}=e,l=(0,p.A)(),i=(0,tv.st)(),[r,o]=(0,x.useState)(!1),[d,h]=(0,x.useState)(""),[f,g]=(0,x.useState)(Object.keys(tY)[0]),{handleRateLimitError:v}=tT(),{mutateAsync:y}=(0,tw.f$)(),j=(0,x.useRef)(null);(0,x.useEffect)(()=>{setTimeout(()=>{var e;return null==(e=j.current)?void 0:e.focus()},50)},[f]);let b=d.replace(/\s/g,"").length>24,w=async()=>{if(!r&&b){o(!0);try{let e="custom"===f?{prompt:d}:{input_text:tY[f].promptPrepend+"\n"+d},t=await y(e);s(t,!1)}catch(e){v(e,l.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"}))}finally{o(!1)}}},M=e=>{i.track({event_key:"styles.custom.describe_selected",key:e}),g(e)};return(0,n.jsxs)(m.P.div,{ref:t,className:"w-full h-full flex flex-col sm:grid sm:grid-cols-2 gap-4 pt-3",children:[(0,n.jsxs)("div",{className:"flex flex-col sm:h-full sm:pr-3",children:[(0,n.jsxs)("div",{className:"flex-1 text-text-300",children:[(0,n.jsx)("p",{className:"mb-1 sm:mb-2 text-sm font-medium",children:(0,n.jsx)(S.A,{defaultMessage:"Generate style from a starting point:",id:"cz09/5alWg"})}),(0,n.jsx)("ul",{className:"hidden sm:flex flex-col gap-1.5",children:Object.keys(tY).map(e=>(0,n.jsx)("li",{children:(0,n.jsxs)("button",{className:(0,c.A)("flex gap-1.5 items-center font-ui tracking-tight h-11 rounded-lg border border-border-400 hover:border-border-300 px-3 w-full text-left transition active:scale-[1.015] hover:bg-bg-200",f===e&&"!bg-accent-secondary-900 text-accent-secondary-000 !border-accent-secondary-100/80","custom"===e&&"mt-2 text-sm"),onClick:()=>M(e),children:[(0,n.jsx)("div",{className:"w-4 h-4 rounded-full bg-bg-100 grid place-items-center border border-border-300 mr-1",children:f===e&&(0,n.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-accent-secondary-100"})}),tY[e].label]})},e))}),(0,n.jsx)("div",{className:"sm:hidden",children:(0,n.jsx)(J.ms,{trigger:(0,n.jsx)(W.$,{variant:"ghost",append:(0,n.jsx)(Q.a,{}),className:"w-full !border !border-border-300",children:(0,n.jsx)("div",{className:"flex-1 text-left flex items-center gap-1",children:tY[f].label})}),children:Object.keys(tY).map(e=>(0,n.jsx)(J.tJ,{onSelect:()=>M(e),children:(0,n.jsx)("div",{className:"flex items-center gap-1",children:tY[e].label})},e))})})]}),(0,n.jsx)("div",{className:"mb-4 max-sm:hidden",children:(0,n.jsx)(W.$,{variant:"underline",size:"inline",className:"text-sm gap-1",onClick:()=>a(ty.I.CREATE),prepend:(0,n.jsx)(tF.f,{}),children:(0,n.jsx)(S.A,{defaultMessage:"Never mind, I’ll add an example",id:"PpPoeCEz4X"})})})]}),(0,n.jsxs)("form",{className:"flex flex-col h-full rounded-xl border-0.5 border-border-300 bg-bg-200 px-3 py-2 gap-2",onSubmit:e=>{e.preventDefault(),w()},children:[(0,n.jsx)("p",{className:"pt-0 p-1 text-text-300 font-claude-response max-sm:text-sm",children:tY[f].description}),(0,n.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,n.jsx)("textarea",{ref:j,className:" min-h-0 w-full h-full bg-bg-000 border border-border-200 p-3 leading-snug rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:tY[f].placeholder,value:d,required:!0,onChange:e=>h(e.target.value)}),(0,n.jsx)(u.N,{children:d.length>0&&!b&&(0,n.jsx)(m.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:.1},className:"absolute bottom-1 right-1 left-1 py-2 px-2 rounded-md text-sm bg-accent-secondary-900 text-text-200 text-center",children:(0,n.jsx)(S.A,{defaultMessage:"Be as descriptive as possible to help Claude generate the best possible style for you",id:"3ObAHHjHgF"})})})]}),(0,n.jsx)(q.m,{tooltipContent:b?"":l.formatMessage({defaultMessage:"More description needed in order to generate style",id:"vX4dBOsKs3"}),side:"bottom",className:"text-center",children:(0,n.jsx)("div",{className:"flex items-center w-full justify-center pb-1",children:(0,n.jsx)(W.$,{className:"w-full",type:"submit",loading:r,disabled:!b,children:"custom"===f?(0,n.jsx)(S.A,{defaultMessage:"Create style",id:"OC52fhpn7g"}):(0,n.jsx)(S.A,{defaultMessage:"Generate style",id:"tILvvoBa87"})})})})]})]})});tH.displayName="CreateStyleManually";var tV=a(9946),tB=a(61547),tK=a(21777),tW=a(63965),tJ=a(29035),tq=a(11439),tX=a(97240),t$=a(35687),tZ=a(16566),tQ=a(75032),t0=a(49194),t1=a(19125);function t2(){let[e,t]=(0,t1.V)("userHiddenStyles",[]),a=(0,x.useCallback)(e=>{let a=(0,t0.X)(e);t(e=>[...e,a])},[t]),s=(0,x.useCallback)(()=>{t([])},[t]),n=(0,x.useCallback)(t=>t.filter(t=>{let a=(0,t0.X)(t);return!e.includes(a)}),[e]);return{hiddenPresetStyles:e,setHiddenPresetStyles:t,addHiddenPresetStyle:a,resetHiddenPresetStyles:s,filterHiddenStyles:n}}var t5=function(e){return e.VIEW="view",e.EDIT="edit",e.EDIT_MANUALLY="edit_manually",e}(t5||{});let t7=G.z.array(G.z.object({key:G.z.string(),name:G.z.string(),nameKey:G.z.string().optional(),text:G.z.string(),textKey:G.z.string().optional()})),t6=[],t4=e=>{let{isSaveButton:t,children:a}=e;return(0,n.jsx)("div",{className:(0,c.A)("flex gap-1.5",t?"sm:absolute sm:top-5 sm:right-16 max-sm:mt-3 max-sm:-mb-2":"absolute top-5 right-16"),children:a})},t3=(0,x.forwardRef)((e,t)=>{let{animateBoolRef:a,style:s,setCurrentStyle:l,returnToListScreen:i,setChatStyle:r,setIsEditing:o,setIsEditingName:d}=e,c=(0,p.A)(),u=(0,t0.X)(s),h="default"===s.type,[f,g]=(0,x.useState)("view"),{mutateAsync:v}=(0,tw.lo)(u,h),{handleRateLimitError:y}=tT(),j=async e=>{let{prompt:t,editInput:a}=e;try{let e=await v({prompt:t,edit_instructions:a});e&&l(e)}catch(e){throw y(e,c.formatMessage({defaultMessage:"Failed to edit style. Please try again.",id:"1WkY08RVLW"})),Error}},b=e=>{o("edit"===e||"edit_manually"===e),g(e)};return(0,n.jsxs)(m.P.div,{className:"flex-1 min-h-0 grid sm:grid-cols-2 gap-3 pt-3",ref:t,children:["view"===f&&(0,n.jsxs)(t4,{children:[(0,n.jsx)(W.$,{variant:"secondary",className:"text-sm max-sm:hidden",onClick:()=>r(s),children:(0,n.jsx)(S.A,{defaultMessage:"Use style",id:"f7VY0ldE+0"})}),(0,n.jsx)(aa,{style:s,returnToListScreen:i,onRename:()=>d(!0),setStateToManualEdit:()=>b("edit_manually")})]}),(0,n.jsxs)(m.P.div,{className:"min-h-0",initial:!!a.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.1},opacity:{duration:.3,delay:.1}},children:["view"===f&&(0,n.jsx)(ae,{style:s,onClick:()=>b("edit")}),"edit"===f&&(0,n.jsx)(t8,{style:s,updateStyle:j,onClose:()=>b("view")}),"edit_manually"===f&&(0,n.jsx)(t9,{style:s,updateStyle:j,onClose:()=>b("view")})]}),(0,n.jsx)(at,{style:s,animateBoolRef:a})]})});t3.displayName="EditStyle";let t8=e=>{let{style:t,updateStyle:a,onClose:s}=e,l=(0,p.A)(),i=(0,x.useRef)(t.prompt),r=(0,x.useRef)(null),[o,d]=(0,x.useState)(!1),[h,f]=(0,x.useState)(!1),[g,v]=(0,x.useState)([]),[y,j]=(0,x.useState)(""),b=async e=>{if(e.preventDefault(),o||h)return!1;await w(y)},w=async e=>{j(""),d(!0),v([...g,e]);try{await a({editInput:e})}catch(e){j(y),v(e=>e.slice(0,-1))}d(!1)},M=async()=>{g.length&&(f(!0),await a({prompt:i.current}),f(!1)),s()},k=(0,x.useMemo)(()=>{if(!t.attributes)return[];let e=Math.floor(Math.random()*t.attributes.length),a=e+1<t.attributes.length?e+1:e-1;return[l.formatMessage({defaultMessage:"A bit more {attribute}",id:"au1WTQvqDg"},{attribute:t.attributes[e].name.toLowerCase()}),l.formatMessage({defaultMessage:"Much less {attribute}",id:"dIbq/Ow8Zn"},{attribute:t.attributes[a].name.toLowerCase()})]},[t.attributes,l]);return(0,x.useEffect)(()=>{if(g.length>0){var e;null==(e=r.current)||e.scrollTo({top:r.current.scrollHeight,behavior:"smooth"})}},[g,t.summary]),(0,n.jsxs)("div",{className:"h-full flex flex-col",children:[(0,n.jsxs)("div",{className:"flex-1 min-h-0 flex flex-col gap-2 p-2.5 rounded-xl border border-accent-secondary-100/50 bg-bg-100 ",children:[(0,n.jsxs)("div",{className:(0,c.A)("border-0.5 rounded-lg p-3 pt-2.5 mb-2 relative transition bg-gradient-to-b",o?"border-border-300 from-accent-secondary-900/50 to-accent-secondary-900/10":"border-accent-secondary-100/50 from-accent-secondary-900/75 to-accent-secondary-900/25"),children:[(0,n.jsx)("div",{className:(0,c.A)("font-claude-response font-normal text-pretty leading-snug tracking-tight text-text-200 transition",o?"opacity-0 scale-[0.975]":"delay-150 duration-150 ease-out"),children:t.summary}),(0,n.jsx)(u.N,{children:o&&(0,n.jsx)(m.P.div,{className:"absolute inset-0 grid place-items-center",initial:{scale:.75,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.75,opacity:0},children:(0,n.jsx)(tB.a,{state:"thinking"})})})]}),(0,n.jsx)("ul",{ref:r,className:"flex-1 min-h-0 overflow-y-auto flex flex-col gap-2",children:g.map(e=>(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"inline-block py-2 px-3 rounded-lg bg-bg-300 text-sm",children:e})},e))}),g.length>0?(0,n.jsx)("div",{className:"text-sm text-center text-text-500",children:(0,n.jsx)(S.A,{defaultMessage:"Ask for more edits, save, or discard changes",id:"zOxoAYYCog"})}):(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("div",{className:"text-sm text-text-500 mb-2",children:(0,n.jsx)(S.A,{defaultMessage:"Describe how you’d like to edit the style, like:",id:"PRDvfjUkNA"})}),(0,n.jsx)("ul",{className:"flex flex-col gap-2",children:k.map((e,t)=>(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:t=>{t.preventDefault(),w(e)},className:"text-sm font-medium h-8 px-3 rounded-full border-0.5 border-border-200 text-text-200 bg-gradient-to-b hover:text-text-000 hover:from-bg-400/0 hover:to-bg-400/50 hover:border-border-100 active:scale-x-[0.985] active:scale-y-[0.995] transition",children:e})},t))})]}),(0,n.jsx)("form",{className:"mb-1.5 mx-0.5",onSubmit:e=>b(e),children:(0,n.jsx)(ts.ks,{autoFocus:!0,className:"w-full",name:"inputText",placeholder:l.formatMessage({defaultMessage:"Ask Claude to edit the style...",id:"5D1Fao75P8"}),size:"lg",value:y,onChange:e=>j(e.target.value),append:(0,n.jsx)(u.N,{children:y.length>0&&(0,n.jsx)(m.P.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.85,opacity:0,transition:{ease:"easeIn",duration:.1}},children:(0,n.jsx)(W.$,{type:"submit",size:"icon_sm",variant:"flat",disabled:o||h,children:(0,n.jsx)(tW.D,{})})})})})})]}),(0,n.jsxs)(t4,{isSaveButton:!0,children:[(0,n.jsx)(W.$,{onClick:s,disabled:o||h||y.length>0||0===g.length,children:(0,n.jsx)(S.A,{defaultMessage:"Save changes",id:"X0ha1a+WYV"})}),(0,n.jsx)(W.$,{onClick:M,disabled:o,loading:h,variant:"secondary",children:g.length>0?(0,n.jsx)(S.A,{defaultMessage:"Discard",id:"nmpevlUATU"}):(0,n.jsx)(S.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},t9=e=>{let{style:t,updateStyle:a,onClose:s}=e,[l,i]=(0,x.useState)(!1),[r,o]=(0,x.useState)(t.prompt),d=(0,p.A)(),c=async e=>{e.preventDefault(),i(!0),await a({prompt:r}),i(!1),s()};return(0,n.jsxs)("form",{className:"flex flex-col gap-2 h-full min-h-0 p-3 pt-2 rounded-xl border-0.5 border-border-200",onSubmit:e=>c(e),children:[(0,n.jsx)("div",{className:"text-center text-sm text-text-200 font-medium",children:(0,n.jsx)(S.A,{defaultMessage:"Edit style instructions manually",id:"+qSf1b/LLJ"})}),(0,n.jsx)("textarea",{className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:d.formatMessage({defaultMessage:"Describe your style instructions",id:"nk7EX3l+b4"}),value:r,disabled:l,onChange:e=>o(e.target.value),autoFocus:!0}),(0,n.jsxs)(t4,{isSaveButton:!0,children:[(0,n.jsx)(W.$,{type:"submit",loading:l,children:(0,n.jsx)(S.A,{defaultMessage:"Save changes",id:"X0ha1a+WYV"})}),(0,n.jsx)(W.$,{onClick:()=>{o(t.prompt),s()},disabled:l,variant:"secondary",children:(0,n.jsx)(S.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},ae=e=>{let{style:t,onClick:a}=e,s="default"===t.type;return(0,n.jsxs)("div",{className:(0,c.A)("flex flex-col items-center h-full px-6 gap-4 rounded-lg sm:rounded-xl max-sm:mx-1.5",!s&&"bg-gradient-to-b from-accent-secondary-900/75 to-accent-secondary-900/25 border border-accent-secondary-100/50",s&&"bg-bg-300 border border-border-300"),children:[(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)("div",{className:(0,c.A)("w-fit px-4 py-2 pb-2.5 gap-2.5 rounded-b-lg font-medium text-xs tracking-tight",s?"bg-bg-400 text-text-300":"bg-accent-secondary-200/10 text-accent-secondary-100"),children:s?(0,n.jsx)(S.A,{defaultMessage:"Preset style",id:"qwpRSZtBAV"}):(0,n.jsx)(S.A,{defaultMessage:"Your custom style",id:"o/vLK7B7mw"})})}),(0,n.jsxs)("div",{className:"flex flex-col items-center gap-1.5 pb-4",children:[!s&&(0,n.jsx)(q.m,{className:"text-center",tooltipContent:(0,n.jsx)(S.A,{defaultMessage:"Full style instructions are generated and include more than shown in summary. You can edit instructions manually from the options menu",id:"R5PMcY1ELo"}),children:(0,n.jsxs)("div",{className:"flex items-center gap-1 cursor-help opacity-50 hover:opacity-60",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:(0,n.jsx)(S.A,{defaultMessage:"Style summary",id:"hVmQ4DO8io"})}),(0,n.jsx)(eD.R,{size:12,className:"translate-y-px",weight:"bold"})]})}),(0,n.jsx)("div",{"data-testid":"style-summary",className:"font-claude-response text-xl font-normal text-pretty leading-snug tracking-tight text-center flex-1 flex items-center",children:"default"===t.type&&t.summaryKey?(0,n.jsx)(r.X5,{id:t.summaryKey}):t.summary})]}),(0,n.jsx)("div",{className:"flex-1 flex items-center text-sm",children:s?(0,n.jsx)(S.A,{defaultMessage:"Preset styles are not editable",id:"qjKy0s/reb"}):(0,n.jsx)(W.$,{variant:"outline",onClick:a,className:"!border-accent-secondary-200 !text-accent-secondary-000 hover:!bg-accent-secondary-100/10",prepend:(0,n.jsx)(tZ.f,{weight:"bold"}),children:(0,n.jsx)(S.A,{defaultMessage:"Edit with Claude",id:"wdKoWlVN+G"})})})]})},at=e=>{let{style:t,animateBoolRef:a}=e,s=(0,p.A)(),[l,i]=(0,x.useState)(""),[d,h]=(0,x.useState)(),f=(0,x.useRef)(t.prompt),g=(0,x.useRef)(d),v=(0,o.T9)("claude_style_previews","previewExamples",t6,t7),{handleRateLimitError:y}=tT(),{isPending:j,mutateAsync:b}=(0,tw.n7)(),w=(0,x.useCallback)(async()=>{if(d)try{let e=await b({style_prompt:t.prompt,example_key:d.key,example_text:d.textKey?(0,r.fl)({id:d.textKey,intl:s}):d.text});i(e)}catch(e){y(e,s.formatMessage({defaultMessage:"Failed to preview style. Please try again.",id:"B2A4x/wbTg"}))}},[y,b,d,t.prompt,s]);(0,x.useEffect)(()=>{var e;(f.current!==t.prompt||(null==(e=g.current)?void 0:e.key)!==(null==d?void 0:d.key))&&(f.current=t.prompt,g.current=d,w())},[w,d,t.prompt]);let{value:M}=(0,o.fS)("use_in_house_latex_transformer");return(0,n.jsx)(m.P.div,{className:(0,c.A)("max-sm:hidden flex flex-col gap-2 h-full min-h-0 p-2 rounded-xl border-0.5 border-border-300 transition-colors",d?"bg-bg-000/70":"bg-bg-000/20"),initial:!!a.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.2},opacity:{duration:.3,delay:.2}},children:d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center text-sm px-2 font-medium text-text-200",children:[(0,n.jsx)(S.A,{defaultMessage:"Previewing with",id:"tNFdPqESDT"}),(0,n.jsx)(J.ms,{align:"center",trigger:(0,n.jsx)(W.$,{variant:"ghost",size:"unset",className:"!px-1 !py-0.5 gap-0.5 !text-accent-secondary-100 hover:!bg-accent-secondary-900",append:(0,n.jsx)(tQ.a,{className:"translate-y-px"}),children:d?d.nameKey?(0,n.jsx)(r.X5,{id:d.nameKey}):d.name:(0,n.jsx)(S.A,{defaultMessage:"Example",id:"xrCRnH/mKK"})}),children:v.map(e=>(0,n.jsx)(J.tJ,{disabled:j,onClick:()=>h(e),children:e.nameKey?(0,n.jsx)(r.X5,{id:e.nameKey}):e.name},e.key))})]}),(0,n.jsxs)(tK.E,{className:"p-2 pt-0 min-h-0 overflow-y-scroll",children:[(0,n.jsx)("div",{className:"bg-bg-300 -mx-0.5 mb-2 py-1.5 px-2 text-sm rounded-lg text-pretty",children:d.textKey?(0,n.jsx)(r.X5,{id:d.textKey}):d.text}),(0,n.jsx)(u.N,{children:j?(0,n.jsx)("div",{className:"pt-2",children:(0,n.jsx)(tB.a,{state:"writing"})}):(0,n.jsx)(m.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeIn",duration:.25},children:(0,n.jsx)(tV.fP,{className:"font-claude-response flex-1 flex flex-col gap-2",text:l,useInHouseLatexPlugin:M})})})]})]}):(0,n.jsx)("div",{className:"flex-1 grid place-items-center text-center",children:(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("div",{className:"text-sm text-text-500 font-medium mb-4",children:(0,n.jsx)(S.A,{defaultMessage:"Preview with an example...",id:"YdUmd5z6YL"})}),(0,n.jsx)("div",{className:"flex flex-wrap justify-center gap-2 w-full",children:v.map(e=>(0,n.jsx)("button",{onClick:()=>h(e),className:"\n                    rounded-full\n                    border-0.5\n                    border-border-300\n                    text-sm\n                    text-text-400\n                    font-medium\n                    h-8\n                    px-3\n                    flex\n                    items-center\n                    bg-gradient-to-b\n                    from-always-black/0\n                    to-always-black/5\n                    hover:bg-accent-secondary-900\n                    hover:text-accent-secondary-000\n                    hover:border-accent-secondary-100/50\n                    transition-colors",children:e.nameKey?(0,n.jsx)(r.X5,{id:e.nameKey}):e.name},e.key))})]})})})},aa=e=>{let{style:t,returnToListScreen:a,onRename:s,setStateToManualEdit:l}=e,i=(0,t0.X)(t),r="default"===t.type,{isPending:o,mutateAsync:d}=(0,tw.M$)(i),{addHiddenPresetStyle:c}=t2(),{clearStoredStyle:u,storedStyle:m}=(0,ta.p)(),{addError:x}=(0,C.Y)(),h=(0,p.A)(),f=async()=>{if(r)c(t),setTimeout(()=>{a()},500);else try{await d(),m&&"uuid"in m&&m.uuid===t.uuid&&u(),a()}catch(e){x(h.formatMessage({defaultMessage:"Failed to delete style. Please try again.",id:"4eIHICfKCI"}))}};return(0,n.jsxs)(J.ms,{align:"end",unstyledTrigger:!0,trigger:(0,n.jsxs)(W.$,{variant:"ghost",className:"max-sm:min-w-8 max-sm:px-2 sm:pl-3 sm:pr-2",children:[(0,n.jsxs)("span",{className:"hidden sm:flex items-center gap-1",children:[(0,n.jsx)(S.A,{defaultMessage:"Options",id:"NDV5MqT9ww"}),"\xa0",(0,n.jsx)(tQ.a,{})]}),(0,n.jsx)("span",{className:"sm:hidden",children:(0,n.jsx)(tJ.L,{weight:"bold",size:20})})]}),children:[!r&&(0,n.jsx)(J.tJ,{disabled:o,onClick:()=>{s()},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(tq.g,{className:"mr-2"}),(0,n.jsx)(S.A,{defaultMessage:"Rename style",id:"sEO8vFphTF"})]})}),"Concise"===i?(0,n.jsx)(J.q,{className:"text-sm",children:(0,n.jsx)(S.A,{defaultMessage:"Concise style can’t be hidden",id:"zTztS+Om9I"})}):(0,n.jsx)(J.tJ,{className:"pr-0 !text-danger-000",disabled:o,onClick:f,children:r?(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(tX.C,{}),(0,n.jsx)(S.A,{defaultMessage:"Hide preset style",id:"z44N28JZYv"})]}):(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(t$.l,{}),(0,n.jsx)(S.A,{defaultMessage:"Delete style",id:"fAqSoPl78t"})]})}),!r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.DG,{}),(0,n.jsx)(J.tJ,{onClick:l,children:(0,n.jsx)(S.A,{defaultMessage:"Edit style manually",id:"H+z4uo2Wfn"})})]})]})},as=e=>{let{size:t=16,className:a}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",width:t,height:t,viewBox:"0 0 16 16",className:a,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M8.5 4.5c-3 2-4.5 4-5.5 8L2.5 15l1-1.5"}),(0,n.jsx)("path",{d:"M3 4.5c-.5 1.3-.1 5 .4 6.5 0 0 1.9-2 4.1-3 1.8-.8 3.8-.6 4.5-2 .6-1.2-.2-1.7-1.5-1 1.2-.7 4-2 3-3.5-1-1.4-3.5-.1-4.5.8C9 1.9 9 .9 8 1c-1 .1-2 1.5-2.3 2.8 0 0 0-.7-.7-.8-.7-.1-1.6.5-2 1.5Z"}),(0,n.jsx)("path",{d:"M10.5 11v4m-2-2h4"})]})};var an=a(26505),al=a(88869),ai=a(17938),ar=a(99115),ao=a(21139);let ad=(0,x.forwardRef)((e,t)=>{let{setScreen:a,styles:s,onStyleChange:l}=e,{hiddenPresetStyles:i,resetHiddenPresetStyles:r}=t2(),{sortStyles:o,setOrder:d}=function(){let[e,t]=(0,t1.V)("userStylesOrder",[]);return{sortStyles:(0,x.useCallback)(t=>[...t].sort((t,a)=>{let s=(0,t0.X)(t),n=(0,t0.X)(a);if("Default"===s)return -1;if("Default"===n)return 1;let l=e.indexOf(s),i=e.indexOf(n);return -1===l&&-1===i?0:-1===l?1:-1===i?-1:l-i}),[e]),stylesOrder:e,setOrder:(0,x.useCallback)(e=>{t(e.map(e=>(0,t0.X)(e)))},[t])}}(),[c,u]=(0,x.useState)([]),p=(0,x.useCallback)(e=>{let t=[...i,"Default"];return o(e.filter(e=>!t.includes((0,t0.X)(e))))},[i,o]);(0,x.useEffect)(()=>{u(p(s))},[s,p]);let h=(0,x.useCallback)(e=>{Array.isArray(e)&&(u(e),d(e))},[d]),f=(0,x.useMemo)(()=>s.some(e=>"custom"===e.type),[s]);return(0,n.jsxs)(m.P.div,{exit:{opacity:0,transition:{duration:0}},ref:t,className:"flex-1 min-h-0 flex flex-col -mx-3",children:[(0,n.jsxs)("div",{className:"flex-1 min-h-0",children:[(0,n.jsx)(ai.x,{as:"ul",axis:"y",values:c,onReorder:h,layoutScroll:!0,className:"pl-3 pr-3 pb-2 overflow-y-auto max-h-full [mask-image:linear-gradient(to_top,hsl(var(--always-black)/0%)_0%,_hsl(var(--always-black)/100%)_3%)]",children:c.map(e=>(0,n.jsx)(ac,{style:e,onClick:()=>l(e,!1)},(0,t0.X)(e)))}),!f&&(0,n.jsxs)(m.P.div,{initial:{opacity:0,scale:.985},animate:{opacity:1,scale:1,transition:{delay:.3,ease:"easeOut",duration:.3}},exit:{opacity:0},className:"flex bg-gradient-to-b from-accent-pro-900/20 to-accent-pro-900/50 py-3 pl-3.5 pr-5 mx-3 rounded-lg border-0.5 border-border-300 text-text-300 text-sm",children:[(0,n.jsx)("div",{className:"font-ui-serif font-medium mr-4 text-accent-pro-000 mt-px whitespace-nowrap",children:(0,n.jsx)(S.A,{defaultMessage:"Tip",id:"4j1TGZubAJ"})}),(0,n.jsx)("p",{children:(0,n.jsx)(S.A,{defaultMessage:"Choose from preset styles or create your own custom style to tailor elements of Claude’s written responses such as tone, voice, vocabulary, detail level, and more. <link>Learn about styles</link>",id:"pwT6iI4QV7",values:{link:e=>(0,n.jsx)("a",{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",className:"underline hover:text-text-000",target:"_blank",children:e})}})})]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center mt-4 mx-3",children:[(0,n.jsx)(W.$,{onClick:()=>a(ty.I.CREATE),prepend:(0,n.jsx)(as,{}),children:(0,n.jsx)(S.A,{defaultMessage:"Create custom style",id:"9y/YEanHck"})}),i.length>0&&(0,n.jsx)(W.$,{variant:"underline",onClick:r,children:(0,n.jsx)(S.A,{defaultMessage:"Reset preset styles",id:"EITqrHaUNi"})})]})]})});ad.displayName="ListStyles";let ac=e=>{let{style:t,onClick:a}=e,s="default"===t.type,l=(0,ar.m)(),[i,o]=(0,x.useState)(!1);return(0,n.jsxs)(ao.N,{value:t,dragListener:!1,dragControls:l,dragTransition:{bounceStiffness:500,bounceDamping:40},onDragStart:()=>o(!0),onDragEnd:()=>o(!1),className:"relative my-2 min-w-0",children:[(0,n.jsxs)("button",{className:(0,c.A)("\n          flex\n          items-center\n          w-full\n          h-11\n          py-4\n          pl-1\n          pr-3\n          min-w-0\n          rounded-lg\n          transition\n          border-0.5\n          border-border-300\n          bg-bg-100\n          bg-gradient-to-b\n          from-bg-300/0\n          to-bg-300/50\n          select-none\n          relative\n        ",i?"scale-y-[1.015] scale-x-[1.0025] shadow-md":"group hover:enabled:from-accent-secondary-200/0 hover:enabled:to-accent-secondary-200/10 hover:enabled:border-accent-secondary-200/50"),onClick:a,children:[(0,n.jsx)("div",{className:"flex min-w-0 items-center flex-1 pl-7 truncate",children:"default"===t.type&&t.nameKey?(0,n.jsx)(r.X5,{id:t.nameKey}):t.name}),s&&(0,n.jsx)("div",{className:"mr-0.5 rounded-full px-2 py-0.5 bg-text-300/5 text-text-400 font-medium text-[0.625rem]",children:(0,n.jsx)(S.A,{defaultMessage:"Preset",id:"EucS2pAMVS"})}),(0,n.jsx)("div",{className:"text-accent-secondary-200 opacity-0 scale-50 transition group-hover:scale-100 group-hover:opacity-100",children:s?(0,n.jsx)(an.Q,{}):(0,n.jsx)(tq.g,{})})]}),(0,n.jsx)("div",{onPointerDown:e=>l.start(e),onClick:e=>e.stopPropagation(),className:"w-7 h-7 absolute left-1 top-1/2 -translate-y-1/2 grid place-items-center cursor-move text-text-500 hover:text-accent-secondary-000",children:(0,n.jsx)(al.H,{size:16,weight:"bold"})})]})},au=e=>{let{openWithScreen:t,onClose:a,styles:s,setChatStyle:l}=e,i=(0,p.A)(),o=!!t,d=(0,tv.st)(),[c,m]=(0,x.useState)(t||ty.I.LIST),[h,f]=(0,x.useState)(),[g,v]=(0,x.useState)(!1),[y,j]=(0,x.useState)(!1),b=(0,x.useRef)(!1);(0,x.useEffect)(()=>{t&&m(t)},[t]);let w=()=>{b.current=!1,m(ty.I.LIST),v(!1),j(!1)},M=()=>{(!g||window.confirm(i.formatMessage({defaultMessage:"Are you sure? Closing while editing may not synchronize changes.",id:"0XdWZrmwXu"})))&&(d.track({event_key:"styles.modal",open:!1}),w(),a())},k=(e,t)=>{b.current=t,f(e),m(ty.I.EDIT),v(!1),j(!1)};return(0,n.jsx)(tn.aF,{modalSize:"xl",title:(e=>{switch(e){case ty.I.CREATE:return(0,n.jsx)("div",{className:"font-ui-serif font-normal",children:(0,n.jsx)(S.A,{defaultMessage:"Create a style",id:"/pKvFi9Ak4"})});case ty.I.CREATE_MANUALLY:return(0,n.jsx)("div",{className:"font-ui-serif font-normal",children:(0,n.jsx)(S.A,{defaultMessage:"Describe your style",id:"Ntblq5cSRe"})});case ty.I.LIST:return(0,n.jsx)("div",{className:"font-ui-serif font-normal",children:(0,n.jsx)(S.A,{defaultMessage:"Customize your styles",id:"dn3MiW/vUH"})});case ty.I.EDIT:return(0,n.jsx)("div",{className:"w-10/12 sm:w-5/12 md:w-7/12",children:y?(0,n.jsx)(am,{style:h,onClose:e=>{e&&f(e),j(!1)}}):(0,n.jsx)("button",{title:h.name,className:"w-full font-ui-serif font-normal text-left truncate cursor-text h-9 pr-4 leading-none translate-y-px text-text-200 hover:text-text-000",onClick:()=>!g&&j(!0),children:g?(0,n.jsx)(S.A,{defaultMessage:"Edit {name}",id:"s3IOQQ+nJU",values:{name:h.name}}):"default"===h.type&&h.nameKey?(0,n.jsx)(r.X5,{id:h.nameKey}):h.name})})}})(c),icon:(e=>{switch(e){case ty.I.CREATE:case ty.I.EDIT:return(0,n.jsx)(W.$,{variant:"ghost",size:"icon_sm",disabled:g,onClick:()=>w(),children:(0,n.jsx)(tj.n,{})});case ty.I.CREATE_MANUALLY:return(0,n.jsx)(W.$,{variant:"ghost",size:"icon_sm",onClick:()=>m(ty.I.CREATE),children:(0,n.jsx)(tj.n,{})});case ty.I.LIST:return null}})(c),isOpen:o,onClose:M,className:"h-[35rem] !bg-gradient-to-b from-bg-100 to-bg-200 !pt-5 !pb-7",prependBeforeCloseButton:(0,n.jsx)(n.Fragment,{children:c===ty.I.LIST&&(0,n.jsx)(q.m,{tooltipContent:i.formatMessage({defaultMessage:"Learn more about styles ↗",id:"nuhnis5YtY"}),children:(0,n.jsx)("div",{className:"mr-1",children:(0,n.jsx)(W.$,{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",variant:"ghost",className:"text-text-300",size:"icon",target:"_blank",children:(0,n.jsx)(tb.v,{size:18})})})})}),hasCloseButton:!0,children:(0,n.jsxs)(u.N,{mode:"popLayout",children:[c===ty.I.CREATE&&(0,n.jsx)(tR,{onStyleChange:k,setScreen:m,animateBoolRef:b},"CreateStyleScreen"),c===ty.I.CREATE_MANUALLY&&(0,n.jsx)(tH,{onStyleChange:k,setScreen:m},"CreateStyleManuallyScreen"),c===ty.I.LIST&&(0,n.jsx)(ad,{setScreen:m,styles:s,onStyleChange:k},"ListStylesScreen"),c===ty.I.EDIT&&h&&(0,n.jsx)(t3,{animateBoolRef:b,style:h,returnToListScreen:w,setIsEditingName:j,setCurrentStyle:f,setIsEditing:v,setChatStyle:e=>{l(e),M()}},"EditStyleScreen")]})})},am=e=>{let{style:t,onClose:a}=e,s=(0,t0.X)(t),l="default"===t.type,i=(0,p.A)(),[o,d]=(0,x.useState)("default"===t.type&&t.nameKey?(0,r.fl)({id:t.nameKey,intl:i}):t.name),{isPending:c,mutateAsync:u}=(0,tw.lo)(s,l),m=async()=>{a(await u({name:o}))};return(0,n.jsx)("form",{className:"w-full",onSubmit:async e=>{e.preventDefault(),await m()},children:(0,n.jsx)(ts.ks,{autoFocus:!0,className:"w-full",value:o,maxLength:64,onChange:e=>d(e.target.value),error:0===o.length,append:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(W.$,{variant:"ghost",type:"button",size:"unset",className:"w-7 h-7 rounded-md mr-1",onClick:()=>a(),disabled:c,children:(0,n.jsx)(tc.X,{})}),(0,n.jsx)(W.$,{variant:"flat",size:"unset",className:"w-7 h-7 rounded-md",type:"submit",loading:c,children:(0,n.jsx)(Z.J,{weight:"bold"})})]})})})};var ax=a(60885),ap=a(96533);let ah=()=>{let{projectUuid:e,setProjectUuid:t,setSyncSourceUuids:a,setIsUploadingGithubSync:s,syncSourceUuids:l,attachments:i,setAttachments:r}=(0,w.o)(),{styleModalOpenWithScreen:o,setStyleModalOpenWithScreen:d,createProjectModalIsOpen:c,setCreateProjectModalIsOpen:u,githubModalIsOpen:m,setGithubModalIsOpen:p,gmailAuthModalIsOpen:f,setGmailAuthModalIsOpen:g,createPromptArgumentModalIsOpen:v,setCreatePromptArgumentModalIsOpen:y}=(0,eG.CH)(),{mcpDirectoryModalIsOpen:j,setMcpDirectoryModalIsOpen:b}=(0,eG.tl)(),{personalizedStyleOptions:M}=(0,ta.p)(),k=(0,eC.sb)(),A=(0,eY.pi)(),_=(0,x.useCallback)(e=>{a(t=>[...t,e.uuid]),s(!1)},[a,s]),C=(0,h.NY)(l),N=(0,O.B7)(C);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(au,{openWithScreen:o,onClose:()=>d(null),styles:M,setChatStyle:e=>A(e.key)}),(0,n.jsx)(ap.r,{isOpen:!!f,onClose:()=>g(!1),callerIdentifier:"inputMenu"}),(0,n.jsx)(tf,{moveAttachments:!!(null==c?void 0:c.moveAttachments),isOpen:!!(null==c?void 0:c.isOpen),handleClose:()=>u(null),handleProjectCreated:e=>{t(e.uuid),u(null)},syncSources:N,attachments:i,setSyncSourceUuids:a,setAttachments:r}),(0,n.jsx)(ax.s,{location:"chat",projectUuid:e,isOpen:m,onClose:()=>p(!1),onCreated:_,setIsUploadingGithubSync:s}),v&&(0,n.jsx)(td,{isOpen:v.isOpen,onClose:()=>y(null),client:v.client,serverUuid:v.serverUuid,prompt:v.prompt}),k&&(0,n.jsx)(eS.TY,{isOpen:j,setIsOpen:b,showManageButton:!0})]})};function af(){let e=(0,s._)(["\n  !box-content\n  flex\n  flex-col\n  bg-bg-000\n  mx-2\n  md:mx-0\n  items-stretch\n  transition-all\n  duration-200\n  relative\n  cursor-text\n  z-10\n  rounded-2xl\n"]);return af=function(){return e},e}function ag(){let e=(0,s._)(["\n  bg-bg-100 \n  w-full \n  h-2\n"]);return ag=function(){return e},e}function av(){let e=(0,s._)(["\n  flex \n  w-full \n  min-w-0 \n  flex-col\n"]);return av=function(){return e},e}let ay=(0,x.forwardRef)((e,t)=>{var a,s,i,v;let{disabled:y,placement:j,placeholder:U,onSubmit:F,onReady:G}=e,Y=(0,p.A)(),H=(0,eG.CH)(),{prompt:V,tipTapEditorState:B,projectUuid:K,setPrompt:W,setTipTapEditorState:J,setAttachments:q,setFiles:X,attachments:$,files:Z,syncSourceUuids:Q,isUploadingDriveSync:ee,isUploadingGithubSync:et,sendMessage:ea,conversation:es,isChatSyncing:en,isProjectSyncing:el,setSyncSourceUuids:ei,isSending:er,focusInput:eo,isFocused:ed,setIsFocused:ec,promptInputRef:eu,willRedirectOnSubmit:em,hasBlockingWarning:ex,isUploadingFile:ep,setIsUploadingFile:eh,validateMaxUploadLimit:ef,onPasteFiles:eg,uploadInputProps:ev,hasAttachments:ey,isNewConversation:ej,isImprovingPrompt:eb}=(0,w.o)(),{incognitoModeEnabled:ew}=(0,M.S)();(0,x.useImperativeHandle)(t,()=>({setContent:(e,t,a)=>{W(e,{forceUpdateTiptap:!0}),q("function"==typeof t?t($):t),X("function"==typeof a?a(Z):a)},sendMessage:ea,setAttachments:e=>{q("function"==typeof e?e($):e)},getAttachments:()=>$})),(()=>{let{setPrompt:e,setAttachments:t,setFiles:a}=(0,w.o)(),{failedStreamRetryData:s,setFailedStreamRetryData:n}=(0,z.x)();(0,x.useEffect)(()=>{null!==s&&(e(s.prompt),t(s.attachments),a(s.files),n(null))},[s,t,n,a,e])})();let{fetchInputAutocompletion:eM}=(0,f.$z)(null==es?void 0:es.id),ek=function(e,t,a,s,l,i){let r=function(e,t,a,s){let{addError:l}=(0,C.Y)(),i=(0,x.useCallback)(e=>{a(!1),e&&l(e)},[l,a]),{activeOrganization:r}=(0,R.YL)(),d=null==r?void 0:r.uuid,c=(0,O.mn)(),u=(0,x.useCallback)(async e=>{let t;if(!d)return i((0,n.jsx)(S.A,{defaultMessage:"Invalid login",id:"m0+xd2UWTk"}));new URL("/api/organizations/".concat(d,"/fetch_url"),window.location.origin).searchParams.set("url",e);try{t=await c("/api/organizations/".concat(d,"/fetch_url?url=").concat(encodeURIComponent(e)))}catch(e){return(0,L.Cp)(e),i((0,n.jsx)(S.A,{defaultMessage:"One or more fetches have failed. Try again.",id:"anYsv8zeLR"}))}if(429===t.status)return i("Too many fetch attempts. Please wait and try again later.");if(!t.ok)return"fetch_unsupported_filetype"===(await t.json()).error.code?i():i((0,n.jsx)(S.A,{defaultMessage:"Fetching failed for one of the URLs. Please try again.",id:"Evnb9+Woth"}));let a=await t.json();return a&&0!==Object.keys(a).length&&a.extracted_content?a:i((0,n.jsx)(S.A,{defaultMessage:"Text extraction failed for one of the URLs.",id:"Pl7Qm8W+aN"}))},[c,d,i]),{value:m}=(0,o.fS)("hatch_use_web_fetcher");return(0,x.useCallback)(async n=>{if(!m)return;let l=[],i=(0,D.q6)(n);if(0!==i.length&&s({numNewPotentialAttachments:i.length})){for(let t=0;t<i.length;t++){let s=i[t];if(e.some(e=>s.endsWith(e.file_name)))continue;a(!0);let n=await u(s);if(!n)return;l.push(n)}l.forEach(e=>(0,_.pD)(e)),l.length>0&&t(e=>[...e,...l]),a(!1)}},[m,s,u,a,t,e])}(e,t,a,s),[d,c]=(0,x.useState)(!1);return(0,x.useEffect)(()=>{let e=e=>{"Shift"===e.key&&c(!0)},t=e=>{"Shift"===e.key&&c(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),(0,x.useCallback)(e=>{var a,n,o;let c=null==(n=e.clipboardData)||null==(a=n.files)?void 0:a.length,u=null==(o=e.clipboardData)?void 0:o.getData("text/plain"),m=null==u?void 0:u.length;if(m&&!c){let e=(0,E.$)(u);e&&i(e)}if(c&&!m){s({newUploads:Array.from(e.clipboardData.files)})&&l(e.clipboardData.files),e.preventDefault();return}s({numNewPotentialAttachments:1,showError:!1})&&(r(u).catch(console.error),!m||u.length<4e3||d||(e.preventDefault(),t(e=>{let t="paste.txt",a=1;for(;e.some(e=>e.file_name===t);)a+=1,t="paste-".concat(a,".txt");return[...e,{file_name:t,file_size:u.length,file_type:"txt",extracted_content:u}]})))},[s,t,r,l,i,d])}($,q,eh,ef,eg,(()=>{let{setSyncSourceUuids:e,isAtMaxNumUploads:t,setIsUploadingDriveSync:a,prompt:s}=(0,w.o)(),l=(0,I.LP)(),{addError:i}=(0,C.Y)(),r=(0,p.A)(),{mutate:o}=(0,h.EF)({onMutate:()=>{a(!0)},onSuccess:t=>{e(e=>[...e,t.uuid]),a(!1)},onError:e=>{a(!1),i((0,T.J)(e))},meta:{noToast:!0}}),{isDriveAuthenticated:d,initDriveAuth:c}=(0,I.cI)({callerIdentifier:"chat-input",handleAuthSuccess:()=>{for(let e of s.match(/(https?:\/\/[^\s]+)/gi)||[]){let t=(0,E.$)(e);t&&u(t,!0)}}}),u=(0,x.useCallback)(function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(l||a){if(!d&&!a)return void i((0,n.jsx)("span",{children:(0,n.jsx)(S.A,{defaultMessage:"<button>Authenticate</button> to paste link as attachment",id:"85AH1hyv0s",values:{button:e=>(0,n.jsx)("button",{className:"underline",onClick:c,children:e})}})}));if(t)return void i(r.formatMessage({defaultMessage:"You can add at most {maxUploads, plural, one {# attachment} other {# attachments}} to a message.",id:"wvnM4s8976"},{maxUploads:_.Jn}));o({sync_source_type:N.v8.GDRIVE,sync_source_config:{uri:e}})}},[l,d,t,o,c,i,r]);return u})()),eA=null!=(a=null==es?void 0:es.projectKnowledgebaseTokens)?a:0,[e_]=(0,P.q)({projectUuid:K,conversationUUID:null!=(s=null==es?void 0:es.id)?s:null,conversationTokensSoFar:null!=(i=null==es?void 0:es.tokensSoFar)?i:0,conversationFiles:null!=(v=null==es?void 0:es.files)?v:[],projectKnowledgebaseTokens:eA,input:V,attachments:$,syncSourceUuids:Q}),eC=(0,A.U)(K),{value:eN}=(0,o.fS)("test_gated_strings"),{value:eS}=(0,o.fS)("claudeai_beam"),eI=(0,d.q)(),eE=y||0===V.length&&0===$.length&&0===Z.length&&0===Q.length||ep||ee||et||en||el||ex||"will-exceed"===e_||eC||(null==es?void 0:es.isSampling)===!0,eT=(0,x.useCallback)(async()=>{!eE&&(await ea(),F&&F())},[eE,F,ea]),eD=(0,x.useCallback)(()=>{ec(!0)},[ec]),eO=(0,x.useCallback)(e=>{(0,l.h0)(e),J(e)},[J,H,eS]),eR=(0,x.useCallback)(()=>{ec(!1)},[ec]),eL=(0,x.useCallback)(e=>{let t=e.target;"BUTTON"===t.tagName||t.closest("button")||t.closest("[role]")||t.closest("a")||t.closest("input")||t.closest("select")||t.closest("textarea")||eo()},[eo]),ez=(0,x.useRef)(null),eP=(0,h.NY)(Q).map((e,t)=>{let{data:a}=e;return{syncSource:a,uuid:Q[t]}}),eU=(0,n.jsx)(u.N,{initial:!1,children:ey&&(0,n.jsx)(m.P.div,{className:"overflow-hidden rounded-b-2xl",initial:{height:0},animate:{height:"auto"},exit:{height:0},children:(0,n.jsx)(b,{isUploadingFile:ep,isUploadingSync:ee||et,attachments:$,files:Z,syncSourceResults:eP,onRemoveAttachment:e=>{q(t=>t.filter((t,a)=>a!==e))},onRemoveFile:e=>{X(t=>t.filter((t,a)=>a!==e))},onRemoveSyncSource:e=>{ei(t=>t.filter(t=>t!==e))}})},"attachments")});return eI?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(aM,{onPasteCapture:e=>{ed&&ek(e)},children:[(0,n.jsx)("input",{ref:ez,id:"chat-input-file-upload-".concat(j),"data-testid":"file-upload","aria-hidden":"true",tabIndex:-1,className:"absolute -z-10 h-0 w-0 overflow-hidden opacity-0 select-none",...ev}),"bottom"===j&&(0,n.jsx)("div",{className:"px-3 md:px-2",children:(0,n.jsx)(g.Q,{placement:j})}),(0,n.jsxs)(ab,{onClick:eL,className:(0,c.A)("border border-transparent",em&&er&&"animated-loading-background",eb?"transition-all duration-500 ring-1 ring-border-300/50 dark:ring-border-300/50":"",ew?"border-dashed bg-clip-padding !border-border-200 shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%)] focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%)]":"shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%),0_0_0_0.5px_hsla(var(--border-300)/0.15)] hover:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%),0_0_0_0.5px_hsla(var(--border-200)/0.3)] focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%),0_0_0_0.5px_hsla(var(--border-200)/0.3)] hover:focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%),0_0_0_0.5px_hsla(var(--border-200)/0.3)]"),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-3.5 m-3.5",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(k.P,{ref:eu,prompt:V,setPrompt:W,tipTapEditorState:B,setTipTapEditorState:eO,onSubmit:eT,onReady:G,onFocus:eD,onBlur:eR,placement:j,placeholder:null!=U?U:ej?eN?(0,r.O)({id:"spread_attempt_mind",intl:Y}):Y.formatMessage({defaultMessage:"How can I help you today?",id:"XLcM6WHfQR"}):eN?(0,r.O)({id:"window_edge_kiwi",intl:Y}):Y.formatMessage({defaultMessage:"Reply to Claude...",id:"kSt28+RchS"}),fetchInputAutocompletion:eM}),eb&&V&&(0,n.jsx)(u.N,{children:(0,n.jsx)(m.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 pointer-events-none overflow-hidden rounded",children:(0,n.jsx)(m.P.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-always-white/20 dark:via-always-white/10 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:1.5,ease:"easeInOut",repeat:1/0}})})})]}),(0,n.jsx)(e3,{placement:j,isDisabled:eE})]}),(0,n.jsx)(te,{}),eU]}),"bottom"!==j&&(0,n.jsx)("div",{className:"px-3 md:px-2",children:(0,n.jsx)(g.Q,{placement:j})}),"bottom"===j&&(0,n.jsx)(aw,{})]}),(0,n.jsx)(ah,{})]}):(0,n.jsxs)(aM,{children:[(0,n.jsx)(ab,{className:"bottom"===j?"h-[99px]":"h-[123px]"}),"bottom"===j&&(0,n.jsx)(aw,{})]})});ay.displayName="ChatInputContent";let aj=(0,x.forwardRef)((e,t)=>{let{disabled:a,placement:s,placeholder:l,onSubmit:i,onReady:r}=e;return(0,n.jsx)(eG.Xx,{placement:s,children:(0,n.jsx)(ay,{ref:t,disabled:a,placement:s,placeholder:l,onSubmit:i,onReady:r})})});aj.displayName="ChatInput";let ab=i.J.div(af()),aw=i.J.div(ag()),aM=i.J.fieldset(av())},38715:(e,t,a)=>{a.d(t,{V:()=>o});var s=a(54568);a(77101);var n=a(7620),l=a(67455),i=a(57383),r=a(74744);function o(e){let{uuid:t,syncSource:a,onRemove:o,isEditable:d}=e,{mutateAsync:c}=(0,l.Ql)(),u=(0,n.useCallback)(()=>{c(t),null==o||o()},[c,t,o]),{projectUuid:m}=(0,i.o)();return(0,s.jsx)(r.br,{location:"chat",projectUuid:m,syncSource:a,handleRemove:d?u:void 0,isEditable:d})}},38807:(e,t,a)=>{a.d(t,{Xx:()=>U,_9:()=>P,CH:()=>F,tl:()=>G});var s=a(54568),n=a(89256),l=a.n(n),i=a(7620),r=a(16310),o=a(8027),d=a(11515),c=a(43195),u=a(34059),m=a(91961),x=a(77101),p=a(85544),h=a(90119),f=a(46760),g=a(99965),v=a(81527),y=a(85717),j=a(71436),b=a(92947),w=a(80731),M=a(57383),k=a(85201),A=a(34211),_=a(33562),C=a(73212),N=a(65400),S=a(16430),I=a(20591),E=a.n(I);let T={includeScore:!0,isCaseSensitive:!1,ignoreLocation:!0,threshold:.4},D={path:null,inputMenuSearchQuery:"",setInputMenuSearchQuery:l(),inputMenuIsOpen:!1,setInputMenuIsOpen:l(),menuView:{rootItems:[],currentItems:[]},handleClickItem:l(),handleBack:l(),highlightedItemKey:null,setHighlightedItemKey:l(),animationDirection:"none"},O={...D,styleModalOpenWithScreen:null,setStyleModalOpenWithScreen:l(),createProjectModalIsOpen:null,setCreateProjectModalIsOpen:l(),githubModalIsOpen:!1,setGithubModalIsOpen:l(),gmailAuthModalIsOpen:!1,setGmailAuthModalIsOpen:l(),createPromptArgumentModalIsOpen:null,setCreatePromptArgumentModalIsOpen:l()},R={...D,mcpDirectoryModalIsOpen:!1,setMcpDirectoryModalIsOpen:l()},L=(0,i.createContext)(O),z=(0,i.createContext)(R),P=e=>{let{actions:t,rootItems:a,menuType:n,inputMenuIsOpen:l,setInputMenuIsOpen:r}=e,o=(0,i.useRef)(null),[d,m]=(0,i.useState)(null),[p,h]=(0,i.useState)(null),[g,j]=(0,i.useState)(""),b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!l&&e)return void r(!0);if(l&&!e){j("");let e=()=>{var e;M(null,!0),h(null),r(!1),null==(e=document.getElementById("input-".concat(n,"-menu-trigger")))||e.focus()};t.withDelay?setTimeout(e,200):e()}},M=(e,t)=>{t?o.current=e:o.current=d,m(e)},k=(()=>{if(d){let e=a.find(e=>e.key===d);if(e&&"children"in e)return e.children}return a})(),A=(e=>{let{actions:t,inputMenuSearchQuery:a,inputMenuIsOpen:n,pathItems:l,path:r,menuType:o}=e,d=(0,f.A)(),m=(0,i.useRef)(a),{handleSearchDrive:p,searchedDriveItems:h}=(e=>{let{path:t,actions:a,inputMenuSearchQuery:n,inputMenuIsOpen:l,menuType:r}=e,o="drive",d=(t===o||!t)&&l&&"plus"===r,c=(0,y.LP)(),[m,p]=(0,i.useState)([]),{recentDriveDocs:h}=(0,y.zH)(d),f=(0,i.useMemo)(()=>new S.A(h,{...T,keys:["title"]}),[h]);return c&&d?{handleSearchDrive:()=>{let e=n.toLowerCase();if(!e||!h)return[];p(f.search(e,{limit:t===o?10:5}).map(e=>({key:e.item.uri,type:"button",label:e.item.title||"",icon:(0,s.jsx)(u.A9,{type:x.v8.GDRIVE,variant:u.UF.DOCS,size:16}),onClick:()=>{a.createDriveSyncSource(e.item.uri)}})))},searchedDriveItems:m}:{handleSearchDrive:()=>[],searchedDriveItems:[]}})({path:r,actions:t,inputMenuSearchQuery:a,inputMenuIsOpen:n,menuType:o}),{handleSearchProjects:g,searchedProjectItems:j}=(e=>{let{path:t,actions:a,inputMenuSearchQuery:n,inputMenuIsOpen:l,menuType:r,pathItems:o}=e,d="projects",u=(0,w.K)(),m=o.map(e=>{let{key:t}=e;return t}).indexOf("projects")>-1||"projects"===t,x=!!(n&&m&&(t===d||!t)&&l&&u&&"plus"===r),[p,h]=(0,i.useState)([]),{data:f}=(0,v.CB)({enabled:x,limit:v.dx}),g=(0,i.useMemo)(()=>new S.A(f||[],{...T,keys:["name","description"]}),[f]);return x?{handleSearchProjects:()=>{let e=n.toLowerCase();if(!e||!f)return[];h(g.search(e,{limit:t===d?10:5}).map(e=>({type:"button",key:e.item.uuid,label:e.item.name,icon:(0,s.jsx)(c.JtL,{size:16}),onClick:()=>a.onSelectProject(e.item.uuid)})))},searchedProjectItems:p}:{handleSearchProjects:()=>[],searchedProjectItems:[]}})({path:r,actions:t,inputMenuSearchQuery:a,inputMenuIsOpen:n,menuType:o,pathItems:l}),{handleFilterMenuItems:b,filteredMenuItems:M}=(e=>{let{path:t,inputMenuSearchQuery:a,pathItems:s}=e,n=s.filter(e=>{let{menuItemHidden:t}=e;return!t}),[l,r]=(0,i.useState)([]);return"projects"===t||"drive"===t?{handleFilterMenuItems:()=>[],filteredMenuItems:[]}:{handleFilterMenuItems:()=>{let e=a.toLowerCase();if(!e)return n;let t=[];for(let e of n)t.push(e),!e.isDisabled&&"projects"!==e.key&&"drive"!==e.key&&"children"in e&&e.children&&t.push(...e.children);r(t.filter(t=>!t.nonSearchable&&"toggleAll"!==t.type&&"back"!==t.type&&"divider"!==t.type&&"string"==typeof t.label&&t.label.toLowerCase().includes(e)).slice(0,7))},filteredMenuItems:l}})({path:r,inputMenuSearchQuery:a,pathItems:l}),k=(0,i.useCallback)(()=>{b(),g(),p()},[b,g,p]),A=(0,i.useMemo)(()=>E()(()=>{k()},100),[k]);return((0,i.useEffect)(()=>{if(a&&n&&a!==m.current)return m.current=a,A(),()=>{A.cancel()}},[n,a,A]),M.length||j.length||h.length)?[M,j,h].reduce((e,t,a)=>[...e,...e.length&&t.length?[{key:"divider".concat(a+1),type:"divider",label:""}]:[],...t],[]):[{key:"loading",type:"button",label:d.formatMessage({defaultMessage:"No results found",id:"hX5PAbCTOR"}),icon:(0,s.jsx)(N.e,{size:16}),onClick:()=>void 0,isDisabled:!0}]})({actions:t,inputMenuSearchQuery:g,inputMenuIsOpen:l,pathItems:k,path:d,menuType:n}),_=g.trim().length?A:k,{handleClickItem:I,handleBack:D}=(e=>{let{currentItems:t,inputMenuIsOpen:a,setInputMenuIsOpen:s,inputMenuSearchQuery:n,setInputMenuSearchQuery:l,path:r,handleUpdatePath:o,highlightedItemKey:d,setHighlightedItemKey:c}=e,u=(0,i.useCallback)(e=>{if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type)s(!0),o(e.key,!0);else if("button"===e.type||"switch"===e.type||"toggle"===e.type||"option"===e.type){var t;null==(t=e.onClick)||t.call(e)}},[s,o]),m=(0,i.useCallback)(e=>{r&&(null==e||e.preventDefault(),o(null),c(r),(0,C.l)())},[r,c,o]),x=(0,i.useCallback)(e=>{let a,s=t.filter(e=>!["subheader","divider"].includes(e.type)&&!e.isDisabled&&!e.menuItemHidden),n=s.findIndex(e=>{let{key:t}=e;return t===d});a="ArrowUp"===e?n>0?n-1:s.length-1:n<s.length-1?n+1:0,c(s[a].key)},[t,d,c]),p=(0,i.useCallback)(e=>{var t,n,i;if(!a)return void u(e);if(!e.isDisabled){if(l(""),"back"===e.type)return void m();if("button"===e.type){null==(t=e.onClick)||t.call(e),e.skipCloseOnClick||s(!1);return}if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type){o(e.key),c(null),(0,C.l)();return}"option"===e.type&&(null==(n=e.onClick)||n.call(e),e.skipCloseOnClick||s(!1,{withDelay:!0})),("toggleAll"===e.type||"toggle"===e.type||"switch"===e.type)&&(null==(i=e.onClick)||i.call(e),(0,C.l)())}},[m,u,o,a,l,s,c]),h=(0,i.useCallback)((e,a)=>{if(!d)return;let s=t.find(e=>{let{key:t}=e;return t===d});s&&("Enter"===e||["optionGroup","toggleGroup","buttonGroup"].includes(s.type))&&(a.preventDefault(),p(s))},[d,t,p]);return(0,i.useEffect)(()=>{if(!a)return;let e=e=>{"Tab"===e.key?e.preventDefault():"Escape"===e.key?(e.preventDefault(),s(!1)):"ArrowUp"===e.key||"ArrowDown"===e.key?(e.preventDefault(),x(e.key)):"ArrowRight"===e.key||"Enter"===e.key?h(e.key,e):"ArrowLeft"!==e.key||n||m(e)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a,s,n,x,h,m]),{handleClickItem:p,handleBack:m}})({currentItems:_,inputMenuIsOpen:l,setInputMenuIsOpen:b,inputMenuSearchQuery:g,setInputMenuSearchQuery:j,path:d,handleUpdatePath:M,highlightedItemKey:p,setHighlightedItemKey:h}),O=o.current&&!d?"back":!o.current&&d?"forward":"none";return{path:d,inputMenuSearchQuery:g,setInputMenuSearchQuery:j,inputMenuIsOpen:l,setInputMenuIsOpen:b,menuView:{rootItems:a,currentItems:_},handleClickItem:I,handleBack:D,highlightedItemKey:p,setHighlightedItemKey:h,animationDirection:O}};function U(e){let{placement:t,children:a}=e,[n,l]=(0,i.useState)(!1),[C,N]=(0,i.useState)(!1),[S,I]=(0,i.useState)(null),[E,T]=(0,i.useState)(!1),[D,O]=(0,i.useState)(!1),[R,U]=(0,i.useState)(!1),[F,G]=(0,i.useState)(null),[Y,H]=(0,i.useState)(null),V=(0,_.Cn)({setMcpDirectoryModalIsOpen:U,setStyleModalOpenWithScreen:G,setCreateProjectModalIsOpen:I,setGithubModalIsOpen:T,setGmailAuthModalIsOpen:O,setCreatePromptArgumentModalIsOpen:H}),B=(e=>{let{placement:t,actions:a,inputMenuIsOpen:n}=e,l=(0,f.A)(),i=(e=>{let{actions:t}=e,a=(0,f.A)();return(0,h.V)()||(0,m.fJ)()?null:{key:p.xd.ADD_SCREENSHOT,type:"button",icon:(0,s.jsx)(c.i7d,{size:16}),label:a.formatMessage({defaultMessage:"Take a screenshot",id:"aTaOpCB71M"}),onClick:t.onAddScreenshot}})({actions:a}),r=(e=>{let{actions:t}=e,a=(0,f.A)();return(0,j.Cq)()?{key:p.xd.GITHUB,type:"button",icon:(0,s.jsx)(u.A9,{type:x.v8.GITHUB,size:16}),label:a.formatMessage({defaultMessage:"Add from {github}",id:"h3J3E4bRfj"},{github:"GitHub"}),onClick:t.openGithubModal}:null})({actions:a}),C=(e=>{let{actions:t,inputMenuIsOpen:a}=e,n=(0,f.A)(),l=(0,k.Hd)(),i=(0,y.LP)(),{isDriveAuthenticated:r,initDriveAuth:o}=(0,y.cI)(),{recentDriveDocs:d,isLoading:c}=(0,y.zH)(a);if(!i)return null;let m=n.formatMessage({defaultMessage:"Add from {drive}",id:"hwJ50OkM/9"},{drive:"Google Drive"}),h={key:p.xd.DRIVE,icon:(0,s.jsx)(u.A9,{type:x.v8.GDRIVE,size:16}),label:m};if(!r)return{...h,type:"button",isExternal:!0,secondaryText:n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:o};let g=c?[{key:"drive-loading",type:"button",label:n.formatMessage({defaultMessage:"{drive} documents loading...",id:"PjuSZ/7RIb"},{drive:"Drive"}),isDisabled:!0}]:d.length?d.slice(0,8).map(e=>{var a;return{key:e.uri,type:"button",label:null!=(a=e.title)?a:"Untitled",icon:(0,s.jsx)(u.A9,{type:x.v8.GDRIVE,variant:u.UF.DOCS,size:16}),onClick:()=>{t.createDriveSyncSource(e.uri)}}}):[{key:"empty",type:"button",label:n.formatMessage({defaultMessage:"No recent {drive} documents",id:"XepM9W1Mo/"},{drive:"Drive"}),isDisabled:!0}];return{...h,type:"buttonGroup",children:[...l?[]:[{type:"back",key:"drive-back",label:m}],...g]}})({actions:a,inputMenuIsOpen:n}),N=(e=>{let{inputMenuIsOpen:t,actions:a}=e,n=(0,f.A)(),l=(0,k.Hd)(),{projectUuid:i,isProjectLocked:r}=(0,M.o)(),o=(0,w.K)(),{data:d}=(0,v.CB)({enabled:t&&o,limit:8}),{data:u}=(0,v.fo)(i),m=(null==d?void 0:d.slice(0,8).map(e=>({key:e.uuid,type:"option",label:e.name,onClick:()=>a.onSelectProject(e.uuid),icon:(0,s.jsx)(c.JtL,{size:16}),isChecked:e.uuid===i})))||[];if(r||!o)return null;let x=n.formatMessage({defaultMessage:"Use a project",id:"H/dsl+Px2v"});return{key:p.xd.PROJECTS,type:"optionGroup",icon:(0,s.jsx)(c.JtL,{size:16}),label:x,secondaryText:null==u?void 0:u.name,children:[...l?[]:[{type:"back",key:"projects-back",label:x}],...m,{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,s.jsx)(c.OMN,{size:16}),label:n.formatMessage({defaultMessage:"Start a new project",id:"0y7bg6nA29"}),onClick:()=>a.onCreateProject(!1),nonSearchable:!0}],indicatorActive:!!u}})({actions:a,inputMenuIsOpen:n});(e=>{let{inputMenuIsOpen:t,actions:a}=e,n=(0,f.A)(),l=(0,k.Hd)(),{isProjectLocked:i,beamChatUuid:r,isNewBeamChat:o}=(0,M.o)(),d=((0,A.f)(),(0,w.K)()),{data:u}=(0,v.CB)({enabled:t&&d,limit:8,isBeam:!0}),m=[...(null==u?void 0:u.slice(0,8).map(e=>({key:"beam-".concat(e.uuid),type:"option",label:e.name,onClick:()=>{a.onSelectBeamChat(e.uuid)},icon:(0,s.jsx)(c.g6n,{size:16}),isChecked:e.uuid===r})))||[]];if(i||!d)return;let x=n.formatMessage({defaultMessage:"Start a beam chat",id:"6SS0ZNAywq"}),p=r?null==u?void 0:u.find(e=>e.uuid===r):null;return c.g6n,null==p||p.name,[...l?[]:[{type:"back",key:"beam-chat-back",label:x}],...m,(c.OMN,n.formatMessage({defaultMessage:"Start a new beam chat",id:"9VyHCfyJ8B"}))]})({actions:a,inputMenuIsOpen:n});let S=(e=>{let{actions:t}=e,a=(0,f.A)(),{servers:n}=(0,b.gt)(),l=(0,g.R4)(),i=(0,g.vW)();return n.filter(e=>e.prompts.length>0||e.resources.length>0).map(e=>{let n=e.prompts.map(a=>({key:"prompt-".concat(e.name,"-").concat(a.name),type:"button",icon:(0,s.jsx)(c.ryu,{size:16}),label:a.name,onClick:()=>{var s;return(null==(s=a.arguments)?void 0:s.length)?t.onEnterPromptArguments(a,e.uuid,e.client):void i({prompt:a,args:{},serverUuid:e.uuid,client:e.client})}})),r=e.resources.map(t=>({key:"resource-".concat(e.name,"-").concat(t.uri),type:"button",icon:(0,s.jsx)(c.ZHH,{size:16}),label:t.name,onClick:()=>void l({resource:t,serverUuid:e.uuid,client:e.client})}));return{key:"mcp-server-".concat(e.name),type:"buttonGroup",label:a.formatMessage({defaultMessage:"Add from {server}",id:"qEj6u51OfR"},{server:e.name}),icon:(0,s.jsx)(d.d,{url:e.url,fallbackSvg:(0,s.jsx)(o.B,{letter:e.name,size:16}),size:16}),children:[...n,...r]}})})({actions:a});return[{key:p.xd.UPLOAD,type:"button",icon:(0,s.jsx)(c.o3O,{size:16}),label:l.formatMessage({defaultMessage:"Upload a file",id:"Zc9xq9TzDD"}),onClick:()=>(0,_.U_)(t)},...i?[i]:[],...r?[r]:[],...C?[C]:[],...S,...N?[{key:"divider1",type:"divider",label:""},N]:[]]})({placement:t,actions:V,inputMenuIsOpen:n}),K=P({actions:V,rootItems:B,menuType:"plus",inputMenuIsOpen:n,setInputMenuIsOpen:l}),W=(0,r.ey)({actions:V}),J=P({actions:V,rootItems:W,menuType:"tools",inputMenuIsOpen:C,setInputMenuIsOpen:N});return(0,s.jsx)(L.Provider,{value:{...K,styleModalOpenWithScreen:F,setStyleModalOpenWithScreen:G,createProjectModalIsOpen:S,setCreateProjectModalIsOpen:I,githubModalIsOpen:E,setGithubModalIsOpen:T,gmailAuthModalIsOpen:D,setGmailAuthModalIsOpen:O,createPromptArgumentModalIsOpen:Y,setCreatePromptArgumentModalIsOpen:H},children:(0,s.jsx)(z.Provider,{value:{...J,mcpDirectoryModalIsOpen:R,setMcpDirectoryModalIsOpen:U},children:a})})}function F(){return(0,i.useContext)(L)}function G(){return(0,i.useContext)(z)}},40359:(e,t,a)=>{a.d(t,{g:()=>n});var s=a(54568);let n=e=>{let{height:t,className:a}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 139 34",className:a,height:t,fill:"currentColor","aria-label":"Claude",children:(0,s.jsx)("path",{d:"M18.07 30.79c-5.02 0-8.46-2.8-10.08-7.11a19.2 19.2 0 0 1-1.22-7.04C6.77 9.41 10 4.4 17.16 4.4c4.82 0 7.78 2.1 9.48 7.1h2.06l-.28-6.9c-2.88-1.86-6.48-2.81-10.87-2.81-6.16 0-11.41 2.77-14.34 7.74A16.77 16.77 0 0 0 1 18.2c0 5.53 2.6 10.42 7.5 13.15a17.51 17.51 0 0 0 8.74 2.06c4.78 0 8.57-.91 11.93-2.5l.87-7.62h-2.1c-1.26 3.48-2.76 5.57-5.25 6.68-1.22.55-2.76.83-4.62.83Zm21.65-26.4.2-3.39H38.5l-6.33 1.9v1.02l2.8 1.3v23.79c0 1.62-.82 1.98-3 2.25V33h10.75v-1.74c-2.17-.27-3-.63-3-2.25V4.4Zm42.75 29h.83l7.27-1.38v-1.78l-1.03-.07c-1.7-.16-2.13-.52-2.13-1.9V15.58l.2-4.07h-1.15l-6.87.99v1.73l.67.12c1.85.28 2.4.8 2.4 2.1v11.3C80.9 29.13 79.2 30 77.19 30c-2.26 0-3.64-1.15-3.64-3.8V15.58l.2-4.07h-1.19l-6.87.99v1.73l.71.12c1.86.28 2.41.8 2.41 2.1v10.43c0 4.42 2.49 6.52 6.48 6.52 3.04 0 5.53-1.62 7.39-3.88l-.2 3.88Zm-20-14.06c0-5.65-3-7.82-8.4-7.82-4.79 0-8.27 1.97-8.27 5.25 0 1 .36 1.74 1.07 2.25l3.64-.47c-.16-1.1-.24-1.78-.24-2.05 0-1.86.99-2.8 3-2.8 2.97 0 4.47 2.09 4.47 5.44v1.11l-7.51 2.25c-2.49.67-3.91 1.27-4.86 2.65a5 5 0 0 0-.71 2.8c0 3.2 2.21 5.46 5.97 5.46 2.72 0 5.13-1.23 7.23-3.56.75 2.33 1.9 3.56 3.95 3.56 1.66 0 3.16-.68 4.5-1.98l-.4-1.38c-.59.16-1.14.23-1.73.23-1.15 0-1.7-.9-1.7-2.68v-8.26Zm-9.6 10.87c-2.05 0-3.31-1.19-3.31-3.28 0-1.43.67-2.26 2.1-2.73l6.08-1.94v5.85c-1.94 1.46-3.08 2.1-4.86 2.1Zm63.3 1.81v-1.78l-1.02-.07c-1.7-.16-2.14-.52-2.14-1.9V4.4l.2-3.4h-1.42l-6.32 1.9v1.02l2.8 1.3v7.83a8.84 8.84 0 0 0-5.37-1.54c-6.28 0-11.18 4.78-11.18 11.93 0 5.89 3.51 9.96 9.32 9.96 3 0 5.61-1.47 7.23-3.72l-.2 3.72h.83l7.27-1.39Zm-13.15-18.13c3 0 5.25 1.74 5.25 4.94v9a7.2 7.2 0 0 1-5.21 2.1c-4.31 0-6.48-3.4-6.48-7.94 0-5.1 2.48-8.1 6.44-8.1Zm28.52 4.5c-.55-2.64-2.17-4.15-4.42-4.15-3.36 0-5.7 2.53-5.7 6.17 0 5.37 2.85 8.85 7.44 8.85a8.6 8.6 0 0 0 7.38-4.35l1.35.36c-.6 4.66-4.82 8.14-10 8.14-6.08 0-10.27-4.5-10.27-10.9 0-6.45 4.54-11 10.63-11 4.54 0 7.74 2.73 8.77 7.48l-15.84 4.85V21.7l10.66-3.32Z"})})}},42824:(e,t,a)=>{a.d(t,{U:()=>n});var s=a(56147);let n=e=>{let t=(0,s.ED)(e),{maxKbTokens:a}=(0,s.AO)();return void 0!==t&&t>a}},45317:(e,t,a)=>{a.d(t,{x:()=>l});var s=a(42977);function n(){let e=(0,s._)(["\n  font-normal\n  text-[0.65rem]\n  sm:text-xs\n  w-full\n  flex\n  gap-1.5\n  items-center\n  justify-between\n"]);return n=function(){return e},e}let l=a(90510).J.div(n())},45483:(e,t,a)=>{a.d(t,{E:()=>x,I:()=>m});var s=a(7726),n=a(98518),l=a(1761),i=a(87606),r=a(76088),o=a.n(r),d=a(62942),c=a(7620),u=a(47492);let m=()=>{let e="new-conversation-params-for-navigation",t=(0,i.useQueryClient)(),a=(0,c.useCallback)(()=>{let t=localStorage.getItem(e);if(!t)return{};try{let e=JSON.parse(t);return o()(e,e=>Date.now()-e.created_at<6e4)}catch(t){localStorage.removeItem(e)}return{}},[]);return{prepareNewConversation:(0,c.useCallback)((s,n)=>{let l={created_at:Date.now(),...n};t.setQueryData([e,s],l);let i=a();i[s]=l;try{localStorage.setItem(e,JSON.stringify(i))}catch(e){}},[t,a]),getCreateParamsForConvo:(0,c.useCallback)(s=>{let n=a(),l=t.getQueryData([e,s])||n[s];t.removeQueries({queryKey:[e,s]});let i=o()(n,(e,t)=>t!==s);return localStorage.setItem(e,JSON.stringify(i)),l},[t,a])}};function x(){var e;let{setTemporaryConversationUUID:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,n.st)(),{data:i}=(0,s.Fn)(),{mutateAsync:r}=(0,s.CW)(),[o,x]=(0,u.d)(),{prepareNewConversation:p}=m(),{account:h}=(0,l.YL)(),f=(0,d.useRouter)();return(0,c.useCallback)(async e=>{var s;let{model:n,project_uuid:l,include_conversation_preferences:d,paprika_mode:c,compass_mode:u,create_mode:m,name:g,is_temporary:v,is_new_beam_chat:y,beam_chat_uuid:j}=e,b=r({uuid:o,name:null!=g?g:"",model:n,project_uuid:l,include_conversation_preferences:d,paprika_mode:c,compass_mode:u,create_mode:m,is_temporary:v,is_new_beam_chat:y,beam_chat_uuid:j});if(p(o,e),await b,v)null==t||t(o);else if((null==h||null==(s=h.settings)?void 0:s.has_finished_claudeai_onboarding)===!1){let e=new URLSearchParams;e.append("returnTo","/chat/".concat(o));let t="/onboarding?".concat(e.toString());f.push(t)}else f.push("/chat/".concat(o));return x(),(null==i?void 0:i.is_first_conversation)&&await a.track({event_key:"chat.conversation.first_conversation_created",surface:"claude.ai"}),{uuid:o}},[r,o,x,i,a,f,p,null==h||null==(e=h.settings)?void 0:e.has_finished_claudeai_onboarding,t])}},47492:(e,t,a)=>{a.d(t,{d:()=>i});var s=a(75632),n=a(7620);let l={current:(0,s.N)()};function i(){let e=(0,n.useRef)(l);return[e.current.current,()=>{e.current.current=(0,s.N)()}]}},47959:(e,t,a)=>{a.d(t,{h:()=>o});var s=a(54568),n=a(10158),l=a(1761),i=a(41417);a(7620);var r=a(62971);function o(){let{allowSelfUpgrade:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(function(e){let t=(0,l.UC)(),a=(0,l.wi)(),s=(0,l.bu)(),i=(0,l.tP)();return(0,n.fZ)()?(i||t)&&e?a||s||i?!t&&s?"subscribe-max":!t&&i?"subscribe-max-20x":"subscribe":"subscribe-pro-only":"none":"contact-sales"}(e)){case"contact-sales":return(0,s.jsx)(d,{});case"subscribe":return(0,s.jsx)(c,{});case"subscribe-pro-only":return(0,s.jsx)(u,{});case"subscribe-max":return(0,s.jsx)(m,{});case"subscribe-max-20x":return(0,s.jsx)(x,{});case"none":return null}}function d(){let{websiteBaseUrl:e}=(0,n._r)();return(0,s.jsx)(i.$,{href:"".concat(e,"/contact-sales"),children:(0,s.jsx)(r.A,{defaultMessage:"Contact us to upgrade",id:"VifKcG4Va9"})})}function c(){return(0,s.jsx)(i.$,{href:"/upgrade?hide_free=true",children:(0,s.jsx)(r.A,{defaultMessage:"Upgrade plan",id:"c5+JRMBv/Y"})})}function u(){return(0,s.jsx)(i.$,{href:"/upgrade/pro",children:(0,s.jsx)(r.A,{defaultMessage:"Upgrade plan",id:"c5+JRMBv/Y"})})}function m(){return(0,s.jsx)(i.$,{href:"/upgrade?hide_pro=true",children:(0,s.jsx)(r.A,{defaultMessage:"Subscribe to Max",id:"8ACH3Vf732"})})}function x(){return(0,s.jsx)(i.$,{href:"/upgrade",children:(0,s.jsx)(r.A,{defaultMessage:"Increase usage",id:"Lc0QnIgRuR"})})}},49077:(e,t,a)=>{a.d(t,{V:()=>o});var s=a(54568),n=a(40359),l=a(29242),i=a(27062),r=a(64979);let o=e=>{let{model:t,hasMultiModalContent:a,hideModelNameLogo:o}=e,{value:d}=(0,i.fS)("claude_ai_redacted_model_name_reveal"),c=t.name.replace("Claude",""),u=(0,r.t)(c,t.model,a),m=!d&&c.startsWith("\uD83E\uDD2B")?(0,s.jsx)(l.m,{tooltipContent:u,children:(0,s.jsx)("span",{children:"\uD83E\uDD2B"})}):u;return(0,s.jsxs)("div",{className:"font-claude-response inline-flex gap-[3px] text-[14px] h-[14px] leading-none items-baseline",children:[!o&&(0,s.jsx)(n.g,{className:"claude-logo-model-selector block translate-y-[0.5px]",height:11.5}),(0,s.jsx)("div",{className:"flex items-center gap-[4px]",children:(0,s.jsx)("div",{className:"whitespace-nowrap tracking-tight select-none",children:m})})]})}},49194:(e,t,a)=>{a.d(t,{X:()=>s});function s(e){return"default"===e.type?e.key:e.uuid}},50163:(e,t,a)=>{a.d(t,{L:()=>l,NuxProvider:()=>i});var s=a(54568),n=a(7620);let l=(0,n.createContext)(null);function i(e){let{children:t}=e,[a,i]=(0,n.useState)({items:{},currentlyShowing:null}),o=(0,n.useCallback)((e,t)=>{i(a=>{if(a.items[e])return a;let s={...a.items,[e]:t};return{items:s,currentlyShowing:r(s,!0)}})},[]),d=(0,n.useCallback)(e=>{i(t=>{let{[e]:a,...s}=t.items;return{items:s,currentlyShowing:t.currentlyShowing===e?r(s):t.currentlyShowing}})},[]),c={items:a.items,currentlyShowing:a.currentlyShowing,registerNux:o,unregisterNux:d};return(0,s.jsx)(l.Provider,{value:c,children:t})}let r=(e,t)=>{let a=Object.entries(e).sort((e,t)=>{let a=e[1].priority||0,s=t[1].priority||0;return a!==s?s-a:new Date(t[1].dateAdded).getTime()-new Date(e[1].dateAdded).getTime()});if(t){var s,n;return null!=(n=null==(s=a[0])?void 0:s[0])?n:null}for(let[e,t]of a)if(t.showAfterOthersDismiss)return e;return null}},51699:(e,t,a)=>{a.d(t,{Kk:()=>b});var s=a(54568),n=a(1761),l=a(9537),i=a(41417),r=a(77101),o=a(57622),d=a(68736),c=a(21036),u=a(32987),m=a(7620),x=a(62971),p=a(46760),h=a(92075),f=a(81527),g=a(32805),v=a(60629);let y=(0,s.jsx)(x.A,{defaultMessage:"Everyone in your organization can view and use this project",id:"o6dyBu92Ad"}),j=(0,s.jsx)(x.A,{defaultMessage:"Only invited members can view and use this project",id:"r65HKpZU8I"});function b(e){var t,a,b,w,M,k;let{syncSources:A=[],onProjectCreated:_,onError:C,onCancel:N,strings:S}=e,I=(0,p.A)(),E=(0,n.mV)(),T=(0,n.h0)(),D=(0,c.useLayer)("trials_freemium").get("free_project",!1),O=(0,v.AI)(),{customInstructions:R,type:L,subtype:z}=null!=O?O:{},[P,U]=(0,m.useState)({name:"",description:null!=(t=S.createProjectDescriptionDefault)?t:"",type:L,subtype:z,is_private:!0}),[F,G]=(0,m.useState)({}),[Y,H]=(0,m.useState)(!1),V=A.length>0,B=A.some(e=>e.type===r.v8.GITHUB),K=A.some(e=>e.type===r.v8.GDRIVE),W=B&&K?(0,s.jsx)(x.A,{defaultMessage:"Github and GDrive attachments can only be added to private projects",id:"rqNebqAfPF"}):B?(0,s.jsx)(x.A,{defaultMessage:"Github attachments can only be added to private projects",id:"eyujXWQfg4"}):K?(0,s.jsx)(x.A,{defaultMessage:"GDrive attachments can only be added to private projects",id:"DMBgAV43lL"}):(0,s.jsx)(x.A,{defaultMessage:"Some of these attachments can only be added to private projects",id:"2ssKO1VReL"}),{mutateAsync:J}=(0,f.bL)(),{activeOrganization:q}=(0,n.YL)(),{data:X}=(0,f.BN)(),{data:$,isLoading:Z}=(0,f.PL)(),{data:Q}=(0,h.q)(),ee=Q&&!V,et=!Z&&(null==$?void 0:$.count)===0,ea=e=>t=>{U(a=>({...a,[e]:t.target.value})),G(t=>({...t,[e]:null}))},es=e=>{U(t=>({...t,is_private:e.target.checked&&"private"===e.target.value}))},en=async e=>{if(e.preventDefault(),!Y&&(()=>{let e={};return""===P.name.trim()&&(e.name=I.formatMessage({defaultMessage:"Project name is required",id:"n5cqkMmIMW"})),G(e),0===Object.keys(e).length})()){H(!0);try{let e={...P};R&&(e.prompt_template=R.replaceAll("{{PROJECT_NAME}}",P.name));let t=await J(e);_(t)}catch(e){C(e)}finally{H(!1)}}};return(0,s.jsxs)("form",{className:"grid grid-cols-1 gap-4",onSubmit:e=>en(e),children:[et&&!O&&(0,s.jsxs)("div",{className:"bg-bg-300 border-border-400/10 text-text-300 flex w-full flex-col items-start justify-start gap-2 rounded-xl border px-5 pb-5 pt-4 text-sm",children:[(0,s.jsx)("div",{className:"flex items-center gap-1 font-medium",children:(0,s.jsx)(x.A,{defaultMessage:"How to use projects",id:"moKJkVk/qB"})}),E?(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(x.A,{defaultMessage:"Use Projects with your team to do things like:",id:"fcUpqajVgl"})}),(0,s.jsxs)("ul",{className:"list-disc pl-4",children:[(0,s.jsx)("li",{children:(0,s.jsx)(x.A,{defaultMessage:"Query and analyze information about customers, sales calls, and project plans",id:"1YyB53/KOc"})}),(0,s.jsx)("li",{children:(0,s.jsx)(x.A,{defaultMessage:"Upload files from your codebase to understand, improve, and contribute",id:"HXj87AQH0P"})}),(0,s.jsx)("li",{children:(0,s.jsx)(x.A,{defaultMessage:"Generate analysis and reports from one consistent set of materials",id:"3XvEQYrcUv"})}),(0,s.jsx)("li",{children:(0,s.jsx)(x.A,{defaultMessage:"Create content informed by company policies and documentation",id:"HrODk029zr"})})]}),(0,s.jsx)("p",{children:(0,s.jsx)(x.A,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}):(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{children:(0,s.jsx)(x.A,{defaultMessage:"Projects help organize your work and leverage knowledge across multiple conversations. Upload docs, code, and files to create themed collections that Claude can reference again and again.",id:"7HFalNigyO"})}),(0,s.jsx)("p",{children:(0,s.jsx)(x.A,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}),D&&!T&&(0,s.jsx)("p",{children:(0,s.jsx)(x.A,{defaultMessage:"This is a temporary trial project that may be removed in the future. To keep your projects permanently, consider <link>upgrading to a paid plan</link>.",id:"LhxFkbDbYX",values:{link:e=>(0,s.jsx)(i.$,{variant:"underline",size:"unset",href:"/upgrade",className:"underline",children:e})}})}),X&&(0,s.jsx)("div",{children:(0,s.jsx)(x.A,{defaultMessage:"Curious to learn more? <link>Try an example project</link>",id:"+AcqvUzRry",values:{link:e=>(0,s.jsx)(i.$,{variant:"underline",size:"unset",href:"/project/".concat(X),children:e})}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l.ks,{autoFocus:!0,name:"name",className:"w-full",label:null!=(a=S.createProjectNameLabel)?a:I.formatMessage({defaultMessage:"What are you working on?",id:"R2IogQsIBI"}),placeholder:null!=(b=S.createProjectNamePlaceholder)?b:I.formatMessage({defaultMessage:"Name your project",id:"BtIbm/e/WX"}),size:"lg",onChange:ea("name"),error:!!F.name,"data-1p-ignore":!0}),F.name&&(0,s.jsx)("div",{className:"text-danger-000 mt-1 text-right text-xs font-medium",children:F.name})]}),!O&&(0,s.jsx)("div",{children:(0,s.jsx)(l.fs,{name:"description",className:"w-full",label:null!=(w=S.createProjectDescriptionLabel)?w:I.formatMessage({defaultMessage:"What are you trying to achieve?",id:"RPsTh+NBxY"}),placeholder:null!=(M=S.createProjectDescriptionPlaceholder)?M:I.formatMessage({defaultMessage:"Describe your project, goals, subject, etc...",id:"WStTnUWlP8"}),minRows:3,onChange:ea("description"),error:F.description})}),E?(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("div",{className:"mb-2 text-sm font-medium",children:(0,s.jsx)(x.A,{defaultMessage:"Visibility",id:"JAkIqbzRj5"})}),(0,s.jsxs)("label",{className:(0,u.A)("mb-2 flex w-full gap-2",!ee&&"opacity-40"),children:[(0,s.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"open",checked:!P.is_private,onChange:es,disabled:!ee}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)(o.m,{size:16,className:"-mt-1 mr-1 inline-block"}),null!=(k=null==q?void 0:q.name)?k:(0,s.jsx)(x.A,{defaultMessage:"Organization",id:"K56Dims7Up"})]}),(0,s.jsx)("div",{className:"text-text-300 text-xs",children:Q?V?W:y:(0,s.jsx)(x.A,{defaultMessage:"Public projects are disabled by your organization",id:"c2HBgZtgDR"})})]})]}),(0,s.jsxs)("label",{className:"flex w-full gap-2",children:[(0,s.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"private",checked:P.is_private,onChange:es}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)(d.W,{size:16,className:"-mt-1 mr-1 inline-block"}),(0,s.jsx)(x.A,{defaultMessage:"Private",id:"viXE3205/2"})]}),(0,s.jsx)("div",{className:"text-text-300 text-xs",children:j})]})]})]}):null,(0,s.jsx)("div",{className:"mt-2 flex justify-end",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.$,{onClick:N,href:N?void 0:"/projects",variant:"secondary",disabled:Y,children:(0,s.jsx)(x.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,s.jsx)(g.i,{children:(0,s.jsx)(i.$,{type:"submit",loading:Y,children:(0,s.jsx)(x.A,{defaultMessage:"Create project",id:"VUN1K7kSzC"})})})]})})]})}},53600:(e,t,a)=>{a.d(t,{R:()=>m,V:()=>u});var s=a(54568),n=a(89674),l=a(91961),i=a(46612),r=a(72638),o=a(89598),d=a(7620);let c=(0,d.createContext)({isExpanded:!1,setIsExpanded:()=>void 0,closeSidebarOnMobile:()=>void 0,isMobile:!1,setForceMobileLayout:()=>void 0});function u(){return(0,d.useContext)(c)}function m(e){let{children:t}=e,[a,u]=(0,n.j)(i.eT.SIDEBAR_PINNED,!1),[m,x]=(0,n.j)(i.eT.SIDEBAR_VISIBLE_ON_LOAD,!1),{width:p}=(0,r.l)(),[h,f]=d.useState(!1),g=h||(0===p?!m:p<1024),[v,y]=d.useState(m&&a);(0,o.M)("keydown",e=>{var t,a;let s=(0,l.cX)()?e.metaKey:e.ctrlKey;if((null==(t=e.key)?void 0:t.toLowerCase())==="."&&s&&(e.preventDefault(),y(e=>!e)),"Escape"===e.key&&v&&(e.preventDefault(),y(!1)),(null==(a=e.key)?void 0:a.toLowerCase())==="u"&&s){let t=document.getElementById("chat-input-file-upload-onpage")||document.getElementById("chat-input-file-upload-modal")||document.getElementById("chat-input-file-upload-bottom");t instanceof HTMLInputElement&&(e.preventDefault(),t.click())}});let j=(0,d.useMemo)(()=>({isExpanded:v,setIsExpanded:e=>{y(e),g||u(e)},closeSidebarOnMobile:()=>{g&&v&&y(!1)},isMobile:g,setForceMobileLayout:f}),[v,y,g,u,f]);return(0,d.useEffect)(()=>{g?(x(!1),y(!1)):(x(!0),y(a))},[g,x,y,a]),(0,s.jsx)(c.Provider,{value:j,children:t})}},53685:(e,t,a)=>{a.d(t,{$z:()=>o,cY:()=>r});var s=a(77186),n=a(1761),l=a(27062),i=a(21036);function r(){let e=(0,i.useLayer)("frontend"),{value:t}=(0,l.fS)("chat_suggestion_chips_enabled"),a=e.get("chat_suggestion_chips",!1);return t||a}function o(e){let{mutateAsync:t,enabled:a}=function(){let{activeOrganization:e}=(0,n.YL)(),{value:t}=(0,l.fS)("chat_autocomplete"),a=(0,s.L2)("/api/organizations/".concat(null==e?void 0:e.uuid,"/dust/chat_autocomplete"),"POST",{enabled:t,onError:()=>{console.warn("Failed to fetch completion")},meta:{noToast:!0}});return{mutateAsync:a.mutateAsync,isPending:a.isPending,isIdle:a.isIdle,enabled:t}}();return{fetchInputAutocompletion:async s=>{if(!a||!e)return"";let[n,l]=(await t({conversationUUID:null!=e?e:"",prompt:s})).prompt.split("\n").map(e=>e.trim());return"Yes"===n?" "===s[s.length-1]?l||"":" "+(l||""):"No"===n&&l||""}}}},56273:(e,t,a)=>{a.d(t,{u:()=>u,i:()=>m});var s=a(54568),n=a(89256),l=a.n(n),i=a(7620);function r(e,t){switch(t.type){case"OPEN_COMPASS_STATUS":return{...e,selectedItem:{type:"compass",data:t.data}};case"SELECT_ATTACHMENT":return{...e,selectedItem:{type:"attachment",attachment:t.attachment}};case"SELECT_ARTIFACT":return{...e,selectedItem:{type:"artifact",id:t.id,versionUUID:t.versionUUID}};case"SELECT_DOC":return{...e,selectedItem:{type:"doc",id:t.id}};case"SELECT_FILE":return{...e,selectedItem:{type:"file",path:t.path,toolType:t.toolType,messageId:t.messageId}};case"CLEAR_SELECTED":return{...e,selectedItem:null,activeMessageUUID:void 0};case"SET_ACTIVE_MESSAGE_UUID":return{...e,activeMessageUUID:t.uuid};case"UPDATE_ARTIFACTS":return{...e,artifacts:t.artifacts};case"UPDATE_ATTACHMENTS":return{...e,attachments:t.attachments};case"UPDATE_FILES":return{...e,files:t.files};case"UPDATE_SYNC_SOURCES":return{...e,syncSources:t.syncSources};default:return e}}let o={selectedItem:null,artifacts:{},attachments:[],files:[],syncSources:[],activeMessageUUID:void 0,conversationUUID:void 0},d={chatResourceState:o,dispatchChatResource:l()},c=(0,i.createContext)(d);function u(e){let{children:t,conversationUUID:a}=e,[n,l]=(0,i.useReducer)(r,{...o,conversationUUID:a});return(0,s.jsx)(c.Provider,{value:{chatResourceState:n,dispatchChatResource:l},children:t})}function m(){return(0,i.useContext)(c)}},56704:(e,t,a)=>{a.d(t,{CD:()=>o});var s=a(77186),n=a(1761),l=a(71473),i=a(77101),r=a(85717);let o=()=>{let e=(0,r.$f)(),t=(0,r.vT)(),a=(0,r.K6)(),{data:s}=d(i.v8.GDRIVE),n=null==s?void 0:s.state;return!!(e&&t&&a&&n&&[i.I5.CREATED,i.I5.UPDATING,i.I5.PENDING].includes(n))},d=e=>{let{account:t,activeOrganization:a}=(0,n.YL)(),r=null==t?void 0:t.uuid,o=null==a?void 0:a.uuid;return(0,s.Sk)("/api/organizations/".concat(o,"/sync/ingestion/").concat(e,"/progress"),{queryKey:[l.hx,{orgUuid:o,accountUuid:r,syncSourceType:e}],enabled:!!a,refetchInterval:e=>{let t;return!!(e.state.data&&(t=e.state.data.state,[i.I5.CREATED,i.I5.PENDING,i.I5.UPDATING].includes(t)))&&6e4},meta:{noToast:!0}})}},59296:(e,t,a)=>{a.d(t,{Q:()=>eV,I:()=>eH});var s=a(54568),n=a(85644),l=a(9896),i=a(98518),r=a(1761),o=a(46612),d=a(23661),c=a(27062),u=a(77101),m=a(90119),x=a(10097),p=a(7620),h=a(62971),f=a(34116),g=a(52909),v=a(85717),y=a(92947),j=a(91768),b=a(56704),w=a(56147),M=a(56273),k=a(38807),A=a(32987),_=a(49645),C=a(37463);function N(e){let{warning:t,placement:a,theme:n,onClick:l}=e,i=(0,A.A)("w-full border-0.5 relative z-[5] px-3.5","bottom"===a?"-mb-1 rounded-t-xl border-b-0 pb-2.5 pt-2":"-mb-1 -mt-1 rounded-b-xl border-t-0 pb-2 pt-2.5",{"bg-danger-900 border-danger-100/20":"danger"===n,"text-text-200 border-accent-pro-100/20 bg-accent-pro-900":"pro"===n,"bg-bg-200 border-border-300":"info"===n,"bg-bg-200 border-transparent":"chin"===n,"hover:bg-bg-300 transition-colors":"chin"===n&&!!l});return(0,s.jsx)(_.N,{children:t&&(0,s.jsx)(C.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:l?(0,s.jsx)("button",{className:(0,A.A)(i),onClick:l,children:t}):(0,s.jsx)("div",{className:i,children:t})})})}var S=a(57383),I=a(41417),E=a(21036),T=a(68864),D=a(14786),O=a(80079),R=a(51121),L=a(18179),z=a(37076),P=a(36208),U=a(96712),F=a(78730),G=a(90384),Y=a(74027),H=a(23952),V=a(9537);function B(e){let{onReady:t,children:a,onSuccess:n}=e,l=(0,H.useStripe)(),i=(0,H.useElements)(),{account:o}=(0,r.YL)(),[d,c]=(0,p.useState)(null),[u,m]=(0,p.useState)(!1),[x,g]=(0,p.useState)(!1),{mutateAsync:v}=(0,f.k0)(),y=async()=>{if(!u&&l&&i){m(!0);try{let e=await i.submit();if(e.error){e.error.message&&c(e.error.message);return}let t=await v(),{error:a}=await l.confirmPayment({elements:i,clientSecret:t.clientSecret,redirect:"if_required"});(null==a?void 0:a.message)&&"validation_error"!==a.type&&c(a.message),a||n()}catch(e){c(e.message)}finally{m(!1)}}};return(0,s.jsxs)(V.lV,{onSubmit:()=>{u||y()},children:[(0,s.jsx)(H.PaymentElement,{id:"payment-element",options:{readOnly:u,layout:"tabs",terms:{card:"never"},defaultValues:{billingDetails:{email:null==o?void 0:o.email_address,name:null==o?void 0:o.full_name}}},onReady:()=>{g(!0),t&&t()}}),d&&(0,s.jsx)("div",{className:"text-danger-000 mt-4",id:"payment-message",children:d}),(0,s.jsxs)("div",{className:"mt-5 flex flex-row flex-wrap items-center justify-end gap-3",children:[a,(0,s.jsx)(I.$,{type:"submit",loading:u,variant:"flat",className:"bg-accent-pro-100 hover:bg-accent-pro-200 w-full py-6",disabled:!x,children:(0,s.jsx)(h.A,{defaultMessage:"Confirm payment",id:"Dja1nAdMHW"})})]}),(0,s.jsx)("div",{className:"mt-3 text-text-500 text-sm text-center",children:(0,s.jsx)(h.A,{defaultMessage:"By providing your payment information, you allow Anthropic to charge your card in the amount above. Purchase non-refundable.",id:"0L0VGgMTRs"})})]})}function K(e){let{amount:t,currency:a,children:n,className:l,onSuccess:i}=e,r=(0,F.ib)(),[d,c]=(0,p.useState)(!0),{theme:u,mode:m}=(0,Y.D)(),x=(0,U.l)().get(o.eT.COLOR_MODE),h={fontSizeBase:"16px",colorBackground:(0,G.w)(u,m,x,"bg-000"),colorText:(0,G.w)(u,m,x,"text-100")},f={mode:"payment",amount:t,currency:null==a?void 0:a.toLowerCase(),payment_method_types:["card","link"],loader:"never",appearance:{theme:"stripe",variables:h}};return(0,s.jsxs)("div",{className:(0,A.A)("relative",l),children:[(0,s.jsx)("div",{className:(0,A.A)("w-full pt-1 transition-opacity duration-1000",{"opacity-0":d}),children:(0,s.jsx)(H.Elements,{options:f,stripe:r,children:(0,s.jsx)(B,{onReady:()=>c(!1),onSuccess:i,children:n})})}),d&&(0,s.jsx)(W,{})]})}let W=()=>(0,s.jsx)("div",{className:"absolute inset-0 flex h-full w-full items-center justify-center",children:(0,s.jsx)(L.Loading,{})});function J(e){var t,a;let n,{isOpen:l,onClose:i,conversationUUID:o}=e,d=(0,R.Y)(),{activeOrganization:c}=(0,r.YL)(),u=(0,O.$)(),m=(0,p.useCallback)(()=>{d.addSuccess((0,s.jsx)(h.A,{defaultMessage:"Message limits reset. Let’s chat!",id:"LGCoQdVha4"})),(null==c?void 0:c.uuid)&&o&&u({type:"within_limit"},c.uuid,o),i()},[null==c?void 0:c.uuid,o,i,d,u]),{data:x,isLoading:g}=(0,f.Zr)();return x&&(n=(0,P.vv)(x.price+(null!=(t=x.taxAmount)?t:0),x.currency,{preferWholeNumber:!0})),(0,s.jsx)(z.aF,{isOpen:l,onClose:i,title:(0,s.jsx)("div",{className:"text-text-200 font-ui-serif text-xl font-medium tracking-tight mt-2",children:(0,s.jsx)(h.A,{defaultMessage:"Reset usage limits",id:"YKpO8tTise"})}),hasCloseButton:!0,modalSize:"lg",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex p-3 justify-center items-center gap-10 self-stretch rounded-xl border border-accent-pro-100 bg-accent-pro-900 mt-6",children:[(0,s.jsx)("div",{className:"flex flex-col px-5 gap-2",children:g||!x?(0,s.jsx)(L.Loading,{size:"sm"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-text-100 text-3xl/6 font-medium tracking-tighter",children:n}),null===x.taxAmount&&(0,s.jsx)("p",{className:"text-text-500 text-sm/3 tracking-tight text-nowrap",children:(0,s.jsx)(h.A,{defaultMessage:"+ tax",id:"H/9uGFjKzR"})})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{className:"text-text-200 text-sm tracking-tight",children:(0,s.jsx)(h.A,{defaultMessage:"Immediately get access to Claude instead of waiting for usage limits to reset.",id:"6Gj58FRZ27"})}),(0,s.jsx)("p",{className:"text-text-200 text-sm tracking-tight",children:(0,s.jsx)(h.A,{defaultMessage:"This is a one-time payment.",id:"lVfQHZlUq0"})})]})]}),(0,s.jsx)(K,{amount:x?x.price+(null!=(a=x.taxAmount)?a:0):500,currency:(null==x?void 0:x.currency)||"USD",onSuccess:m})]})})}function q(e){let{messageLimit:t,placement:a,defaultWarning:n,defaultTheme:l}=e,i=(0,E.useExperiment)("rate_limit_resets").get("allow_rate_limit_resets",!1);return i&&("exceeded_limit"===t.type||"approaching_limit"===t.type&&0===t.remaining)?(0,s.jsx)(N,{theme:"pro",placement:a,warning:(0,s.jsx)($,{messageLimit:t})}):i&&"approaching_limit"===t.type?(0,s.jsx)(N,{theme:"info",placement:a,warning:(0,s.jsx)(X,{messageLimit:t})}):(0,s.jsx)(N,{theme:l,warning:n,placement:a})}let X=e=>{let{messageLimit:t}=e,[a,n]=(0,p.useState)(!1);return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,s.jsx)("div",{className:"flex flex-row items-center gap-2 md:w-full",children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"text-sm",children:1===t.remaining?(0,s.jsx)(h.A,{id:"RoowG4DICE",defaultMessage:"You have 1 message left before hitting usage limits"}):(0,s.jsx)(h.A,{id:"4rS9S85sm+",defaultMessage:"You have {numMessagesRemaining} messages left before hitting usage limits",values:{numMessagesRemaining:t.remaining}})})})}),(0,s.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:(0,s.jsx)(I.$,{variant:"unstyled",className:(0,A.A)("@lg:w-fit w-full shrink-0","text-sm font-medium","text-accent-pro-000","hover:text-accent-pro-000 hover:bg-bg-500/40"),onClick:()=>{n(!0)},children:(0,s.jsx)(h.A,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"})})})]}),(0,s.jsx)(J,{isOpen:a,onClose:()=>n(!1),conversationUUID:t.conversationUUID})]})},$=e=>{let{messageLimit:t}=e,a=T.c9.fromSeconds(t.resetsAt),[n,l]=(0,p.useState)(!1);return(0,s.jsxs)(D.q,{minimalUi:!0,actionButton:(0,s.jsxs)(I.$,{variant:"unstyled",size:"sm",className:(0,A.A)("@lg:w-fit w-full shrink-0","bg-accent-pro-100 text-oncolor-100 font-medium font-ui tracking-tight transition-colors hover:bg-accent-pro-200"),onClick:()=>{l(!0)},children:[(0,s.jsx)(h.A,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"}),(0,s.jsx)("span",{className:"inline-block text-[0.65rem] bg-bg-000/20 ml-2 px-1.5 py-0.5 rounded",children:(0,s.jsx)(h.A,{id:"vroSRZd5vI",defaultMessage:"BETA"})})]}),children:[(0,s.jsx)(h.A,{id:"74NSYSM2xX",defaultMessage:"You can reset usage limits now or wait until {time}.",values:{time:(0,s.jsx)("span",{className:"inline-block",children:a.toLocaleString(T.c9.TIME_SIMPLE)})}}),(0,s.jsx)(J,{isOpen:n,onClose:()=>l(!1),conversationUUID:t.conversationUUID})]})};var Z=a(42824),Q=a(45317),ee=a(18472),et=a(11515),ea=a(62094),es=a(61773),en=a(99965);let el=()=>{let e=(0,en.lu)();return(0,s.jsxs)(Q.x,{children:[(0,s.jsx)("p",{className:"text-[13px] text-text-200",children:e?(0,s.jsx)(h.A,{defaultMessage:"Connect your tools to Claude",id:"exSmFaQCLC"}):(0,s.jsx)(h.A,{defaultMessage:"Upgrade to connect your tools to Claude",id:"kIvAPf8iSA"})}),(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-row",children:[e&&["https://mcp.notion.com/mcp","https://mcp.canva.com/mcp","https://mcp.linear.app/sse","https://mcp.atlassian.com/v1/sse","https://mcp.asana.com/sse"].map(e=>(0,s.jsx)("div",{className:"w-3",children:(0,s.jsx)(ee.O,{size:18,children:(0,s.jsx)(et.d,{url:e,size:13,fadeInOnLoad:!0})},e)},e)),["/images/icons/messages-app.svg","/images/icons/notes-app.svg","/images/icons/chrome-app.svg"].map(e=>(0,s.jsx)("div",{className:"w-3",children:(0,s.jsx)(ee.O,{size:18,children:(0,s.jsx)(es.default,{src:e,alt:"",width:13,height:13})},e)},e))]}),(0,s.jsx)(ea.J,{size:16,className:"text-text-500"})]})]})};var ei=a(27261),er=a.n(ei),eo=a(46760);function ed(){let e=(0,r.Kq)(),t=(0,eo.A)();return(0,s.jsx)(D.q,{actionButton:null,title:t.formatMessage({defaultMessage:"Team plan canceled",id:"KuqVOfg9/0"}),children:e?(0,s.jsx)(h.A,{defaultMessage:"You can no longer chat with Claude. To restore full access, <link>renew your subscription</link>.",id:"L2pC0kiNNO",values:{link:e=>(0,s.jsx)(er(),{className:"whitespace-nowrap font-medium underline",href:"/settings/billing",children:e})}}):(0,s.jsx)(h.A,{defaultMessage:"You can no longer chat with Claude.",id:"hxcpUUnV0b"})})}var ec=a(47959);let eu=()=>{let e=(0,ec.h)({allowSelfUpgrade:!1});return(0,s.jsx)(D.q,{actionButton:e,children:(0,s.jsx)(h.A,{defaultMessage:"Due to capacity constraints, chatting with Claude is currently not available. Please try again shortly.",id:"kfyWX0MxKQ"})})};var em=a(45078),ex=a(95675);let ep=e=>{let{className:t,...a}=e;return(0,s.jsx)("a",{className:(0,A.A)("text-text-100 font-medium hover:underline",t),...a})},eh=e=>{var t;let a,{inaccessibleSyncSources:n}=e,{chatResourceState:l}=(0,M.i)(),i=(0,em.v2)(),{isDrawerExpanded:r,setIsDrawerExpanded:o}=(0,ex.x)(),d=n.every(e=>e.status.state===u.I5.UNAUTHENTICATED)&&1===new Set(n.map(e=>e.type)).size,c=null==(t=n[0])?void 0:t.type,m=(0,s.jsx)("button",{onClick:()=>{o(!0)},children:(0,s.jsx)(ep,{children:(0,s.jsx)(h.A,{defaultMessage:"Show {count, plural, one {# Item} other {# Items}}",id:"1HlfJxfH7H",values:{count:n.length}})})});return d&&null!==c?a=(0,s.jsx)("button",{onClick:()=>i(c),children:(0,s.jsx)(ep,{children:(0,s.jsx)(h.A,{defaultMessage:"Reconnect with {sourceName}",id:"dUareRZF9G",values:{sourceName:u.sb[c]}})})}):l.conversationUUID&&!r&&(a=m),(0,s.jsx)(Q.x,{children:(0,s.jsx)(h.A,{defaultMessage:"Some of your content could not be loaded. {actionButton}",id:"Ibsz06ys2B",values:{actionButton:a}})})};var ef=a(75006);let eg=ef.z.array(ef.z.object({text:ef.z.string(),href:ef.z.string().optional(),button:ef.z.boolean().optional()})).nullable();function ev(e){let{messageComponents:t}=e;return(0,s.jsx)(Q.x,{children:(0,s.jsx)(ey,{messageComponents:t})})}function ey(e){let{messageComponents:t}=e;return(0,s.jsx)("div",{children:t.map((e,t)=>e.button?(0,s.jsx)(I.$,{href:e.href,target:"_blank",children:e.text},t):e.href?(0,s.jsx)(er(),{href:e.href,className:"underline",target:"_blank",children:e.text},t):(0,s.jsx)("span",{children:e.text},t))})}var ej=a(74039),eb=a(7726);function ew(e){let t=(0,eb.bT)("push"),a=()=>{t()},n=e=>(0,s.jsx)("a",{onClick:a,className:"underline cursor-pointer",children:e});return(0,s.jsx)(D.q,{actionButton:null,children:(0,s.jsx)("div",{className:"text-text-200 flex w-full items-center justify-between",children:(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)("span",{children:"refusal"===e.stopReason?(0,s.jsx)(h.A,{defaultMessage:"Claude is unable to respond to this request, which appears to violate our <policyLink>Usage Policy</policyLink>. Please <newChat>start a new chat</newChat>.",id:"JQtAKVGSTL",values:{policyLink:e=>(0,s.jsx)("a",{href:"https://www.anthropic.com/legal/aup",target:"_blank",className:"underline cursor-pointer",children:e}),newChat:n}}):(0,s.jsx)(h.A,{defaultMessage:"Claude is unable to respond to this request. Please <newChat>start a new chat</newChat>.",id:"VZKromeiwV",values:{newChat:n}})})})})})}var eM=a(61125),ek=a(41932),eA=a(80047);function e_(e){let{isOpen:t,setIsOpen:a,files:n,isNewConversation:l}=e,i=(0,eo.A)();return(0,s.jsxs)(z.aF,{isOpen:t,hasCloseButton:!0,title:i.formatMessage({defaultMessage:"Analysis tool required",id:"jvGhSl5Gpz"}),onClose:()=>a(!1),children:[(0,s.jsxs)("div",{className:"my-4 text-pretty flex flex-col gap-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(h.A,{defaultMessage:"Claude requires the analysis tool to be enabled to analyze the following files:",id:"DWgtKtw1y9"})}),(0,s.jsx)("ul",{className:"list-disc pl-4",children:n.map(e=>(0,s.jsx)("li",{children:e.file_name},e.file_uuid))}),(0,s.jsx)("div",{children:l?i.formatMessage({defaultMessage:"If you start this conversation without turning on the analysis tool, these files will not be available to Claude.",id:"0r1iTiKoSi"}):i.formatMessage({defaultMessage:"Please enable the analysis tool and then start a new chat in this project to analyze these files.",id:"YLHCS8L8fc"})})]}),(0,s.jsx)(z.vW,{layout:"right",children:(0,s.jsx)(z.yl,{type:"button",size:"lg",onClick:()=>a(!1),children:(0,s.jsx)(h.A,{defaultMessage:"OK",id:"kAEQyVFWDv"})})})]})}function eC(e){let{files:t,isNewConversation:a}=e,{track:n}=(0,i.st)(),{openFeaturePreviewModal:l}=(0,eA.go)(),[r,o]=(0,p.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e_,{isOpen:r,setIsOpen:o,isNewConversation:a,files:t}),(0,s.jsx)(Q.x,{children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)(h.A,{defaultMessage:"Claude cannot access some of the <a>files attached</a> to this conversation",id:"dlrqZaDnOO",values:{a:e=>(0,s.jsx)("a",{className:"underline",href:"#",onClick:()=>o(!0),children:e})}})}),(0,s.jsx)("div",{children:(0,s.jsx)("a",{className:"text-accent-secondary-000 font-medium",href:"#",onClick:()=>{n({event_key:"claudeai.settings.preview_feature.opened",source:"ooc_files_warning"}),l()},children:(0,s.jsx)(h.A,{defaultMessage:"Enable analysis tool",id:"UDUWEABw3p"})})})]})})]})}var eN=a(9946),eS=a(70011),eI=a(19125),eE=a(76761),eT=a(70497);let eD=ef.z.object({id:ef.z.string(),bodyMd:ef.z.string(),isDismissable:ef.z.boolean(),proUpsell:ef.z.boolean(),alertForModels:ef.z.array(ef.z.string())}).nullable(),eO=e=>{let{alert:t,setHideAlert:a}=e,n=(0,r.UC)(),l=(0,ec.h)();return(0,s.jsxs)(Q.x,{children:[(0,s.jsx)(eN.Lv,{children:(0,s.jsx)(eT.o,{children:t.bodyMd})}),n&&t.proUpsell&&l,t.isDismissable&&(0,s.jsx)(I.$,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:()=>a(!0),children:(0,s.jsx)(eE.X,{size:12})})]})},eR=e=>{let{className:t,...a}=e;return(0,s.jsx)("button",{className:"text-text-100 text-sm font-medium hover:underline text-nowrap",...a})};var eL=a(6568);let ez=e=>{let t=(0,eL.tA)(e.projectKnowledgebaseTokens,e.maxConversationTokens),a=(0,eb.bT)("push");return(0,s.jsx)(D.q,{actionButton:(0,s.jsx)(eR,{onClick:()=>a({projectUuid:e.projectUuid}),children:(0,s.jsx)(h.A,{defaultMessage:"Start a new conversation",id:"Lc72GmPP25"})}),children:t?(0,s.jsx)(h.A,{defaultMessage:"This conversation has reached its <link>maximum length</link>. You may want to remove some files from your project’s knowledge base.",id:"8KrIIDzvA1",values:{link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:o.q4,children:e})}}):(0,s.jsx)(h.A,{defaultMessage:"This conversation has reached its <link>maximum length</link>.",id:"h7H72fz8l5",values:{link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:o.q4,children:e})}})})},eP=()=>(0,s.jsx)(Q.x,{children:(0,s.jsx)(h.A,{defaultMessage:"Long prompts or documents may take multiple minutes to respond",id:"bw4uiEG/kB"})});var eU=a(4708);let eF=e=>{let t,a=(0,eb.bT)("push"),{tokenTotals:n,numAttachments:l,projectKnowledgebaseTokens:i}=e,{msgTokens:r,totalTokens:d,maxConversationTokens:c}=n,u=null!=i?i:0,m=(0,eL.tA)(u,c),x=d/c-1;return t=l&&m?(0,s.jsx)(h.A,{defaultMessage:"Try replacing the attached {numAttachments, plural, one {file} other {files}} with smaller excerpts or removing files from your project’s knowledge base.",id:"LZJa/izuge",values:{numAttachments:l}}):l?(0,s.jsx)(h.A,{defaultMessage:"Try replacing the attached {numAttachments, plural, one {file} other {files}} with smaller excerpts.",id:"doIlMUx6Hu",values:{numAttachments:l}}):m?(0,s.jsx)(h.A,{defaultMessage:"Try removing files from your project’s knowledge base.",id:"rTmS1cuCeD"}):(0,s.jsx)(h.A,{defaultMessage:"Try shortening your message.",id:"vd0y42PhHK"}),(0,s.jsx)(Q.x,{children:(0,s.jsxs)("span",{children:[(0,s.jsx)(h.A,{defaultMessage:"Conversation is {percentage}% over the <link>length limit</link>.",id:"IGar1JqHAm",values:{percentage:Math.ceil(100*x),link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:o.q4,children:e})}}),"\xa0",t,"\xa0",r+u<c&&(0,s.jsx)("a",{className:"underline",href:"#",onClick:()=>a({projectUuid:e.projectUuid}),children:(0,s.jsx)(h.A,{defaultMessage:"Start a new conversation?",id:"8ha4a4N9Uq"})})]})})};var eG=a(40459);let eY=e=>{let{switchModel:t,copyText:a,modelName:n}=e;return(0,s.jsx)(Q.x,{children:(0,s.jsxs)("div",{className:"text-text-200 flex w-full items-center flex-wrap justify-between",children:[(0,s.jsx)("div",{className:"flex items-center gap-1",children:a}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{className:"text-text-100 text-sm font-medium hover:underline text-nowrap",onClick:t,children:(0,s.jsx)(h.A,{defaultMessage:"Switch to {modelName}",values:{modelName:n},id:"1APwtKAkCy"})}),"\xa0"]})]})})},eH=()=>{let e=(0,j.X0)(u.v8.GMAIL),t=(0,j.X0)(u.v8.GCAL),a=(0,v.$f)();return!(0,m.V)()&&(e||t||a)},eV=e=>{var t,a,m,v,j,A,_,C,I,E,T,D,O,R,L,z,P,U,F,G,Y,H,V,B,K;let W,{placement:J}=e,{prompt:X,isPromptUnsafe:$,model:ee,setModel:et,attachments:ea,conversation:es,projectUuid:en,syncSourceUuids:ei,files:er}=(0,S.o)(),{setMcpDirectoryModalIsOpen:eo}=(0,k.tl)(),ec=(0,w.ED)(en),em=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=(0,eb.mz)(t||""),s=null==a||null==(e=a.chat_messages)?void 0:e.at(-1);return s&&"assistant"===s.sender&&("prompt_injection_risk"===s.stop_reason||"refusal"===s.stop_reason)?s.stop_reason:null}(null==es?void 0:es.id),ex=em?(0,s.jsx)(ew,{stopReason:em}):null,[ep,ef]=(0,eU.q)({projectUuid:en,conversationUUID:null!=(a=null==es?void 0:es.id)?a:null,conversationTokensSoFar:null!=(m=null==es?void 0:es.tokensSoFar)?m:0,conversationFiles:(null!=(v=null==es?void 0:es.files)?v:[]).concat(er),projectKnowledgebaseTokens:null!=(j=null==es?void 0:es.projectKnowledgebaseTokens)?j:ec,input:X,attachments:ea,syncSourceUuids:ei,chatInputModel:ee}),ey=(0,i.st)();(0,p.useEffect)(()=>{"exceeded"===ep?ey.track({event_key:"chat.conversation.token_limit_exceeded",conversation_uuid:null==es?void 0:es.id,project_uuid:en}):"will-exceed"===ep&&ey.track({event_key:"chat.conversation.token_limit_will_exceed",conversation_uuid:null==es?void 0:es.id,project_uuid:en})},[ey,null==es?void 0:es.id,en,ep]);let{exceededMessageLimitWarning:eA,approachingMessageLimitWarning:e_,messageLimit:eN}=(0,ej.I)(null!=(A=null==es?void 0:es.id)?A:null),eE="exceeded"===ep?(0,s.jsx)(ez,{projectKnowledgebaseTokens:null!=(_=null==es?void 0:es.projectKnowledgebaseTokens)?_:0,maxConversationTokens:ef.maxConversationTokens,projectUuid:en}):null,{isRavenCanceled:eT}=(0,f.bF)(),eR=eT?(0,s.jsx)(ed,{}):void 0,eL=(0,r.r$)()?(0,s.jsx)(eu,{}):void 0,eV=(()=>{let{chatResourceState:e}=(0,M.i)();return[...e.syncSources||[],...(0,g.CO)(en).data||[]].filter(e=>{var t;return u.xj.includes(null==e||null==(t=e.status)?void 0:t.state)})})(),eB=eV.length?(0,s.jsx)(eh,{inaccessibleSyncSources:eV}):void 0,{maxKbTokens:eK,modelWithLargestContext:eW}=(0,w.AO)(),{setStickyModelPreference:eJ}=(0,l.F)(),eq=!eW||(null==ee?void 0:ee.toLowerCase())===eW.toLowerCase(),eX="exceeded"===ep||"will-exceed"===ep,e$=!eq&&eX&&ef.totalTokens<eK,{allModelOptions:eZ}=(0,n.A9)(),eQ=null==(t=eZ.find(e=>e.model===eW))?void 0:t.name,e0=(0,p.useCallback)(()=>{eW&&(et(eW),eJ(eW))},[et,eJ,eW]),e1=eQ&&e$?(0,s.jsx)(eY,{switchModel:e0,modelName:eQ,copyText:(0,s.jsx)("span",{children:(0,s.jsx)(h.A,{defaultMessage:"Your message is over the <link>length limit</link>",id:"sFF+OamRk1",values:{link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:o.q4,children:e})}})})}):void 0,e2="will-exceed"===ep?(0,s.jsx)(eF,{tokenTotals:ef,numAttachments:ea.length,projectKnowledgebaseTokens:null==es?void 0:es.projectKnowledgebaseTokens,projectUuid:en}):null,e5=ef.msgTokens<1e5?null:(0,s.jsx)(eP,{}),e7=(0,b.CD)(),e6=(0,r.mV)(),e4=e7&&!e6?(0,s.jsx)(Q.x,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(x.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(h.A,{defaultMessage:"Less accurate Google Drive search results while Claude catalogs your Drive files",id:"ljvRWwDUyf"})})]})}):void 0,e3=(0,Z.U)(en)?(0,s.jsx)(Q.x,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(x.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(h.A,{defaultMessage:"Project knowledge exceeds maximum. Remove files to continue.",id:"IqUMWBoy4d"})})]})}):void 0,{systemAlertFromConfig:e8}=(e=>{let t=(0,c.T9)("claude_ai_system_alerts","alert",null,eD),[a,n]=(0,eI.V)("".concat(e,":").concat(null==t?void 0:t.id,":hideAlertOnConversation"),!1),l=null==t?void 0:t.alertForModels,i=(0,eS.Z3)(e);return e&&(!l||l.includes(i))&&t&&!a?{systemAlertFromConfig:{alert:t,component:(0,s.jsx)(eO,{alert:t,setHideAlert:n})}}:{}})(null!=(C=null==es?void 0:es.id)?C:null),e9=e8?e8.component:null,te=function(e,t,a){let{data:n=[]}=(0,ek.uE)(a),l=(0,eM.cV)(),i=[...e,...t?t.files:[],...n].filter(e=>e.file_kind===d.M.Blob);return!l&&i.length?(0,s.jsx)(eC,{files:i,isNewConversation:!t}):null}(er,es,en),tt=function(){let e=(0,c.T9)("claudeai_warning_message","components",null,eg);return e?(0,s.jsx)(ev,{messageComponents:e}):null}(),ta=eH(),ts=(0,c.fS)("claudeai_unsafe_prompt_inline"),tn=$()&&ta&&ts?(0,s.jsx)(Q.x,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(x.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(h.A,{defaultMessage:"Use caution before running this prompt. Malicious conversation content could trick Claude into attempting harmful actions or sharing your data.",id:"bWRp6wwzXA"})})]})}):null,tl=ea.some(e=>e.origin===d.R.URLParameter)?(0,s.jsx)(Q.x,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(x.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(h.A,{defaultMessage:"Artifacts are user-generated and may contain unverified or potentially unsafe content.",id:"/0GesG9R4n"})})]})}):null,ti=null!=(E=null!=(I=null!=ex?ex:tn)?I:tl)?E:null,tr=null!=e3?e3:null,to=(0,y.ko)({shouldTrack:"onpage"===J})&&"onpage"===J?(0,s.jsx)(el,{}):null,td=null!=(K=null!=(B=null!=(V=null!=(H=null!=(Y=null!=(G=null!=(F=null!=(U=null!=(P=null!=(z=null!=(L=null!=(R=null!=(O=null!=(D=null!=(T=null!=ti?ti:tr)?T:eA)?D:e1)?O:eE)?R:eR)?L:eL)?z:eB)?P:e2)?U:te)?F:e5)?G:e9)?Y:e4)?H:tt)?V:e_)?B:to)?K:null;td===to&&(W=()=>eo(!0));let tc=e8&&e8.alert.proUpsell?"pro":eA||te||e4||e_?"info":to?"chin":"danger",tu=(0,r.O9)(),tm=(0,r.zc)();return!tr&&eN&&(tu||tm)&&(e_||eA)&&!eG.env.NEXT_PUBLIC_DISABLE_PAYMENTS?(0,s.jsx)(q,{messageLimit:eN,defaultWarning:td,defaultTheme:tc,placement:J}):(0,s.jsx)(N,{warning:td,placement:J,theme:tc,onClick:W})}},61162:(e,t,a)=>{a.d(t,{y:()=>l});var s=a(27062),n=a(21036);let l=()=>{let e=(0,n.useLayer)("frontend"),{value:t}=(0,s.fS)("artifacts_enabled");return!!t||e.get("artifacts_enabled_by_default",!1)}},61906:(e,t,a)=>{a.d(t,{EY:()=>r,jc:()=>o});var s=a(77186),n=a(1761),l=a(21036);let i=()=>{let{activeOrganization:e}=(0,n.YL)(),t=null==e?void 0:e.uuid,a=(0,n.h0)(),i=(0,l.useLayer)("trials_freemium"),r=!a&&(i.get("free_thinking",!1)||i.get("free_opus",!1))&&!!t;return(0,s.Sk)("/api/organizations/".concat(t,"/feature_limits"),{queryKey:["FEATURE_LIMITS",t],enabled:r,staleTime:3e5})},r=()=>{let{data:e,...t}=i(),a=null==e?void 0:e.limits.find(e=>"thinking"===e.feature);return{...t,data:a}},o=()=>{let{data:e,...t}=i(),a=null==e?void 0:e.limits.find(e=>"opus_4"===e.feature);return{...t,data:a}}},63374:(e,t,a)=>{a.d(t,{X3:()=>c,_7:()=>l.XY,_x:()=>u,hm:()=>d});var s=a(42977),n=a(90510),l=a(98411);function i(){let e=(0,s._)(["p-4 bg-bg-300 rounded-xl"]);return i=function(){return e},e}function r(){let e=(0,s._)(["basis-0 flex-col gap-1 inline-flex"]);return r=function(){return e},e}function o(){let e=(0,s._)(["items-center gap-2 inline-flex text-text-000 font-large-bold"]);return o=function(){return e},e}let d=n.J.div(i()),c=n.J.div(r()),u=n.J.div(o())},64979:(e,t,a)=>{a.d(t,{t:()=>o});var s=a(54568),n=a(29242),l=a(27062),i=a(4705),r=a(62971);function o(e,t,a){let{value:o}=(0,l.fS)("claude_ai_cinnamon"),{value:d}=(0,l.fS)("claude_ai_chili");return o&&d&&void 0!==a&&"claude-3-5-haiku-20241022"===t&&a?(0,s.jsxs)(s.Fragment,{children:[e.replace("3.5 Haiku","3 Haiku"),(0,s.jsx)(n.m,{tooltipContent:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(r.A,{defaultMessage:"Claude 3.5 Haiku does not support images",id:"VkrkeY0z6g"})}),children:(0,s.jsx)(i.N,{className:"inline-block ml-1 translate-y-[-1px]"})})]}):e}},73212:(e,t,a)=>{a.d(t,{l:()=>l});var s=a(91961),n=a(96406);let l=()=>{if((0,s.fJ)())return;let e=document.getElementById(n.I);e&&e.focus()}},73817:(e,t,a)=>{a.d(t,{s:()=>c});var s=a(54568),n=a(43195),l=a(91961),i=a(85544),r=a(32987),o=a(46760),d=a(96406);let c=e=>{let{path:t,inputMenuSearchQuery:a,setInputMenuSearchQuery:c,handleBack:u,className:m}=e,x=(0,o.A)(),p=(0,l.fJ)(),h={[i.xd.DRIVE]:x.formatMessage({defaultMessage:"Search Google Drive",id:"1bbXc6Z3S1"}),[i.xd.PROJECTS]:x.formatMessage({defaultMessage:"Search projects",id:"doPT7U8q21"}),[i.xd.STYLES]:x.formatMessage({defaultMessage:"Search styles",id:"9oQ0JkPwFY"})},f=t&&t in h?h[t]:x.formatMessage({defaultMessage:"Search menu",id:"lL4HM3zEqr"}),g=null===t||!!a.trim().length;return(0,s.jsxs)("div",{className:(0,r.A)("flex flex-row items-center gap-2.5 px-1.5 w-full rounded-md h-[2rem]",m),children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,s.jsx)(n.vji,{className:(0,r.A)("text-text-500/50 transition-opacity",g?"opacity-100":"opacity-0")})}),(0,s.jsx)("button",{onClick:u,className:(0,r.A)("transition-opacity text-text-500 hover:text-text-100 absolute left-0 top-0",g?"opacity-0":"opacity-100"),disabled:g,children:(0,s.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,s.jsx)(n.nkM,{})})})]}),(0,s.jsx)("input",{autoFocus:!p,id:d.I,className:"block bg-transparent hide-focus-ring leading-6 placeholder:text-text-500/70 text-[15px] text-text-300 w-full",placeholder:f,value:a,onChange:e=>c(e.target.value)})]})}},74039:(e,t,a)=>{a.d(t,{I:()=>b,h:()=>A});var s=a(54568),n=a(70011),l=a(80079),i=a(1761),r=a(55554),o=a(41417),d=a(46612),c=a(27062),u=a(76761),m=a(68864),x=a(27261),p=a.n(x),h=a(7620),f=a(62971),g=a(17411),v=a(45317),y=a(14786),j=a(47959);let b=e=>{let{messageLimit:t}=(0,i.YL)(),{isTierSelectorEnabled:a}=(0,r.t)(),[l,o]=(0,h.useState)(!0),d=(null==t?void 0:t.type)==="within_limit",c=(0,n.Z3)(e),u=d?null:null==t?void 0:t.conversationUUID,m=(0,n.Z3)(null!=u?u:null);return(null==t?void 0:t.type)!=="within_limit"&&(null==t?void 0:t.perModelLimit)&&c!==m?{}:(null==t?void 0:t.type)==="exceeded_limit"||(null==t?void 0:t.type)==="approaching_limit"&&0===t.remaining?{messageLimit:t,exceededMessageLimitWarning:(0,s.jsx)(w,{messageLimit:t,showTierSelector:a})}:(null==t?void 0:t.type)==="approaching_limit"?{messageLimit:t,approachingMessageLimitWarning:l?(0,s.jsx)(M,{messageLimit:t,onDismiss:()=>o(!1)}):void 0}:{}};function w(e){let{messageLimit:t,showTierSelector:a=!1}=e,n=(0,i.mV)(),l=(0,i.O9)(),r=(0,i.zc)(),o=(0,i.tP)(),c=(0,j.h)(),u=m.c9.fromSeconds(t.resetsAt),{hasOAuthTokens:x}=function(){var e;let{data:t,isLoading:a}=(0,g.Jh)();return{hasOAuthTokens:null!=(e=null==t?void 0:t.some(e=>!e.is_revoked))&&e,isLoading:a}}();return(0,s.jsxs)(y.q,{actionButton:c,minimalUi:!0,children:[a?(0,s.jsx)(f.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}. As an internal user, you can change your tier in the user menu to test different rate limits.",id:"Um8zFcRLL/",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.c9.TIME_SIMPLE)})}}):r&&o?(0,s.jsx)(f.A,{defaultMessage:"Increase usage for uninterrupted work or continue at {time}.",id:"5QbZN4LMkt",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.c9.TIME_SIMPLE)})}}):l||n||r?x?(0,s.jsx)(f.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}. <link>Your limits are shared with Claude Code</link>",id:"UrobydPO9o",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.c9.TIME_SIMPLE)}),link:e=>(0,s.jsx)(p(),{className:"underline",href:"/settings/claude-code",children:e})}}):(0,s.jsx)(f.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}.",id:"bXAswF0AK8",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.c9.TIME_SIMPLE)})}}):(0,s.jsx)(f.A,{defaultMessage:"You are out of free <link>messages</link> until {time}",id:"PKaisys/Ji",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(m.c9.TIME_SIMPLE)}),link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:d.Kf,children:e})}}),(0,s.jsx)(k,{messageLimit:t})]})}let M=e=>{let{messageLimit:t,onDismiss:a}=e,n=(0,j.h)(),l=m.c9.fromSeconds(t.resetsAt);return(0,s.jsxs)(v.x,{children:[(0,s.jsx)("span",{className:"font-medium",children:(0,s.jsx)(f.A,{defaultMessage:"You’re almost out of usage - your limits will reset at {time}",id:"jKI2rDp1ds",values:{time:(0,s.jsx)("span",{className:"inline-block",children:l.toLocaleString(m.c9.TIME_SIMPLE)})}})}),(0,s.jsxs)("span",{children:[n,(0,s.jsx)(o.$,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded !bg-transparent",size:"unset",variant:"ghost",onClick:a,children:(0,s.jsx)(u.X,{size:12})})]})]})},k=e=>{let{messageLimit:t}=e,{mutate:a}=(0,l.T)(t.conversationUUID),{value:n}=(0,c.fS)("can_reset_rate_limits");return n?(0,s.jsx)(o.$,{className:"ml-2",variant:"secondary",size:"sm",onClick:()=>a(),children:(0,s.jsx)(f.A,{defaultMessage:"Reset limits",id:"0Lg76lu7jn"})}):null},A=e=>{var t;let{messageLimit:a,activeOrganization:s}=(0,i.YL)(),r=(0,l.$)(),o=(0,n.Z3)(e),d=(null==a?void 0:a.type)!=="within_limit"&&null!=(t=null==a?void 0:a.conversationUUID)?t:null,c=(0,n.Z3)(d);(0,h.useEffect)(()=>{(null==s?void 0:s.uuid)&&a&&"within_limit"!==a.type&&c!==o&&r({type:"within_limit"},s.uuid,e)},[e,c,s,a,o,r])}},78730:(e,t,a)=>{a.d(t,{bN:()=>p,Ri:()=>u,ib:()=>x});var s=a(71473),n=a(7620),l=a(77186),i=a(10158),r=a(1761),o=a(40459);let d=async e=>{if(o.env.NEXT_PUBLIC_DISABLE_PAYMENTS)return Promise.resolve(null);let{loadStripe:t}=await a.e(8451).then(a.bind(a,78451));return t(e)},c=["ar","bg","cs","da","de","el","en","en-AU","en-CA","en-NZ","en-GB","es","es-ES","es-419","et","fi","fil","fr","fr-CA","fr-FR","he","hu","hr","id","it","it-IT","ja","ko","lt","lv","ms","mt","nb","nl","no","pl","pt","pt-BR","ro","ru","sk","sl","sv","th","tr","vi","zh","zh-HK","zh-TW"],u=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:t}=(0,r.YL)(),{data:a,mutate:i,isIdle:o}=(0,l.L2)("/api/stripe/".concat(null==t?void 0:t.uuid,"/intent"),"POST",{enabled:!!(null==t?void 0:t.uuid),retry:2,retryDelay:2e3,mutationKey:[s.$k,null==t?void 0:t.uuid]});return(0,n.useEffect)(()=>{o&&e&&i()},[i,o,e]),a},m=null,x=()=>{let{stripePublishableKey:e}=(0,i._r)();return m||(m=d(e)),m},p=e=>{if(c.includes(e))return e;let t=e.split("-")[0];return c.includes(t)?t:"en"}},80047:(e,t,a)=>{a.d(t,{TW:()=>E,go:()=>I,wU:()=>S});var s=a(54568),n=a(68096),l=a(33200),i=a(98518),r=a(1761),o=a(51121),d=a(15046),c=a(22529),u=a(63374),m=a(37076),x=a(98411),p=a(29242),h=a(27062),f=a(32987),g=a(89256),v=a.n(g),y=a(61773),j=a(7620),b=a(62971),w=a(46760),M=a(75006),k=a(61162);let A=M.z.object({title:M.z.string(),description:M.z.string(),shortDescription:M.z.string().optional(),titleKey:M.z.string().optional(),descriptionKey:M.z.string().optional(),shortDescriptionKey:M.z.string().optional()}),_=M.z.object({preview_feature_uses_artifacts:A.optional(),preview_feature_uses_latex:A.optional(),preview_feature_uses_citations:A.optional(),enabled_artifacts_attachments:A.optional(),enabled_turmeric:A.optional(),enabled_gdrive:A.optional(),enabled_bananagrams:A.optional(),enabled_web_search:A.optional(),enabled_sourdough:A.optional(),enabled_foccacia:A.optional(),enabled_monkeys_in_a_barrel:A.optional()}),C={},N=(0,j.createContext)({openFeaturePreviewModal:v()}),S=e=>{let{children:t}=e,[a,n]=(0,j.useState)(!1);return(0,s.jsxs)(N.Provider,{value:{openFeaturePreviewModal:()=>n(!0)},children:[t,(0,s.jsx)(m.aF,{modalSize:"xl",isOpen:a,onClose:()=>n(!1),hasCloseButton:!0,title:(0,s.jsx)(b.A,{defaultMessage:"Feature preview",id:"3H/t1552xG"}),children:(0,s.jsx)(E,{})})]})},I=()=>(0,j.useContext)(N);function E(e){let{includeTitle:t}=e,a=function(){let{value:e}=(0,h.fS)("latex_ga"),t=(0,h.T9)("fp_menu","features",C,_),a=(0,k.y)(),{value:s,source:n}=(0,l.N)({}),{preview_feature_uses_artifacts:i,enabled_artifacts_attachments:r,preview_feature_uses_latex:o,...d}=t,c={...d};return!a&&i&&(c.preview_feature_uses_artifacts=i),s&&"experiment"===n&&i||(c.enabled_artifacts_attachments=r),!e&&o&&(c.preview_feature_uses_latex=o),c}();if(!(Object.keys(a).length>0))return;let n=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{id:"feature-preview",className:"text-text-400 font-base pt-4 pb-8",children:(0,s.jsx)(b.A,{defaultMessage:"Preview and provide feedback on upcoming enhancements to our platform. Please note: experimental features might influence Claude’s behavior and some interactions may differ from the standard experience.",id:"TJ0Nj7aQ5C"})}),(0,s.jsx)("div",{className:"flex flex-col gap-4",children:Object.entries(a).map((e,t)=>{let[a,n]=e;return(0,s.jsxs)(s.Fragment,{children:[t>0&&(0,s.jsx)("div",{className:"border-t border-border-300"}),(0,s.jsx)(T,{label:a,...n},a)]})})})]});return t?(0,s.jsxs)(x.XY,{children:[(0,s.jsx)(u._x,{children:(0,s.jsx)(b.A,{defaultMessage:"Feature preview",id:"3H/t1552xG"})}),n]}):n}function T(e){var t;let{label:a,...l}=e,u=(0,w.A)(),{track:m}=(0,i.st)(),{addSuccess:x}=(0,o.Y)(),{account:h}=(0,r.YL)(),{mutate:g}=(0,n.Jy)(),{checked:v,disabled:b,tooltipContent:M}=D(a),k=(0,j.useCallback)(()=>{h&&(m({event_key:"claudeai.settings.preview_feature.toggled",account_uuid:h.uuid,feature_id:a,action:!0===v?"disable":"enable"}),x(u.formatMessage({defaultMessage:"{title} {action}",id:"XuGv50sPs9"},{title:l.title,action:v?"disabled":"enabled"})),g({...h.settings,[a]:!v}))},[h,m,a,v,x,u,l.title,g]);return(0,s.jsxs)("div",{className:"flex flex-row w-full gap-4 items-center",children:[(0,s.jsx)(y.default,{src:"/images/feature-preview/square/".concat(null!=(t=O[a])?t:"generic",".png"),style:{objectFit:"cover",width:62,height:62},className:"rounded-lg border border-border-300",width:248,height:248,alt:u.formatMessage({defaultMessage:"Preview image of feature",id:"6VliGZPeZA"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 flex-grow",children:[(0,s.jsx)("h3",{className:"text-text-100 font-base-bold",id:"feature-".concat(a,"-title"),children:l.titleKey?(0,s.jsx)(c.X5,{id:l.titleKey}):l.title}),(0,s.jsx)("p",{className:"text-text-300 font-base",children:l.descriptionKey?(0,s.jsx)(c.X5,{id:l.descriptionKey}):l.description})]}),(0,s.jsx)(p.m,{tooltipContent:M?(0,s.jsx)("div",{className:"text-center",children:M}):null,children:(0,s.jsx)("label",{className:(0,f.A)(!b&&"cursor-pointer"),children:(0,s.jsx)(d.j,{disabled:b,checked:!!v,onChange:k,"aria-labelledby":"feature-".concat(a,"-title")},a)})})]})}let D=e=>{var t,a,s;let{account:n}=(0,r.YL)(),{value:i,source:o}=(0,l.N)(null!=(a=null==n?void 0:n.settings)?a:{}),d=null!=(s=null==n||null==(t=n.settings)?void 0:t[e])&&s;return"enabled_artifacts_attachments"===e?{checked:"flag"===o&&!!i||d,disabled:!1,tooltipContent:null}:{checked:d,disabled:!1,tooltipContent:null}},O={preview_feature_uses_artifacts:"artifacts",preview_feature_uses_latex:"latex",preview_feature_uses_citations:"generic",enabled_artifacts_attachments:"analyse",enabled_turmeric:"turmeric",enabled_gdrive:"google-drive",enabled_web_search:"web-search",enabled_bananagrams:"bananagrams",enabled_foccacia:"foccacia",enabled_sourdough:"sourdough"}},84403:(e,t,a)=>{a.d(t,{L:()=>s,f:()=>n});var s=function(e){return e.CLAUDE_CODE="claude_code",e.ORG_ENABLE_INTEGRATIONS="org_enable_integrations",e.MONKEYS_IN_A_BARREL="monkeys_in_a_barrel",e.AZURE_KNIGHT_GALLANT="azure_knight_gallant",e.RESEARCH_AND_MCP="research_and_mcp",e.ARTIFACTS_GALLERY="artifacts_gallery",e.MCP_DIRECTORY="mcp_directory",e.MEMORY_SEARCH="memory_search",e.MEMORY_SYNTHESIS="memory_synthesis",e}({}),n=function(e){return e.INTERACTED="interacted",e.DISMISSED="dismissed",e}({})},85201:(e,t,a)=>{a.d(t,{Hd:()=>d,Ob:()=>c,gB:()=>o});var s=a(1761),n=a(21036),l=a(92947),i=a(43156);let r=()=>{let{servers:e}=(0,l.gt)();return e.length>0},o=()=>{let e=(0,s.h0)(),t=(0,i.be)(),a=r();return!e&&!t&&!a},d=()=>{let e=(0,s.h0)(),t=r();return e||t},c=()=>(0,n.useLayer)("trials_freemium").get("show_upgrade_buttons",!1)},90384:(e,t,a)=>{a.d(t,{w:()=>n});var s=a(7620);let n=(e,t,a,n)=>(0,s.useMemo)(()=>{{let e=getComputedStyle(document.body);return"hsl(".concat(e.getPropertyValue("--".concat(n)),")")}},[a,n,t,e])},90517:(e,t,a)=>{a.d(t,{I:()=>s});var s=function(e){return e.CREATE="create",e.CREATE_MANUALLY="create_manually",e.LIST="list",e.EDIT="edit",e}({})},93877:(e,t,a)=>{a.d(t,{e:()=>i});var s=a(54568),n=a(43195),l=a(32987);let i=e=>{let{name:t,size:a="md",variant:i="default"}=e,r=null==t?void 0:t.split(" ").map(e=>0===e.length?"":e[0]).join("").substring(0,2).toLocaleUpperCase();return(0,s.jsx)("div",{className:(0,l.$)("flex shrink-0 items-center justify-center rounded-full font-bold select-none",{"h-4 w-4 text-[7px]":"xs"===a,"h-7 w-7 text-[12px]":"sm"===a,"h-8 w-8 text-[14px]":"md"===a,"h-10 w-10 text-lg":"lg"===a,"h-16 w-16 text-2xl":"xl"===a,"bg-text-200 text-bg-100":"default"===i,"bg-accent-pro-100 text-oncolor-100":"pro"===i,"bg-transparent text-text-300":"cardamom"===i}),children:r||(0,s.jsx)(n.KJW,{size:{xs:12,sm:12,md:20,lg:32,xl:32}[a]})})}},95675:(e,t,a)=>{a.d(t,{_:()=>c,x:()=>d});var s=a(54568),n=a(19125),l=a(62942),i=a(7620),r=a(53600);let o=(0,i.createContext)({isDrawerExpanded:!1,setIsDrawerExpanded:()=>void 0});function d(){return(0,i.useContext)(o)}function c(e){let{children:t,conversationUUID:a}=e,d=function(e){let t=!!(0,l.useSearchParams)().get("controls")&&!(window.matchMedia&&window.matchMedia("(max-width: 767px)").matches),[a]=(0,n.V)("".concat(e,":chatControlsSidebarIsOpen"),t);return a}(a),{isExpanded:c,setIsExpanded:u}=(0,r.V)(),[m,x]=(0,i.useState)(d),p=(0,i.useRef)({reopenMain:!1}),h=(0,i.useCallback)(e=>{e&&(c&&(p.current.reopenMain=!0),u(!1)),!e&&p.current.reopenMain&&(p.current.reopenMain=!1,u(!0)),x(e)},[c,u,x]);return(0,s.jsx)(o.Provider,{value:{isDrawerExpanded:m,setIsDrawerExpanded:h},children:t})}},96406:(e,t,a)=>{a.d(t,{I:()=>s});let s="chat-input-menu-search-input"},98769:(e,t,a)=>{a.d(t,{A:()=>s});let s={snappyOut:[.19,1,.22,1],inOutQuart:[.77,0,.175,1],outCirc:[.075,.82,.165,1],inOutBase:[.25,.1,.25,1]}}}]);